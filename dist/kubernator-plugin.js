/*! For license information please see kubernator-plugin.js.LICENSE.txt */
(()=>{var t={916:(t,e)=>{(()=>{var t={326:function(t){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";var r=Array.prototype,i=Object.prototype,o={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","\\":"&#92;"},a=/[&"'<>\\]/g;function s(t,e){return i.hasOwnProperty.call(t,e)}function u(t){return o[t]}function c(t,e,n){var r,i,o;if(t instanceof Error&&(t=(i=t).name+": "+i.message),Object.setPrototypeOf?(r=new Error(t),Object.setPrototypeOf(r,c.prototype)):(r=this,Object.defineProperty(r,"message",{enumerable:!1,writable:!0,value:t})),Object.defineProperty(r,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),i){var a=Object.getOwnPropertyDescriptor(i,"stack");(o=a&&(a.get||function(){return a.value}))||(o=function(){return i.stack})}else{var s=new Error(t).stack;o=function(){return s}}return Object.defineProperty(r,"stack",{get:function(){return o.call(r)}}),Object.defineProperty(r,"cause",{value:i}),r.lineno=e,r.colno=n,r.firstUpdate=!0,r.Update=function(t){var e="("+(t||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?e+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(e+=" [Line "+this.lineno+"]")),e+="\n ",this.firstUpdate&&(e+=" "),this.message=e+(this.message||""),this.firstUpdate=!1,this},r}function l(t){return"[object Function]"===i.toString.call(t)}function f(t){return"[object Array]"===i.toString.call(t)}function h(t){return"[object String]"===i.toString.call(t)}function p(t){return"[object Object]"===i.toString.call(t)}function d(t){var e,n=(e=t)?"string"==typeof e?e.split("."):[e]:[];return function(t){for(var e=t,r=0;r<n.length;r++){var i=n[r];if(!s(e,i))return;e=e[i]}return e}}function y(t){return Array.prototype.slice.call(t)}function m(t,e,n){return Array.prototype.indexOf.call(t||[],e,n)}function g(t){var e=[];for(var n in t)s(t,n)&&e.push(n);return e}(e=t.exports={}).hasOwnProp=s,e._prettifyError=function(t,n,r){if(r.Update||(r=new e.TemplateError(r)),r.Update(t),!n){var i=r;(r=new Error(i.message)).name=i.name}return r},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),e.TemplateError=c,e.escape=function(t){return t.replace(a,u)},e.isFunction=l,e.isArray=f,e.isString=h,e.isObject=p,e.getAttrGetter=d,e.groupBy=function(t,e,n){for(var r={},i=l(e)?e:d(e),o=0;o<t.length;o++){var a=t[o],s=i(a,o);if(void 0===s&&!0===n)throw new TypeError('groupby: attribute "'+e+'" resolved to undefined');(r[s]||(r[s]=[])).push(a)}return r},e.toArray=y,e.without=function(t){var e=[];if(!t)return e;for(var n=t.length,r=y(arguments).slice(1),i=-1;++i<n;)-1===m(r,t[i])&&e.push(t[i]);return e},e.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},e.each=function(t,e,n){if(null!=t)if(r.forEach&&t.forEach===r.forEach)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)},e.map=function(t,e){var n=[];if(null==t)return n;if(r.map&&t.map===r.map)return t.map(e);for(var i=0;i<t.length;i++)n[n.length]=e(t[i],i);return t.length===+t.length&&(n.length=t.length),n},e.asyncIter=function(t,e,n){var r=-1;!function i(){++r<t.length?e(t[r],r,i,n):n()}()},e.asyncFor=function(t,e,n){var r=g(t||{}),i=r.length,o=-1;!function a(){o++;var s=r[o];o<i?e(s,t[s],o,i,a):n()}()},e.indexOf=m,e.keys=g,e._entries=function(t){return g(t).map((function(e){return[e,t[e]]}))},e._values=function(t){return g(t).map((function(e){return t[e]}))},e._assign=e.extend=function(t,e){return t=t||{},g(e).forEach((function(n){t[n]=e[n]})),t},e.inOperator=function(t,e){if(f(e)||h(e))return-1!==e.indexOf(t);if(p(e))return t in e;throw new Error('Cannot use "in" operator to search for "'+t+'" in unexpected types.')}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key))?i:String(i),r)}var i}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}var s=n(16),u=n(0);function c(t,e,n){n=n||{},u.keys(n).forEach((function(e){var r,i;n[e]=(r=t.prototype[e],i=n[e],"function"!=typeof r||"function"!=typeof i?i:function(){var t=this.parent;this.parent=r;var e=i.apply(this,arguments);return this.parent=t,e})}));var r=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),i(n,[{key:"typename",get:function(){return e}}]),n}(t);return u._assign(r.prototype,n),r}var l=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},i(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(),f=function(t){function e(){var e,n;return(e=n=t.call(this)||this).init.apply(e,arguments),n}return o(e,t),e.prototype.init=function(){},e.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},i(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(s);t.exports={Obj:l,EmitterObj:f}},function(t,e,n){"use strict";var r=n(0),i=Array.from,o="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof i,a=function(){function t(t,e){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=e}var e=t.prototype;return e.set=function(t,e,n){var r=t.split("."),i=this.variables,o=this;if(n&&(o=this.resolve(r[0],!0)))o.set(t,e);else{for(var a=0;a<r.length-1;a++){var s=r[a];i[s]||(i[s]={}),i=i[s]}i[r[r.length-1]]=e}},e.get=function(t){var e=this.variables[t];return void 0!==e?e:null},e.lookup=function(t){var e=this.parent,n=this.variables[t];return void 0!==n?n:e&&e.lookup(t)},e.resolve=function(t,e){var n=e&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:n&&n.resolve(t)},e.push=function(e){return new t(this,e)},e.pop=function(){return this.parent},t}();function s(t){return t&&Object.prototype.hasOwnProperty.call(t,"__keywords")}function u(t){var e=t.length;return 0===e?0:s(t[e-1])?e-1:e}function c(t){if("string"!=typeof t)return t;this.val=t,this.length=t.length}c.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),c.prototype.valueOf=function(){return this.val},c.prototype.toString=function(){return this.val},t.exports={Frame:a,makeMacro:function(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a,c=u(i),l=function(t){var e=t.length;if(e){var n=t[e-1];if(s(n))return n}return{}}(i);if(c>t.length)a=i.slice(0,t.length),i.slice(a.length,c).forEach((function(t,n){n<e.length&&(l[e[n]]=t)})),a.push(l);else if(c<t.length){a=i.slice(0,c);for(var f=c;f<t.length;f++){var h=t[f];a.push(l[h]),delete l[h]}a.push(l)}else a=i;return n.apply(this,a)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:u,suppressValue:function(t,e){return t=null!=t?t:"",!e||t instanceof c||(t=r.escape(t.toString())),t},ensureDefined:function(t,e,n){if(null==t)throw new r.TemplateError("attempted to output null or undefined value",e+1,n+1);return t},memberLookup:function(t,e){if(null!=t)return"function"==typeof t[e]?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t[e].apply(t,r)}:t[e]},contextOrFrameLookup:function(t,e,n){var r=e.lookup(n);return void 0!==r?r:t.lookup(n)},callWrap:function(t,e,n,r){if(!t)throw new Error("Unable to call `"+e+"`, which is undefined or falsey");if("function"!=typeof t)throw new Error("Unable to call `"+e+"`, which is not a function");return t.apply(n,r)},handleError:function(t,e,n){return t.lineno?t:new r.TemplateError(t,e,n)},isArray:r.isArray,keys:r.keys,SafeString:c,copySafeness:function(t,e){return t instanceof c?new c(e):e.toString()},markSafe:function(t){var e=typeof t;return"string"===e?new c(t):"function"!==e?t:function(e){var n=t.apply(this,arguments);return"string"==typeof n?new c(n):n}},asyncEach:function(t,e,n,i){if(r.isArray(t)){var o=t.length;r.asyncIter(t,(function(t,r,i){switch(e){case 1:n(t,r,o,i);break;case 2:n(t[0],t[1],r,o,i);break;case 3:n(t[0],t[1],t[2],r,o,i);break;default:t.push(r,o,i),n.apply(this,t)}}),i)}else r.asyncFor(t,(function(t,e,r,i,o){n(t,e,r,i,o)}),i)},asyncAll:function(t,e,n,i){var o,a,s=0;function u(t,e){s++,a[t]=e,s===o&&i(null,a.join(""))}if(r.isArray(t))if(o=t.length,a=new Array(o),0===o)i(null,"");else for(var c=0;c<t.length;c++){var l=t[c];switch(e){case 1:n(l,c,o,u);break;case 2:n(l[0],l[1],c,o,u);break;case 3:n(l[0],l[1],l[2],c,o,u);break;default:l.push(c,o,u),n.apply(this,l)}}else{var f=r.keys(t||{});if(o=f.length,a=new Array(o),0===o)i(null,"");else for(var h=0;h<f.length;h++){var p=f[h];n(p,t[p],h,o,u)}}},inOperator:r.inOperator,fromIterator:function(t){return"object"!=typeof t||null===t||r.isArray(t)?t:o&&Symbol.iterator in t?i(t):t}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,"symbol"==typeof(i=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key))?i:String(i),r)}var i}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function s(t,e,n){t instanceof e&&n.push(t),t instanceof u&&t.findAll(e,n)}var u=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.init=function(t,e){for(var n=arguments,r=this,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];this.lineno=t,this.colno=e,this.fields.forEach((function(t,e){var i=n[e+2];void 0===i&&(i=null),r[t]=i}))},n.findAll=function(t,e){var n=this;return e=e||[],this instanceof l?this.children.forEach((function(n){return s(n,t,e)})):this.fields.forEach((function(r){return s(n[r],t,e)})),e},n.iterFields=function(t){var e=this;this.fields.forEach((function(n){t(e[n],n)}))},e}(n(1).Obj),c=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),i(e,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),e}(u),l=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var n=e.prototype;return n.init=function(e,n,r){t.prototype.init.call(this,e,n,r||[])},n.addChild=function(t){this.children.push(t)},i(e,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),e}(u),f=l.extend("Root"),h=c.extend("Literal"),p=c.extend("Symbol"),d=l.extend("Group"),y=l.extend("Array"),m=u.extend("Pair",{fields:["key","value"]}),g=l.extend("Dict"),v=u.extend("LookupVal",{fields:["target","val"]}),b=u.extend("If",{fields:["cond","body","else_"]}),_=b.extend("IfAsync"),w=u.extend("InlineIf",{fields:["cond","body","else_"]}),x=u.extend("For",{fields:["arr","name","body","else_"]}),k=x.extend("AsyncEach"),O=x.extend("AsyncAll"),S=u.extend("Macro",{fields:["name","args","body"]}),E=S.extend("Caller"),A=u.extend("Import",{fields:["template","target","withContext"]}),T=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(e,n,r,i,o){t.prototype.init.call(this,e,n,r,i||new l,o)},i(e,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),e}(u),M=u.extend("FunCall",{fields:["name","args"]}),N=M.extend("Filter"),C=N.extend("FilterAsync",{fields:["name","args","symbol"]}),j=g.extend("KeywordArgs"),P=u.extend("Block",{fields:["name","body"]}),L=u.extend("Super",{fields:["blockName","symbol"]}),I=u.extend("TemplateRef",{fields:["template"]}).extend("Extends"),D=u.extend("Include",{fields:["template","ignoreMissing"]}),R=u.extend("Set",{fields:["targets","value"]}),B=u.extend("Switch",{fields:["expr","cases","default"]}),F=u.extend("Case",{fields:["cond","body"]}),$=l.extend("Output"),U=u.extend("Capture",{fields:["body"]}),q=h.extend("TemplateData"),K=u.extend("UnaryOp",{fields:["target"]}),z=u.extend("BinOp",{fields:["left","right"]}),V=z.extend("In"),Y=z.extend("Is"),H=z.extend("Or"),W=z.extend("And"),G=K.extend("Not"),J=z.extend("Add"),X=z.extend("Concat"),Q=z.extend("Sub"),Z=z.extend("Mul"),tt=z.extend("Div"),et=z.extend("FloorDiv"),nt=z.extend("Mod"),rt=z.extend("Pow"),it=K.extend("Neg"),ot=K.extend("Pos"),at=u.extend("Compare",{fields:["expr","ops"]}),st=u.extend("CompareOperand",{fields:["expr","type"]}),ut=u.extend("CallExtension",{init:function(t,e,n,r){this.parent(),this.extName=t.__name||t,this.prop=e,this.args=n||new l,this.contentArgs=r||[],this.autoescape=t.autoescape},fields:["extName","prop","args","contentArgs"]}),ct=ut.extend("CallExtensionAsync");function lt(t,e,n){var r=t.split("\n");r.forEach((function(t,i){t&&(n&&i>0||!n)&&process.stdout.write(" ".repeat(e));var o=i===r.length-1?"":"\n";process.stdout.write(""+t+o)}))}t.exports={Node:u,Root:f,NodeList:l,Value:c,Literal:h,Symbol:p,Group:d,Array:y,Pair:m,Dict:g,Output:$,Capture:U,TemplateData:q,If:b,IfAsync:_,InlineIf:w,For:x,AsyncEach:k,AsyncAll:O,Macro:S,Caller:E,Import:A,FromImport:T,FunCall:M,Filter:N,FilterAsync:C,KeywordArgs:j,Block:P,Super:L,Extends:I,Include:D,Set:R,Switch:B,Case:F,LookupVal:v,BinOp:z,In:V,Is:Y,Or:H,And:W,Not:G,Add:J,Concat:X,Sub:Q,Mul:Z,Div:tt,FloorDiv:et,Mod:nt,Pow:rt,Neg:it,Pos:ot,Compare:at,CompareOperand:st,CallExtension:ut,CallExtensionAsync:ct,printNodes:function t(e,n){if(n=n||0,lt(e.typename+": ",n),e instanceof l)lt("\n"),e.children.forEach((function(e){t(e,n+2)}));else if(e instanceof ut)lt(e.extName+"."+e.prop+"\n"),e.args&&t(e.args,n+2),e.contentArgs&&e.contentArgs.forEach((function(e){t(e,n+2)}));else{var r=[],i=null;e.iterFields((function(t,e){t instanceof u?r.push([e,t]):(i=i||{})[e]=t})),i?lt(JSON.stringify(i,null,2)+"\n",null,!0):lt("\n"),r.forEach((function(e){var r=e[0],i=e[1];lt("["+r+"] =>",n+2),t(i,n+4)}))}}}},function(t,e){},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(8),o=n(17),a=n(3),s=n(0).TemplateError,u=n(2).Frame,c=n(1).Obj,l={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},f=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var o=i.prototype;return o.init=function(t,e){this.templateName=t,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=e},o.fail=function(t,e,n){throw void 0!==e&&(e+=1),void 0!==n&&(n+=1),new s(t,e,n)},o._pushBuffer=function(){var t=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=t,this._emit("var "+this.buffer+' = "";'),t},o._popBuffer=function(){this.buffer=this.bufferStack.pop()},o._emit=function(t){this.codebuf.push(t)},o._emitLine=function(t){this._emit(t+"\n")},o._emitLines=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach((function(e){return t._emitLine(e)}))},o._emitFuncBegin=function(t,e){this.buffer="output",this._scopeClosers="",this._emitLine("function "+e+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+t.lineno+";"),this._emitLine("var colno = "+t.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},o._emitFuncEnd=function(t){t||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},o._addScopeLevel=function(){this._scopeClosers+="})"},o._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},o._withScopedSyntax=function(t){var e=this._scopeClosers;this._scopeClosers="",t.call(this),this._closeScopeLevels(),this._scopeClosers=e},o._makeCallback=function(t){var e=this._tmpid();return"function("+e+(t?","+t:"")+") {\nif("+e+") { cb("+e+"); return; }"},o._tmpid=function(){return this.lastId++,"t_"+this.lastId},o._templateName=function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},o._compileChildren=function(t,e){var n=this;t.children.forEach((function(t){n.compile(t,e)}))},o._compileAggregate=function(t,e,n,r){var i=this;n&&this._emit(n),t.children.forEach((function(t,n){n>0&&i._emit(","),i.compile(t,e)})),r&&this._emit(r)},o._compileExpression=function(t,e){this.assertType(t,a.Literal,a.Symbol,a.Group,a.Array,a.Dict,a.FunCall,a.Caller,a.Filter,a.LookupVal,a.Compare,a.InlineIf,a.In,a.Is,a.And,a.Or,a.Not,a.Add,a.Concat,a.Sub,a.Mul,a.Div,a.FloorDiv,a.Mod,a.Pow,a.Neg,a.Pos,a.Compare,a.NodeList),this.compile(t,e)},o.assertType=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.some((function(e){return t instanceof e}))||this.fail("assertType: invalid type: "+t.typename,t.lineno,t.colno)},o.compileCallExtension=function(t,e,n){var r=this,i=t.args,o=t.contentArgs,s="boolean"!=typeof t.autoescape||t.autoescape;if(n||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+t.extName+'")["'+t.prop+'"]('),this._emit("context"),(i||o)&&this._emit(","),i&&(i instanceof a.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),i.children.forEach((function(t,n){r._compileExpression(t,e),(n!==i.children.length-1||o.length)&&r._emit(",")}))),o.length&&o.forEach((function(t,n){if(n>0&&r._emit(","),t){r._emitLine("function(cb) {"),r._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var i=r._pushBuffer();r._withScopedSyntax((function(){r.compile(t,e),r._emitLine("cb(null, "+i+");")})),r._popBuffer(),r._emitLine("return "+i+";"),r._emitLine("}")}else r._emit("null")})),n){var u=this._tmpid();this._emitLine(", "+this._makeCallback(u)),this._emitLine(this.buffer+" += runtime.suppressValue("+u+", "+s+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+s+" && env.opts.autoescape);\n")},o.compileCallExtensionAsync=function(t,e){this.compileCallExtension(t,e,!0)},o.compileNodeList=function(t,e){this._compileChildren(t,e)},o.compileLiteral=function(t){if("string"==typeof t.value){var e=t.value.replace(/\\/g,"\\\\");e=(e=(e=(e=(e=e.replace(/"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t")).replace(/\u2028/g,"\\u2028"),this._emit('"'+e+'"')}else null===t.value?this._emit("null"):this._emit(t.value.toString())},o.compileSymbol=function(t,e){var n=t.value,r=e.lookup(n);r?this._emit(r):this._emit('runtime.contextOrFrameLookup(context, frame, "'+n+'")')},o.compileGroup=function(t,e){this._compileAggregate(t,e,"(",")")},o.compileArray=function(t,e){this._compileAggregate(t,e,"[","]")},o.compileDict=function(t,e){this._compileAggregate(t,e,"{","}")},o.compilePair=function(t,e){var n=t.key,r=t.value;n instanceof a.Symbol?n=new a.Literal(n.lineno,n.colno,n.value):n instanceof a.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,e),this._emit(": "),this._compileExpression(r,e)},o.compileInlineIf=function(t,e){this._emit("("),this.compile(t.cond,e),this._emit("?"),this.compile(t.body,e),this._emit(":"),null!==t.else_?this.compile(t.else_,e):this._emit('""'),this._emit(")")},o.compileIn=function(t,e){this._emit("runtime.inOperator("),this.compile(t.left,e),this._emit(","),this.compile(t.right,e),this._emit(")")},o.compileIs=function(t,e){var n=t.right.name?t.right.name.value:t.right.value;this._emit('env.getTest("'+n+'").call(context, '),this.compile(t.left,e),t.right.args&&(this._emit(","),this.compile(t.right.args,e)),this._emit(") === true")},o._binOpEmitter=function(t,e,n){this.compile(t.left,e),this._emit(n),this.compile(t.right,e)},o.compileOr=function(t,e){return this._binOpEmitter(t,e," || ")},o.compileAnd=function(t,e){return this._binOpEmitter(t,e," && ")},o.compileAdd=function(t,e){return this._binOpEmitter(t,e," + ")},o.compileConcat=function(t,e){return this._binOpEmitter(t,e,' + "" + ')},o.compileSub=function(t,e){return this._binOpEmitter(t,e," - ")},o.compileMul=function(t,e){return this._binOpEmitter(t,e," * ")},o.compileDiv=function(t,e){return this._binOpEmitter(t,e," / ")},o.compileMod=function(t,e){return this._binOpEmitter(t,e," % ")},o.compileNot=function(t,e){this._emit("!"),this.compile(t.target,e)},o.compileFloorDiv=function(t,e){this._emit("Math.floor("),this.compile(t.left,e),this._emit(" / "),this.compile(t.right,e),this._emit(")")},o.compilePow=function(t,e){this._emit("Math.pow("),this.compile(t.left,e),this._emit(", "),this.compile(t.right,e),this._emit(")")},o.compileNeg=function(t,e){this._emit("-"),this.compile(t.target,e)},o.compilePos=function(t,e){this._emit("+"),this.compile(t.target,e)},o.compileCompare=function(t,e){var n=this;this.compile(t.expr,e),t.ops.forEach((function(t){n._emit(" "+l[t.type]+" "),n.compile(t.expr,e)}))},o.compileLookupVal=function(t,e){this._emit("runtime.memberLookup(("),this._compileExpression(t.target,e),this._emit("),"),this._compileExpression(t.val,e),this._emit(")")},o._getNodeName=function(t){switch(t.typename){case"Symbol":return t.value;case"FunCall":return"the return value of ("+this._getNodeName(t.name)+")";case"LookupVal":return this._getNodeName(t.target)+'["'+this._getNodeName(t.val)+'"]';case"Literal":return t.value.toString();default:return"--expression--"}},o.compileFunCall=function(t,e){this._emit("(lineno = "+t.lineno+", colno = "+t.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(t.name,e),this._emit(', "'+this._getNodeName(t.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(t.args,e,"[","])"),this._emit(")")},o.compileFilter=function(t,e){var n=t.name;this.assertType(n,a.Symbol),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(t.args,e),this._emit(")")},o.compileFilterAsync=function(t,e){var n=t.name,r=t.symbol.value;this.assertType(n,a.Symbol),e.set(r,r),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(t.args,e),this._emitLine(", "+this._makeCallback(r)),this._addScopeLevel()},o.compileKeywordArgs=function(t,e){this._emit("runtime.makeKeywordArgs("),this.compileDict(t,e),this._emit(")")},o.compileSet=function(t,e){var n=this,r=[];t.targets.forEach((function(t){var i=t.value,o=e.lookup(i);null==o&&(o=n._tmpid(),n._emitLine("var "+o+";")),r.push(o)})),t.value?(this._emit(r.join(" = ")+" = "),this._compileExpression(t.value,e),this._emitLine(";")):(this._emit(r.join(" = ")+" = "),this.compile(t.body,e),this._emitLine(";")),t.targets.forEach((function(t,e){var i=r[e],o=t.value;n._emitLine('frame.set("'+o+'", '+i+", true);"),n._emitLine("if(frame.topLevel) {"),n._emitLine('context.setVariable("'+o+'", '+i+");"),n._emitLine("}"),"_"!==o.charAt(0)&&(n._emitLine("if(frame.topLevel) {"),n._emitLine('context.addExport("'+o+'", '+i+");"),n._emitLine("}"))}))},o.compileSwitch=function(t,e){var n=this;this._emit("switch ("),this.compile(t.expr,e),this._emit(") {"),t.cases.forEach((function(t,r){n._emit("case "),n.compile(t.cond,e),n._emit(": "),n.compile(t.body,e),t.body.children.length&&n._emitLine("break;")})),t.default&&(this._emit("default:"),this.compile(t.default,e)),this._emit("}")},o.compileIf=function(t,e,n){var r=this;this._emit("if("),this._compileExpression(t.cond,e),this._emitLine(") {"),this._withScopedSyntax((function(){r.compile(t.body,e),n&&r._emit("cb()")})),t.else_?(this._emitLine("}\nelse {"),this._withScopedSyntax((function(){r.compile(t.else_,e),n&&r._emit("cb()")}))):n&&(this._emitLine("}\nelse {"),this._emit("cb()")),this._emitLine("}")},o.compileIfAsync=function(t,e){this._emit("(function(cb) {"),this.compileIf(t,e,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},o._emitLoopBindings=function(t,e,n,r){var i=this;[{name:"index",val:n+" + 1"},{name:"index0",val:n},{name:"revindex",val:r+" - "+n},{name:"revindex0",val:r+" - "+n+" - 1"},{name:"first",val:n+" === 0"},{name:"last",val:n+" === "+r+" - 1"},{name:"length",val:r}].forEach((function(t){i._emitLine('frame.set("loop.'+t.name+'", '+t.val+");")}))},o.compileFor=function(t,e){var n=this,r=this._tmpid(),i=this._tmpid(),o=this._tmpid();if(e=e.push(),this._emitLine("frame = frame.push();"),this._emit("var "+o+" = "),this._compileExpression(t.arr,e),this._emitLine(";"),this._emit("if("+o+") {"),this._emitLine(o+" = runtime.fromIterator("+o+");"),t.name instanceof a.Array){this._emitLine("var "+r+";"),this._emitLine("if(runtime.isArray("+o+")) {"),this._emitLine("var "+i+" = "+o+".length;"),this._emitLine("for("+r+"=0; "+r+" < "+o+".length; "+r+"++) {"),t.name.children.forEach((function(i,a){var s=n._tmpid();n._emitLine("var "+s+" = "+o+"["+r+"]["+a+"];"),n._emitLine('frame.set("'+i+'", '+o+"["+r+"]["+a+"]);"),e.set(t.name.children[a].value,s)})),this._emitLoopBindings(t,o,r,i),this._withScopedSyntax((function(){n.compile(t.body,e)})),this._emitLine("}"),this._emitLine("} else {");var s=t.name.children,u=s[0],c=s[1],l=this._tmpid(),f=this._tmpid();e.set(u.value,l),e.set(c.value,f),this._emitLine(r+" = -1;"),this._emitLine("var "+i+" = runtime.keys("+o+").length;"),this._emitLine("for(var "+l+" in "+o+") {"),this._emitLine(r+"++;"),this._emitLine("var "+f+" = "+o+"["+l+"];"),this._emitLine('frame.set("'+u.value+'", '+l+");"),this._emitLine('frame.set("'+c.value+'", '+f+");"),this._emitLoopBindings(t,o,r,i),this._withScopedSyntax((function(){n.compile(t.body,e)})),this._emitLine("}"),this._emitLine("}")}else{var h=this._tmpid();e.set(t.name.value,h),this._emitLine("var "+i+" = "+o+".length;"),this._emitLine("for(var "+r+"=0; "+r+" < "+o+".length; "+r+"++) {"),this._emitLine("var "+h+" = "+o+"["+r+"];"),this._emitLine('frame.set("'+t.name.value+'", '+h+");"),this._emitLoopBindings(t,o,r,i),this._withScopedSyntax((function(){n.compile(t.body,e)})),this._emitLine("}")}this._emitLine("}"),t.else_&&(this._emitLine("if (!"+i+") {"),this.compile(t.else_,e),this._emitLine("}")),this._emitLine("frame = frame.pop();")},o._compileAsyncLoop=function(t,e,n){var r=this,i=this._tmpid(),o=this._tmpid(),s=this._tmpid(),u=n?"asyncAll":"asyncEach";if(e=e.push(),this._emitLine("frame = frame.push();"),this._emit("var "+s+" = runtime.fromIterator("),this._compileExpression(t.arr,e),this._emitLine(");"),t.name instanceof a.Array){var c=t.name.children.length;this._emit("runtime."+u+"("+s+", "+c+", function("),t.name.children.forEach((function(t){r._emit(t.value+",")})),this._emit(i+","+o+",next) {"),t.name.children.forEach((function(t){var n=t.value;e.set(n,n),r._emitLine('frame.set("'+n+'", '+n+");")}))}else{var l=t.name.value;this._emitLine("runtime."+u+"("+s+", 1, function("+l+", "+i+", "+o+",next) {"),this._emitLine('frame.set("'+l+'", '+l+");"),e.set(l,l)}this._emitLoopBindings(t,s,i,o),this._withScopedSyntax((function(){var o;n&&(o=r._pushBuffer()),r.compile(t.body,e),r._emitLine("next("+i+(o?","+o:"")+");"),n&&r._popBuffer()}));var f=this._tmpid();this._emitLine("}, "+this._makeCallback(f)),this._addScopeLevel(),n&&this._emitLine(this.buffer+" += "+f+";"),t.else_&&(this._emitLine("if (!"+s+".length) {"),this.compile(t.else_,e),this._emitLine("}")),this._emitLine("frame = frame.pop();")},o.compileAsyncEach=function(t,e){this._compileAsyncLoop(t,e)},o.compileAsyncAll=function(t,e){this._compileAsyncLoop(t,e,!0)},o._compileMacro=function(t,e){var n=this,r=[],i=null,o="macro_"+this._tmpid(),s=void 0!==e;t.args.children.forEach((function(e,o){o===t.args.children.length-1&&e instanceof a.Dict?i=e:(n.assertType(e,a.Symbol),r.push(e))}));var c,l=[].concat(r.map((function(t){return"l_"+t.value})),["kwargs"]),f=r.map((function(t){return'"'+t.value+'"'})),h=(i&&i.children||[]).map((function(t){return'"'+t.key.value+'"'}));c=s?e.push(!0):new u,this._emitLines("var "+o+" = runtime.makeMacro(","["+f.join(", ")+"], ","["+h.join(", ")+"], ","function ("+l.join(", ")+") {","var callerFrame = frame;","frame = "+(s?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),r.forEach((function(t){n._emitLine('frame.set("'+t.value+'", l_'+t.value+");"),c.set(t.value,"l_"+t.value)})),i&&i.children.forEach((function(t){var e=t.key.value;n._emit('frame.set("'+e+'", '),n._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+e+'")'),n._emit(' ? kwargs["'+e+'"] : '),n._compileExpression(t.value,c),n._emit(");")}));var p=this._pushBuffer();return this._withScopedSyntax((function(){n.compile(t.body,c)})),this._emitLine("frame = "+(s?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+p+");"),this._emitLine("});"),this._popBuffer(),o},o.compileMacro=function(t,e){var n=this._compileMacro(t),r=t.name.value;e.set(r,n),e.parent?this._emitLine('frame.set("'+r+'", '+n+");"):("_"!==t.name.value.charAt(0)&&this._emitLine('context.addExport("'+r+'");'),this._emitLine('context.setVariable("'+r+'", '+n+");"))},o.compileCaller=function(t,e){this._emit("(function (){");var n=this._compileMacro(t,e);this._emit("return "+n+";})()")},o._compileGetTemplate=function(t,e,n,r){var i=this._tmpid(),o=this._templateName(),a=this._makeCallback(i),s=n?"true":"false",u=r?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(t.template,e),this._emitLine(", "+s+", "+o+", "+u+", "+a),i},o.compileImport=function(t,e){var n=t.target.value,r=this._compileGetTemplate(t,e,!1,!1);this._addScopeLevel(),this._emitLine(r+".getExported("+(t.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(r)),this._addScopeLevel(),e.set(n,r),e.parent?this._emitLine('frame.set("'+n+'", '+r+");"):this._emitLine('context.setVariable("'+n+'", '+r+");")},o.compileFromImport=function(t,e){var n=this,r=this._compileGetTemplate(t,e,!1,!1);this._addScopeLevel(),this._emitLine(r+".getExported("+(t.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(r)),this._addScopeLevel(),t.names.children.forEach((function(t){var i,o,s=n._tmpid();t instanceof a.Pair?(i=t.key.value,o=t.value.value):o=i=t.value,n._emitLine("if(Object.prototype.hasOwnProperty.call("+r+', "'+i+'")) {'),n._emitLine("var "+s+" = "+r+"."+i+";"),n._emitLine("} else {"),n._emitLine("cb(new Error(\"cannot import '"+i+"'\")); return;"),n._emitLine("}"),e.set(o,s),e.parent?n._emitLine('frame.set("'+o+'", '+s+");"):n._emitLine('context.setVariable("'+o+'", '+s+");")}))},o.compileBlock=function(t){var e=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+t.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(e)),this._emitLine(this.buffer+" += "+e+";"),this._addScopeLevel()},o.compileSuper=function(t,e){var n=t.blockName.value,r=t.symbol.value,i=this._makeCallback(r);this._emitLine('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+i),this._emitLine(r+" = runtime.markSafe("+r+");"),this._addScopeLevel(),e.set(r,r)},o.compileExtends=function(t,e){var n=this._tmpid(),r=this._compileGetTemplate(t,e,!0,!1);this._emitLine("parentTemplate = "+r),this._emitLine("for(var "+n+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this._emitLine("}"),this._addScopeLevel()},o.compileInclude=function(t,e){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var n=this._compileGetTemplate(t,e,!1,t.ignoreMissing);this._emitLine("callback(null,"+n+");});"),this._emitLine("});");var r=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(r)),this._emitLine("callback(null,"+r+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},o.compileTemplateData=function(t,e){this.compileLiteral(t,e)},o.compileCapture=function(t,e){var n=this,r=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax((function(){n.compile(t.body,e)})),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=r},o.compileOutput=function(t,e){var n=this;t.children.forEach((function(r){r instanceof a.TemplateData?r.value&&(n._emit(n.buffer+" += "),n.compileLiteral(r,e),n._emitLine(";")):(n._emit(n.buffer+" += runtime.suppressValue("),n.throwOnUndefined&&n._emit("runtime.ensureDefined("),n.compile(r,e),n.throwOnUndefined&&n._emit(","+t.lineno+","+t.colno+")"),n._emit(", env.opts.autoescape);\n"))}))},o.compileRoot=function(t,e){var n=this;e&&this.fail("compileRoot: root node can't have frame"),e=new u,this._emitFuncBegin(t,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(t,e),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var r=[],i=t.findAll(a.Block);i.forEach((function(t,e){var i=t.name.value;if(-1!==r.indexOf(i))throw new Error('Block "'+i+'" defined more than once.');r.push(i),n._emitFuncBegin(t,"b_"+i);var o=new u;n._emitLine("var frame = frame.push(true);"),n.compile(t.body,o),n._emitFuncEnd()})),this._emitLine("return {"),i.forEach((function(t,e){var r="b_"+t.name.value;n._emitLine(r+": "+r+",")})),this._emitLine("root: root\n};")},o.compile=function(t,e){var n=this["compile"+t.typename];n?n.call(this,t,e):this.fail("compile: Cannot compile node: "+t.typename,t.lineno,t.colno)},o.getCode=function(){return this.codebuf.join("")},i}(c);t.exports={compile:function(t,e,n,r,a){void 0===a&&(a={});var s=new f(r,a.throwOnUndefined),u=(n||[]).map((function(t){return t.preprocess})).filter((function(t){return!!t})).reduce((function(t,e){return e(t)}),t);return s.compile(o.transform(i.parse(u,n,a),e,r)),s.getCode()},Compiler:f}},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(4),o=n(1).EmitterObj;t.exports=function(t){var e,n;function o(){return t.apply(this,arguments)||this}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=o.prototype;return a.resolve=function(t,e){return i.resolve(i.dirname(t),e)},a.isRelative=function(t){return 0===t.indexOf("./")||0===t.indexOf("../")},o}(o)},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}var o=n(12),a=n(15),s=n(0),u=n(5),c=n(18),l=n(10),f=l.FileSystemLoader,h=l.WebLoader,p=l.PrecompiledLoader,d=n(20),y=n(21),m=n(1),g=m.Obj,v=m.EmitterObj,b=n(2),_=b.handleError,w=b.Frame,x=n(22);function k(t,e,n){o((function(){t(e,n)}))}var O={type:"code",obj:{root:function(t,e,n,r,i){try{i(null,"")}catch(t){i(_(t,null,null))}}}},S=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e){var n=this;e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null==e.autoescape||e.autoescape,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=s.isArray(t)?t:[t]:f?this.loaders=[new f("views")]:h&&(this.loaders=[new h("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new p(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=y(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],s._entries(c).forEach((function(t){var e=t[0],r=t[1];return n.addFilter(e,r)})),s._entries(d).forEach((function(t){var e=t[0],r=t[1];return n.addTest(e,r)}))},n._initLoaders=function(){var t=this;this.loaders.forEach((function(e){e.cache={},"function"==typeof e.on&&(e.on("update",(function(n,r){e.cache[n]=null,t.emit("update",n,r,e)})),e.on("load",(function(n,r){t.emit("load",n,r,e)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(t){t.cache={}}))},n.addExtension=function(t,e){return e.__name=t,this.extensions[t]=e,this.extensionsList.push(e),this},n.removeExtension=function(t){var e=this.getExtension(t);e&&(this.extensionsList=s.without(this.extensionsList,e),delete this.extensions[t])},n.getExtension=function(t){return this.extensions[t]},n.hasExtension=function(t){return!!this.extensions[t]},n.addGlobal=function(t,e){return this.globals[t]=e,this},n.getGlobal=function(t){if(void 0===this.globals[t])throw new Error("global not found: "+t);return this.globals[t]},n.addFilter=function(t,e,n){var r=e;return n&&this.asyncFilters.push(t),this.filters[t]=r,this},n.getFilter=function(t){if(!this.filters[t])throw new Error("filter not found: "+t);return this.filters[t]},n.addTest=function(t,e){return this.tests[t]=e,this},n.getTest=function(t){if(!this.tests[t])throw new Error("test not found: "+t);return this.tests[t]},n.resolveTemplate=function(t,e,n){return t.isRelative&&e&&t.isRelative(n)&&t.resolve?t.resolve(e,n):n},n.getTemplate=function(t,e,n,r,i){var o,a=this,u=this,c=null;if(t&&t.raw&&(t=t.raw),s.isFunction(n)&&(i=n,n=null,e=e||!1),s.isFunction(e)&&(i=e,e=!1),t instanceof A)c=t;else{if("string"!=typeof t)throw new Error("template names must be a string: "+t);for(var l=0;l<this.loaders.length;l++){var f=this.loaders[l];if(c=f.cache[this.resolveTemplate(f,n,t)])break}}return c?(e&&c.compile(),i?void i(null,c):c):(s.asyncIter(this.loaders,(function(e,r,i,o){function a(t,n){t?o(t):n?(n.loader=e,o(null,n)):i()}t=u.resolveTemplate(e,n,t),e.async?e.getSource(t,a):a(null,e.getSource(t))}),(function(n,s){if(s||n||r||(n=new Error("template not found: "+t)),n){if(i)return void i(n);throw n}var u;s?(u=new A(s.src,a,s.path,e),s.noCache||(s.loader.cache[t]=u)):u=new A(O,a,"",e),i?i(null,u):o=u})),o)},n.express=function(t){return x(this,t)},n.render=function(t,e,n){s.isFunction(e)&&(n=e,e=null);var r=null;return this.getTemplate(t,(function(t,i){if(t&&n)k(n,t);else{if(t)throw t;r=i.render(e,n)}})),r},n.renderString=function(t,e,n,r){return s.isFunction(n)&&(r=n,n={}),new A(t,this,(n=n||{}).path).render(e,r)},n.waterfall=function(t,e,n){return a(t,e,n)},e}(v),E=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n){var r=this;this.env=n||new S,this.ctx=s.extend({},t),this.blocks={},this.exported=[],s.keys(e).forEach((function(t){r.addBlock(t,e[t])}))},n.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},n.setVariable=function(t,e){this.ctx[t]=e},n.getVariables=function(){return this.ctx},n.addBlock=function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},n.getBlock=function(t){if(!this.blocks[t])throw new Error('unknown block "'+t+'"');return this.blocks[t][0]},n.getSuper=function(t,e,n,r,i,o){var a=s.indexOf(this.blocks[e]||[],n),u=this.blocks[e][a+1];if(-1===a||!u)throw new Error('no super block available for "'+e+'"');u(t,this,r,i,o)},n.addExport=function(t){this.exported.push(t)},n.getExported=function(){var t=this,e={};return this.exported.forEach((function(n){e[n]=t.ctx[n]})),e},e}(g),A=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n,r){if(this.env=e||new S,s.isObject(t))switch(t.type){case"code":this.tmplProps=t.obj;break;case"string":this.tmplStr=t.obj;break;default:throw new Error("Unexpected template object type "+t.type+"; expected 'code', or 'string'")}else{if(!s.isString(t))throw new Error("src must be a string or an object describing the source");this.tmplStr=t}if(this.path=n,r)try{this._compile()}catch(t){throw s._prettifyError(this.path,this.env.opts.dev,t)}else this.compiled=!1},n.render=function(t,e,n){var r=this;"function"==typeof t?(n=t,t={}):"function"==typeof e&&(n=e,e=null);var i=!e;try{this.compile()}catch(t){var o=s._prettifyError(this.path,this.env.opts.dev,t);if(n)return k(n,o);throw o}var a=new E(t||{},this.blocks,this.env),u=e?e.push(!0):new w;u.topLevel=!0;var c=null,l=!1;return this.rootRenderFunc(this.env,a,u,b,(function(t,e){if(!l||!n||void 0===e)if(t&&(t=s._prettifyError(r.path,r.env.opts.dev,t),l=!0),n)i?k(n,t,e):n(t,e);else{if(t)throw t;c=e}})),c},n.getExported=function(t,e,n){"function"==typeof t&&(n=t,t={}),"function"==typeof e&&(n=e,e=null);try{this.compile()}catch(t){if(n)return n(t);throw t}var r=e?e.push():new w;r.topLevel=!0;var i=new E(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,i,r,b,(function(t){t?n(t,null):n(null,i.getExported())}))},n.compile=function(){this.compiled||this._compile()},n._compile=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=u.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=new Function(e)()}this.blocks=this._getBlocks(t),this.rootRenderFunc=t.root,this.compiled=!0},n._getBlocks=function(t){var e={};return s.keys(t).forEach((function(n){"b_"===n.slice(0,2)&&(e[n.slice(2)]=t[n])})),e},e}(g);t.exports={Environment:S,Template:A}},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(9),o=n(3),a=n(1).Obj,s=n(0),u=function(t){var e,n;function a(){return t.apply(this,arguments)||this}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var u=a.prototype;return u.init=function(t){this.tokens=t,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},u.nextToken=function(t){var e;if(this.peeked){if(t||this.peeked.type!==i.TOKEN_WHITESPACE)return e=this.peeked,this.peeked=null,e;this.peeked=null}if(e=this.tokens.nextToken(),!t)for(;e&&e.type===i.TOKEN_WHITESPACE;)e=this.tokens.nextToken();return e},u.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},u.pushToken=function(t){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=t},u.error=function(t,e,n){if(void 0===e||void 0===n){var r=this.peekToken()||{};e=r.lineno,n=r.colno}return void 0!==e&&(e+=1),void 0!==n&&(n+=1),new s.TemplateError(t,e,n)},u.fail=function(t,e,n){throw this.error(t,e,n)},u.skip=function(t){var e=this.nextToken();return!(!e||e.type!==t)||(this.pushToken(e),!1)},u.expect=function(t){var e=this.nextToken();return e.type!==t&&this.fail("expected "+t+", got "+e.type,e.lineno,e.colno),e},u.skipValue=function(t,e){var n=this.nextToken();return!(!n||n.type!==t||n.value!==e)||(this.pushToken(n),!1)},u.skipSymbol=function(t){return this.skipValue(i.TOKEN_SYMBOL,t)},u.advanceAfterBlockEnd=function(t){var e;return t||((e=this.peekToken())||this.fail("unexpected end of file"),e.type!==i.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),t=this.nextToken().value),(e=this.nextToken())&&e.type===i.TOKEN_BLOCK_END?"-"===e.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+t+" statement"),e},u.advanceAfterVariableEnd=function(){var t=this.nextToken();t&&t.type===i.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===t.value.charAt(t.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(t),this.fail("expected variable end"))},u.parseFor=function(){var t,e,n=this.peekToken();if(this.skipSymbol("for")?(t=new o.For(n.lineno,n.colno),e="endfor"):this.skipSymbol("asyncEach")?(t=new o.AsyncEach(n.lineno,n.colno),e="endeach"):this.skipSymbol("asyncAll")?(t=new o.AsyncAll(n.lineno,n.colno),e="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),t.name=this.parsePrimary(),t.name instanceof o.Symbol||this.fail("parseFor: variable name expected for loop"),this.peekToken().type===i.TOKEN_COMMA){var r=t.name;for(t.name=new o.Array(r.lineno,r.colno),t.name.addChild(r);this.skip(i.TOKEN_COMMA);){var a=this.parsePrimary();t.name.addChild(a)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),t.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),t.body=this.parseUntilBlocks(e,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),t.else_=this.parseUntilBlocks(e)),this.advanceAfterBlockEnd(),t},u.parseMacro=function(){var t=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var e=this.parsePrimary(!0),n=this.parseSignature(),r=new o.Macro(t.lineno,t.colno,e,n);return this.advanceAfterBlockEnd(t.value),r.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),r},u.parseCall=function(){var t=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var e=this.parseSignature(!0)||new o.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(t.value);var r=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var i=new o.Symbol(t.lineno,t.colno,"caller"),a=new o.Caller(t.lineno,t.colno,i,e,r),s=n.args.children;return s[s.length-1]instanceof o.KeywordArgs||s.push(new o.KeywordArgs),s[s.length-1].addChild(new o.Pair(t.lineno,t.colno,i,a)),new o.Output(t.lineno,t.colno,[n])},u.parseWithContext=function(){var t=this.peekToken(),e=null;return this.skipSymbol("with")?e=!0:this.skipSymbol("without")&&(e=!1),null!==e&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",t.lineno,t.colno)),e},u.parseImport=function(){var t=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",t.lineno,t.colno);var e=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',t.lineno,t.colno);var n=this.parseExpression(),r=this.parseWithContext(),i=new o.Import(t.lineno,t.colno,e,n,r);return this.advanceAfterBlockEnd(t.value),i},u.parseFrom=function(){var t=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var e=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",t.lineno,t.colno);for(var n,r=new o.NodeList;;){var a=this.peekToken();if(a.type===i.TOKEN_BLOCK_END){r.children.length||this.fail("parseFrom: Expected at least one import name",t.lineno,t.colno),"-"===a.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}r.children.length>0&&!this.skip(i.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",t.lineno,t.colno);var s=this.parsePrimary();if("_"===s.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",s.lineno,s.colno),this.skipSymbol("as")){var u=this.parsePrimary();r.addChild(new o.Pair(s.lineno,s.colno,s,u))}else r.addChild(s);n=this.parseWithContext()}return new o.FromImport(t.lineno,t.colno,e,r,n)},u.parseBlock=function(){var t=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",t.lineno,t.colno);var e=new o.Block(t.lineno,t.colno);e.name=this.parsePrimary(),e.name instanceof o.Symbol||this.fail("parseBlock: variable name expected",t.lineno,t.colno),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(e.name.value);var n=this.peekToken();return n||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(n.value),e},u.parseExtends=function(){var t="extends",e=this.peekToken();this.skipSymbol(t)||this.fail("parseTemplateRef: expected "+t);var n=new o.Extends(e.lineno,e.colno);return n.template=this.parseExpression(),this.advanceAfterBlockEnd(e.value),n},u.parseInclude=function(){var t="include",e=this.peekToken();this.skipSymbol(t)||this.fail("parseInclude: expected "+t);var n=new o.Include(e.lineno,e.colno);return n.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(n.ignoreMissing=!0),this.advanceAfterBlockEnd(e.value),n},u.parseIf=function(){var t,e=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?t=new o.If(e.lineno,e.colno):this.skipSymbol("ifAsync")?t=new o.IfAsync(e.lineno,e.colno):this.fail("parseIf: expected if, elif, or elseif",e.lineno,e.colno),t.cond=this.parseExpression(),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("elif","elseif","else","endif");var n=this.peekToken();switch(n&&n.value){case"elseif":case"elif":t.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),t.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":t.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return t},u.parseSet=function(){var t=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",t.lineno,t.colno);for(var e,n=new o.Set(t.lineno,t.colno,[]);(e=this.parsePrimary())&&(n.targets.push(e),this.skip(i.TOKEN_COMMA)););return this.skipValue(i.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(t.value)):this.skip(i.TOKEN_BLOCK_END)?(n.body=new o.Capture(t.lineno,t.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",t.lineno,t.colno),n},u.parseSwitch=function(){var t="switch",e="endswitch",n="case",r="default",i=this.peekToken();this.skipSymbol(t)||this.skipSymbol(n)||this.skipSymbol(r)||this.fail('parseSwitch: expected "switch," "case" or "default"',i.lineno,i.colno);var a=this.parseExpression();this.advanceAfterBlockEnd(t),this.parseUntilBlocks(n,r,e);var s,u=this.peekToken(),c=[];do{this.skipSymbol(n);var l=this.parseExpression();this.advanceAfterBlockEnd(t);var f=this.parseUntilBlocks(n,r,e);c.push(new o.Case(u.line,u.col,l,f)),u=this.peekToken()}while(u&&u.value===n);switch(u.value){case r:this.advanceAfterBlockEnd(),s=this.parseUntilBlocks(e),this.advanceAfterBlockEnd();break;case e:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new o.Switch(i.lineno,i.colno,a,c,s)},u.parseStatement=function(){var t=this.peekToken();if(t.type!==i.TOKEN_SYMBOL&&this.fail("tag name expected",t.lineno,t.colno),this.breakOnBlocks&&-1!==s.indexOf(this.breakOnBlocks,t.value))return null;switch(t.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var e=0;e<this.extensions.length;e++){var n=this.extensions[e];if(-1!==s.indexOf(n.tags||[],t.value))return n.parse(this,o,i)}this.fail("unknown block tag: "+t.value,t.lineno,t.colno)}},u.parseRaw=function(t){for(var e="end"+(t=t||"raw"),n=new RegExp("([\\s\\S]*?){%\\s*("+t+"|"+e+")\\s*(?=%})%}"),r=1,i="",a=null,s=this.advanceAfterBlockEnd();(a=this.tokens._extractRegex(n))&&r>0;){var u=a[0],c=a[1],l=a[2];l===t?r+=1:l===e&&(r-=1),0===r?(i+=c,this.tokens.backN(u.length-c.length)):i+=u}return new o.Output(s.lineno,s.colno,[new o.TemplateData(s.lineno,s.colno,i)])},u.parsePostfix=function(t){for(var e,n=this.peekToken();n;){if(n.type===i.TOKEN_LEFT_PAREN)t=new o.FunCall(n.lineno,n.colno,t,this.parseSignature());else if(n.type===i.TOKEN_LEFT_BRACKET)(e=this.parseAggregate()).children.length>1&&this.fail("invalid index"),t=new o.LookupVal(n.lineno,n.colno,t,e.children[0]);else{if(n.type!==i.TOKEN_OPERATOR||"."!==n.value)break;this.nextToken();var r=this.nextToken();r.type!==i.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+r.value,r.lineno,r.colno),e=new o.Literal(r.lineno,r.colno,r.value),t=new o.LookupVal(n.lineno,n.colno,t,e)}n=this.peekToken()}return t},u.parseExpression=function(){return this.parseInlineIf()},u.parseInlineIf=function(){var t=this.parseOr();if(this.skipSymbol("if")){var e=this.parseOr(),n=t;(t=new o.InlineIf(t.lineno,t.colno)).body=n,t.cond=e,this.skipSymbol("else")?t.else_=this.parseOr():t.else_=null}return t},u.parseOr=function(){for(var t=this.parseAnd();this.skipSymbol("or");){var e=this.parseAnd();t=new o.Or(t.lineno,t.colno,t,e)}return t},u.parseAnd=function(){for(var t=this.parseNot();this.skipSymbol("and");){var e=this.parseNot();t=new o.And(t.lineno,t.colno,t,e)}return t},u.parseNot=function(){var t=this.peekToken();return this.skipSymbol("not")?new o.Not(t.lineno,t.colno,this.parseNot()):this.parseIn()},u.parseIn=function(){for(var t=this.parseIs();;){var e=this.nextToken();if(!e)break;var n=e.type===i.TOKEN_SYMBOL&&"not"===e.value;if(n||this.pushToken(e),!this.skipSymbol("in")){n&&this.pushToken(e);break}var r=this.parseIs();t=new o.In(t.lineno,t.colno,t,r),n&&(t=new o.Not(t.lineno,t.colno,t))}return t},u.parseIs=function(){var t=this.parseCompare();if(this.skipSymbol("is")){var e=this.skipSymbol("not"),n=this.parseCompare();t=new o.Is(t.lineno,t.colno,t,n),e&&(t=new o.Not(t.lineno,t.colno,t))}return t},u.parseCompare=function(){for(var t=["==","===","!=","!==","<",">","<=",">="],e=this.parseConcat(),n=[];;){var r=this.nextToken();if(!r)break;if(-1===t.indexOf(r.value)){this.pushToken(r);break}n.push(new o.CompareOperand(r.lineno,r.colno,this.parseConcat(),r.value))}return n.length?new o.Compare(n[0].lineno,n[0].colno,e,n):e},u.parseConcat=function(){for(var t=this.parseAdd();this.skipValue(i.TOKEN_TILDE,"~");){var e=this.parseAdd();t=new o.Concat(t.lineno,t.colno,t,e)}return t},u.parseAdd=function(){for(var t=this.parseSub();this.skipValue(i.TOKEN_OPERATOR,"+");){var e=this.parseSub();t=new o.Add(t.lineno,t.colno,t,e)}return t},u.parseSub=function(){for(var t=this.parseMul();this.skipValue(i.TOKEN_OPERATOR,"-");){var e=this.parseMul();t=new o.Sub(t.lineno,t.colno,t,e)}return t},u.parseMul=function(){for(var t=this.parseDiv();this.skipValue(i.TOKEN_OPERATOR,"*");){var e=this.parseDiv();t=new o.Mul(t.lineno,t.colno,t,e)}return t},u.parseDiv=function(){for(var t=this.parseFloorDiv();this.skipValue(i.TOKEN_OPERATOR,"/");){var e=this.parseFloorDiv();t=new o.Div(t.lineno,t.colno,t,e)}return t},u.parseFloorDiv=function(){for(var t=this.parseMod();this.skipValue(i.TOKEN_OPERATOR,"//");){var e=this.parseMod();t=new o.FloorDiv(t.lineno,t.colno,t,e)}return t},u.parseMod=function(){for(var t=this.parsePow();this.skipValue(i.TOKEN_OPERATOR,"%");){var e=this.parsePow();t=new o.Mod(t.lineno,t.colno,t,e)}return t},u.parsePow=function(){for(var t=this.parseUnary();this.skipValue(i.TOKEN_OPERATOR,"**");){var e=this.parseUnary();t=new o.Pow(t.lineno,t.colno,t,e)}return t},u.parseUnary=function(t){var e,n=this.peekToken();return e=this.skipValue(i.TOKEN_OPERATOR,"-")?new o.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(i.TOKEN_OPERATOR,"+")?new o.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),t||(e=this.parseFilter(e)),e},u.parsePrimary=function(t){var e,n=this.nextToken(),r=null;if(n?n.type===i.TOKEN_STRING?e=n.value:n.type===i.TOKEN_INT?e=parseInt(n.value,10):n.type===i.TOKEN_FLOAT?e=parseFloat(n.value):n.type===i.TOKEN_BOOLEAN?"true"===n.value?e=!0:"false"===n.value?e=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===i.TOKEN_NONE?e=null:n.type===i.TOKEN_REGEX&&(e=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==e?r=new o.Literal(n.lineno,n.colno,e):n.type===i.TOKEN_SYMBOL?r=new o.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),r=this.parseAggregate()),t||(r=this.parsePostfix(r)),r)return r;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},u.parseFilterName=function(){for(var t=this.expect(i.TOKEN_SYMBOL),e=t.value;this.skipValue(i.TOKEN_OPERATOR,".");)e+="."+this.expect(i.TOKEN_SYMBOL).value;return new o.Symbol(t.lineno,t.colno,e)},u.parseFilterArgs=function(t){return this.peekToken().type===i.TOKEN_LEFT_PAREN?this.parsePostfix(t).args.children:[]},u.parseFilter=function(t){for(;this.skip(i.TOKEN_PIPE);){var e=this.parseFilterName();t=new o.Filter(e.lineno,e.colno,e,new o.NodeList(e.lineno,e.colno,[t].concat(this.parseFilterArgs(t))))}return t},u.parseFilterStatement=function(){var t=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var e=this.parseFilterName(),n=this.parseFilterArgs(e);this.advanceAfterBlockEnd(t.value);var r=new o.Capture(e.lineno,e.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var i=new o.Filter(e.lineno,e.colno,e,new o.NodeList(e.lineno,e.colno,[r].concat(n)));return new o.Output(e.lineno,e.colno,[i])},u.parseAggregate=function(){var t,e=this.nextToken();switch(e.type){case i.TOKEN_LEFT_PAREN:t=new o.Group(e.lineno,e.colno);break;case i.TOKEN_LEFT_BRACKET:t=new o.Array(e.lineno,e.colno);break;case i.TOKEN_LEFT_CURLY:t=new o.Dict(e.lineno,e.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===i.TOKEN_RIGHT_PAREN||n===i.TOKEN_RIGHT_BRACKET||n===i.TOKEN_RIGHT_CURLY){this.nextToken();break}if(t.children.length>0&&(this.skip(i.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",e.lineno,e.colno)),t instanceof o.Dict){var r=this.parsePrimary();this.skip(i.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",e.lineno,e.colno);var a=this.parseExpression();t.addChild(new o.Pair(r.lineno,r.colno,r,a))}else{var s=this.parseExpression();t.addChild(s)}}return t},u.parseSignature=function(t,e){var n=this.peekToken();if(!e&&n.type!==i.TOKEN_LEFT_PAREN){if(t)return null;this.fail("expected arguments",n.lineno,n.colno)}n.type===i.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var r=new o.NodeList(n.lineno,n.colno),a=new o.KeywordArgs(n.lineno,n.colno),s=!1;;){if(n=this.peekToken(),!e&&n.type===i.TOKEN_RIGHT_PAREN){this.nextToken();break}if(e&&n.type===i.TOKEN_BLOCK_END)break;if(s&&!this.skip(i.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",n.lineno,n.colno);else{var u=this.parseExpression();this.skipValue(i.TOKEN_OPERATOR,"=")?a.addChild(new o.Pair(u.lineno,u.colno,u,this.parseExpression())):r.addChild(u)}s=!0}return a.children.length&&r.addChild(a),r},u.parseUntilBlocks=function(){for(var t=this.breakOnBlocks,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.breakOnBlocks=n;var i=this.parse();return this.breakOnBlocks=t,i},u.parseNodes=function(){for(var t,e=[];t=this.nextToken();)if(t.type===i.TOKEN_DATA){var n=t.value,r=this.peekToken(),a=r&&r.value;this.dropLeadingWhitespace&&(n=n.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),r&&(r.type===i.TOKEN_BLOCK_START&&"-"===a.charAt(a.length-1)||r.type===i.TOKEN_VARIABLE_START&&"-"===a.charAt(this.tokens.tags.VARIABLE_START.length)||r.type===i.TOKEN_COMMENT&&"-"===a.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\s*$/,"")),e.push(new o.Output(t.lineno,t.colno,[new o.TemplateData(t.lineno,t.colno,n)]))}else if(t.type===i.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var s=this.parseStatement();if(!s)break;e.push(s)}else if(t.type===i.TOKEN_VARIABLE_START){var u=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),e.push(new o.Output(t.lineno,t.colno,[u]))}else t.type===i.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===t.value.charAt(t.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+t.type,t.lineno,t.colno);return e},u.parse=function(){return new o.NodeList(0,0,this.parseNodes())},u.parseAsRoot=function(){return new o.Root(0,0,this.parseNodes())},a}(a);t.exports={parse:function(t,e,n){var r=new u(i.lex(t,n));return void 0!==e&&(r.extensions=e),r.parseAsRoot()},Parser:u}},function(t,e,n){"use strict";var r=n(0),i=" \n\t\r ",o="()[]{}%*-+~/#,:|.<>=!",a="string",s="whitespace",u="data",c="block-start",l="block-end",f="variable-start",h="variable-end",p="comment",d="left-paren",y="right-paren",m="left-bracket",g="right-bracket",v="left-curly",b="right-curly",_="operator",w="comma",x="colon",k="tilde",O="pipe",S="float",E="boolean",A="none",T="symbol",M="regex";function N(t,e,n,r){return{type:t,value:e,lineno:n,colno:r}}var C=function(){function t(t,e){this.str=t,this.index=0,this.len=t.length,this.lineno=0,this.colno=0,this.in_code=!1;var n=(e=e||{}).tags||{};this.tags={BLOCK_START:n.blockStart||"{%",BLOCK_END:n.blockEnd||"%}",VARIABLE_START:n.variableStart||"{{",VARIABLE_END:n.variableEnd||"}}",COMMENT_START:n.commentStart||"{#",COMMENT_END:n.commentEnd||"#}"},this.trimBlocks=!!e.trimBlocks,this.lstripBlocks=!!e.lstripBlocks}var e=t.prototype;return e.nextToken=function(){var t,e=this.lineno,n=this.colno;if(this.in_code){var C=this.current();if(this.isFinished())return null;if('"'===C||"'"===C)return N(a,this._parseString(C),e,n);if(t=this._extract(i))return N(s,t,e,n);if((t=this._extractString(this.tags.BLOCK_END))||(t=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&("\n"===(C=this.current())?this.forward():"\r"===C&&(this.forward(),"\n"===(C=this.current())?this.forward():this.back())),N(l,t,e,n);if((t=this._extractString(this.tags.VARIABLE_END))||(t=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,N(h,t,e,n);if("r"===C&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var j="";!this.isFinished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}j+=this.current(),this.forward()}for(var P=["g","i","m","y"],L="";!this.isFinished()&&-1!==P.indexOf(this.current());)L+=this.current(),this.forward();return N(M,{body:j,flags:L},e,n)}if(-1!==o.indexOf(C)){this.forward();var I,D=["==","===","!=","!==","<=",">=","//","**"],R=C+this.current();switch(-1!==r.indexOf(D,R)&&(this.forward(),C=R,-1!==r.indexOf(D,R+this.current())&&(C=R+this.current(),this.forward())),C){case"(":I=d;break;case")":I=y;break;case"[":I=m;break;case"]":I=g;break;case"{":I=v;break;case"}":I=b;break;case",":I=w;break;case":":I=x;break;case"~":I=k;break;case"|":I=O;break;default:I=_}return N(I,C,e,n)}if((t=this._extractUntil(i+o)).match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var B=this._extract("0123456789");return N(S,t+"."+B,e,n)}return N("int",t,e,n)}if(t.match(/^(true|false)$/))return N(E,t,e,n);if("none"===t)return N(A,t,e,n);if("null"===t)return N(A,t,e,n);if(t)return N(T,t,e,n);throw new Error("Unexpected value while parsing: "+t)}var F,$=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((t=this._extractString(this.tags.BLOCK_START+"-"))||(t=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,N(c,t,e,n);if((t=this._extractString(this.tags.VARIABLE_START+"-"))||(t=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,N(f,t,e,n);t="";var U=!1;for(this._matches(this.tags.COMMENT_START)&&(U=!0,t=this._extractString(this.tags.COMMENT_START));null!==(F=this._extractUntil($));){if(t+=F,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!U){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=t.length){var q=t.slice(-this.colno);if(/^\s+$/.test(q)&&!(t=t.slice(0,-this.colno)).length)return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!U)throw new Error("unexpected end of comment");t+=this._extractString(this.tags.COMMENT_END);break}t+=this.current(),this.forward()}if(null===F&&U)throw new Error("expected end of comment, got end of file");return N(U?p:u,t,e,n)},e._parseString=function(t){this.forward();for(var e="";!this.isFinished()&&this.current()!==t;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":e+="\n";break;case"t":e+="\t";break;case"r":e+="\r";break;default:e+=this.current()}this.forward()}else e+=n,this.forward()}return this.forward(),e},e._matches=function(t){return this.index+t.length>this.len?null:this.str.slice(this.index,this.index+t.length)===t},e._extractString=function(t){return this._matches(t)?(this.forwardN(t.length),t):null},e._extractUntil=function(t){return this._extractMatching(!0,t||"")},e._extract=function(t){return this._extractMatching(!1,t)},e._extractMatching=function(t,e){if(this.isFinished())return null;var n=e.indexOf(this.current());if(t&&-1===n||!t&&-1!==n){var r=this.current();this.forward();for(var i=e.indexOf(this.current());(t&&-1===i||!t&&-1!==i)&&!this.isFinished();)r+=this.current(),this.forward(),i=e.indexOf(this.current());return r}return""},e._extractRegex=function(t){var e=this.currentStr().match(t);return e?(this.forwardN(e[0].length),e):null},e.isFinished=function(){return this.index>=this.len},e.forwardN=function(t){for(var e=0;e<t;e++)this.forward()},e.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},e.backN=function(t){for(var e=0;e<t;e++)this.back()},e.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var t=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===t?this.index:this.index-t}else this.colno--},e.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},e.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},e.previous=function(){return this.str.charAt(this.index-1)},t}();t.exports={lex:function(t,e){return new C(t,e)},TOKEN_STRING:a,TOKEN_WHITESPACE:s,TOKEN_DATA:u,TOKEN_BLOCK_START:c,TOKEN_BLOCK_END:l,TOKEN_VARIABLE_START:f,TOKEN_VARIABLE_END:h,TOKEN_COMMENT:p,TOKEN_LEFT_PAREN:d,TOKEN_RIGHT_PAREN:y,TOKEN_LEFT_BRACKET:m,TOKEN_RIGHT_BRACKET:g,TOKEN_LEFT_CURLY:v,TOKEN_RIGHT_CURLY:b,TOKEN_OPERATOR:_,TOKEN_COMMA:w,TOKEN_COLON:x,TOKEN_TILDE:k,TOKEN_PIPE:O,TOKEN_INT:"int",TOKEN_FLOAT:S,TOKEN_BOOLEAN:E,TOKEN_NONE:A,TOKEN_SYMBOL:T,TOKEN_SPECIAL:"special",TOKEN_REGEX:M}},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=n(6),o=n(19).PrecompiledLoader,a=function(t){var e,n;function i(e,n){var r;return(r=t.call(this)||this).baseURL=e||".",n=n||{},r.useCache=!!n.useCache,r.async=!!n.async,r}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var o=i.prototype;return o.resolve=function(t,e){throw new Error("relative templates not support in the browser yet")},o.getSource=function(t,e){var n,r=this,i=this.useCache;return this.fetch(this.baseURL+"/"+t,(function(o,a){if(o)if(e)e(o.content);else{if(404!==o.status)throw o.content;n=null}else n={src:a,path:t,noCache:!i},r.emit("load",t,n),e&&e(null,n)})),n},o.fetch=function(t,e){if("undefined"==typeof window)throw new Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,r=!0;n.onreadystatechange=function(){4===n.readyState&&r&&(r=!1,0===n.status||200===n.status?e(null,n.responseText):e({status:n.status,content:n.responseText}))},t+=(-1===t.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",t,this.async),n.send()},i}(i);t.exports={WebLoader:a,PrecompiledLoader:o}},function(t,e,n){"use strict";var r,i=n(0),o=n(7),a=o.Environment,s=o.Template,u=n(6),c=n(10),l=n(23),f=n(5),h=n(8),p=n(9),d=n(2),y=n(3),m=n(25);function g(t,e){var n;return e=e||{},i.isObject(t)&&(e=t,t=null),c.FileSystemLoader?n=new c.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):c.WebLoader&&(n=new c.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),r=new a(n,e),e&&e.express&&r.express(e.express),r}t.exports={Environment:a,Template:s,Loader:u,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:f,parser:h,lexer:p,runtime:d,lib:i,nodes:y,installJinjaCompat:m,configure:g,reset:function(){r=void 0},compile:function(t,e,n,i){return r||g(),new s(t,e,n,i)},render:function(t,e,n){return r||g(),r.render(t,e,n)},renderString:function(t,e,n){return r||g(),r.renderString(t,e,n)},precompile:l?l.precompile:void 0,precompileString:l?l.precompileString:void 0}},function(t,e,n){"use strict";var r=n(13),i=[],o=[],a=r.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function s(t){var e;(e=i.length?i.pop():new u).task=t,r(e)}function u(){this.task=null}t.exports=s,u.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(o.push(t),a())}finally{this.task=null,i[i.length]=this}}},function(t,e,n){"use strict";(function(e){function n(t){i.length||r(),i[i.length]=t}t.exports=n;var r,i=[],o=0;function a(){for(;o<i.length;){var t=o;if(o+=1,i[t].call(),o>1024){for(var e=0,n=i.length-o;e<n;e++)i[e]=i[e+o];i.length-=o,o=0}}i.length=0,o=0}var s,u,c,l=void 0!==e?e:self,f=l.MutationObserver||l.WebKitMutationObserver;function h(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof f?(s=1,u=new f(a),c=document.createTextNode(""),u.observe(c,{characterData:!0}),r=function(){s=-s,c.data=s}):r=h(a),n.requestFlush=r,n.makeRequestCallFromTimer=h}).call(e,n(14))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;!function(n){"use strict";var i=function(){var t=Array.prototype.slice.call(arguments);"function"==typeof t[0]&&t[0].apply(null,t.splice(1))},o=function(t){"function"==typeof setImmediate?setImmediate(t):"undefined"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=function(t,e,n){var r=n?o:i;if(e=e||function(){},!a(t)){var s=new Error("First argument to waterfall must be an array of functions");return e(s)}if(!t.length)return e();var u=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=t.next();o?i.push(u(o)):i.push(e),r((function(){t.apply(null,i)}))}}};u(function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)}(t))()};void 0===(r=function(){return s}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(t,e){return new Promise((function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var i,o,a,s;if(c(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):m(i,i.length)}function y(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){r.once&&t.removeEventListener(e,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return f(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return f(this,t,e,!0)},s.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(c(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){"use strict";var r=n(3),i=n(0),o=0;function a(){return"hole_"+o++}function s(t,e){for(var n=null,r=0;r<t.length;r++){var i=e(t[r]);i!==t[r]&&(n||(n=t.slice()),n[r]=i)}return n||t}function u(t,e,n){if(!(t instanceof r.Node))return t;if(!n){var i=e(t);if(i&&i!==t)return i}if(t instanceof r.NodeList){var o=s(t.children,(function(t){return u(t,e,n)}));o!==t.children&&(t=new r[t.typename](t.lineno,t.colno,o))}else if(t instanceof r.CallExtension){var a=u(t.args,e,n),c=s(t.contentArgs,(function(t){return u(t,e,n)}));a===t.args&&c===t.contentArgs||(t=new r[t.typename](t.extName,t.prop,a,c))}else{var l=t.fields.map((function(e){return t[e]})),f=s(l,(function(t){return u(t,e,n)}));f!==l&&(t=new r[t.typename](t.lineno,t.colno),f.forEach((function(e,n){t[t.fields[n]]=e})))}return n&&e(t)||t}function c(t,e){return u(t,e,!0)}function l(t,e,n){var o=[],s=c(n?t[n]:t,(function(t){var n;return t instanceof r.Block?t:((t instanceof r.Filter&&-1!==i.indexOf(e,t.name.value)||t instanceof r.CallExtensionAsync)&&(n=new r.Symbol(t.lineno,t.colno,a()),o.push(new r.FilterAsync(t.lineno,t.colno,t.name,t.args,n))),n)}));return n?t[n]=s:t=s,o.length?(o.push(t),new r.NodeList(t.lineno,t.colno,o)):t}t.exports={transform:function(t,e){return function(t,e){return function(t){return c(t,(function(t){if(t instanceof r.If||t instanceof r.For){var e=!1;if(u(t,(function(t){if(t instanceof r.FilterAsync||t instanceof r.IfAsync||t instanceof r.AsyncEach||t instanceof r.AsyncAll||t instanceof r.CallExtensionAsync)return e=!0,t})),e){if(t instanceof r.If)return new r.IfAsync(t.lineno,t.colno,t.cond,t.body,t.else_);if(t instanceof r.For&&!(t instanceof r.AsyncAll))return new r.AsyncEach(t.lineno,t.colno,t.arr,t.name,t.body,t.else_)}}}))}(function(t){return u(t,(function(t){if(t instanceof r.Block){var e=!1,n=a();t.body=u(t.body,(function(t){if(t instanceof r.FunCall&&"super"===t.name.value)return e=!0,new r.Symbol(t.lineno,t.colno,n)})),e&&t.body.children.unshift(new r.Super(0,0,t.name,new r.Symbol(0,0,n)))}}))}(function(t,e){return c(t,(function(t){return t instanceof r.Output?l(t,e):t instanceof r.Set?l(t,e,"value"):t instanceof r.For?l(t,e,"arr"):t instanceof r.If?l(t,e,"cond"):t instanceof r.CallExtension?l(t,e,"args"):void 0}))}(t,e)))}(t,e||[])}}},function(t,e,n){"use strict";var r=n(0),i=n(2);function o(t,e){return null==t||!1===t?e:t}function a(t){return t!=t}function s(t){var e=(t=o(t,"")).toLowerCase();return i.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))}function u(t){if(r.isString(t))return t.split("");if(r.isObject(t))return r._entries(t||{}).map((function(t){return{key:t[0],value:t[1]}}));if(r.isArray(t))return t;throw new r.TemplateError("list filter: type not iterable")}function c(t){return function(e,n,i){void 0===n&&(n="truthy");var o=this,a=o.env.getTest(n);return r.toArray(e).filter((function(e){return a.call(o,e,i)===t}))}}function l(t){return i.copySafeness(t,t.replace(/^\s*|\s*$/g,""))}(e=t.exports={}).abs=Math.abs,e.batch=function(t,e,n){var r,i=[],o=[];for(r=0;r<t.length;r++)r%e==0&&o.length&&(i.push(o),o=[]),o.push(t[r]);if(o.length){if(n)for(r=o.length;r<e;r++)o.push(n);i.push(o)}return i},e.capitalize=s,e.center=function(t,e){if(e=e||80,(t=o(t,"")).length>=e)return t;var n=e-t.length,a=r.repeat(" ",n/2-n%2),s=r.repeat(" ",n/2);return i.copySafeness(t,a+t+s)},e.default=function(t,e,n){return n?t||e:void 0!==t?t:e},e.dictsort=function(t,e,n){if(!r.isObject(t))throw new r.TemplateError("dictsort filter: val must be an object");var i,o=[];for(var a in t)o.push([a,t[a]]);if(void 0===n||"key"===n)i=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");i=1}return o.sort((function(t,n){var o=t[i],a=n[i];return e||(r.isString(o)&&(o=o.toUpperCase()),r.isString(a)&&(a=a.toUpperCase())),o>a?1:o===a?0:-1})),o},e.dump=function(t,e){return JSON.stringify(t,null,e)},e.escape=function(t){return t instanceof i.SafeString?t:(t=null==t?"":t,i.markSafe(r.escape(t.toString())))},e.safe=function(t){return t instanceof i.SafeString?t:(t=null==t?"":t,i.markSafe(t.toString()))},e.first=function(t){return t[0]},e.forceescape=function(t){return t=null==t?"":t,i.markSafe(r.escape(t.toString()))},e.groupby=function(t,e){return r.groupBy(t,e,this.env.opts.throwOnUndefined)},e.indent=function(t,e,n){if(""===(t=o(t,"")))return"";e=e||4;var a=t.split("\n"),s=r.repeat(" ",e),u=a.map((function(t,e){return 0!==e||n?""+s+t:t})).join("\n");return i.copySafeness(t,u)},e.join=function(t,e,n){return e=e||"",n&&(t=r.map(t,(function(t){return t[n]}))),t.join(e)},e.last=function(t){return t[t.length-1]},e.length=function(t){var e=o(t,"");return void 0!==e?"function"==typeof Map&&e instanceof Map||"function"==typeof Set&&e instanceof Set?e.size:!r.isObject(e)||e instanceof i.SafeString?e.length:r.keys(e).length:0},e.list=u,e.lower=function(t){return(t=o(t,"")).toLowerCase()},e.nl2br=function(t){return null==t?"":i.copySafeness(t,t.replace(/\r\n|\n/g,"<br />\n"))},e.random=function(t){return t[Math.floor(Math.random()*t.length)]},e.reject=c(!1),e.rejectattr=function(t,e){return t.filter((function(t){return!t[e]}))},e.select=c(!0),e.selectattr=function(t,e){return t.filter((function(t){return!!t[e]}))},e.replace=function(t,e,n,r){var o=t;if(e instanceof RegExp)return t.replace(e,n);void 0===r&&(r=-1);var a="";if("number"==typeof e)e=""+e;else if("string"!=typeof e)return t;if("number"==typeof t&&(t=""+t),"string"!=typeof t&&!(t instanceof i.SafeString))return t;if(""===e)return a=n+t.split("").join(n)+n,i.copySafeness(t,a);var s=t.indexOf(e);if(0===r||-1===s)return t;for(var u=0,c=0;s>-1&&(-1===r||c<r);)a+=t.substring(u,s)+n,u=s+e.length,c++,s=t.indexOf(e,u);return u<t.length&&(a+=t.substring(u)),i.copySafeness(o,a)},e.reverse=function(t){var e;return(e=r.isString(t)?u(t):r.map(t,(function(t){return t}))).reverse(),r.isString(t)?i.copySafeness(t,e.join("")):e},e.round=function(t,e,n){e=e||0;var r=Math.pow(10,e);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(t*r)/r},e.slice=function(t,e,n){for(var r=Math.floor(t.length/e),i=t.length%e,o=[],a=0,s=0;s<e;s++){var u=a+s*r;s<i&&a++;var c=a+(s+1)*r,l=t.slice(u,c);n&&s>=i&&l.push(n),o.push(l)}return o},e.sum=function(t,e,n){return void 0===n&&(n=0),e&&(t=r.map(t,(function(t){return t[e]}))),n+t.reduce((function(t,e){return t+e}),0)},e.sort=i.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(t,e,n,i){var o=this,a=r.map(t,(function(t){return t})),s=r.getAttrGetter(i);return a.sort((function(t,a){var u=i?s(t):t,c=i?s(a):a;if(o.env.opts.throwOnUndefined&&i&&(void 0===u||void 0===c))throw new TypeError('sort: attribute "'+i+'" resolved to undefined');return!n&&r.isString(u)&&r.isString(c)&&(u=u.toLowerCase(),c=c.toLowerCase()),u<c?e?1:-1:u>c?e?-1:1:0})),a})),e.string=function(t){return i.copySafeness(t,t)},e.striptags=function(t,e){var n,r=l((t=o(t,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,""));return n=e?r.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):r.replace(/\s+/gi," "),i.copySafeness(t,n)},e.title=function(t){var e=(t=o(t,"")).split(" ").map((function(t){return s(t)}));return i.copySafeness(t,e.join(" "))},e.trim=l,e.truncate=function(t,e,n,r){var a=t;if(e=e||255,(t=o(t,"")).length<=e)return t;if(n)t=t.substring(0,e);else{var s=t.lastIndexOf(" ",e);-1===s&&(s=e),t=t.substring(0,s)}return t+=null!=r?r:"...",i.copySafeness(a,t)},e.upper=function(t){return(t=o(t,"")).toUpperCase()},e.urlencode=function(t){var e=encodeURIComponent;return r.isString(t)?e(t):(r.isArray(t)?t:r._entries(t)).map((function(t){var n=t[0],r=t[1];return e(n)+"="+e(r)})).join("&")};var f=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,h=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,p=/^https?:\/\/.*$/,d=/^www\./,y=/\.(?:org|net|com)(?:\:|\/|$)/;e.urlize=function(t,e,n){a(e)&&(e=1/0);var r=!0===n?' rel="nofollow"':"";return t.split(/(\s+)/).filter((function(t){return t&&t.length})).map((function(t){var n=t.match(f),i=n?n[1]:t,o=i.substr(0,e);return p.test(i)?'<a href="'+i+'"'+r+">"+o+"</a>":d.test(i)?'<a href="http://'+i+'"'+r+">"+o+"</a>":h.test(i)?'<a href="mailto:'+i+'">'+i+"</a>":y.test(i)?'<a href="http://'+i+'"'+r+">"+o+"</a>":t})).join("")},e.wordcount=function(t){var e=(t=o(t,""))?t.match(/\w+/g):null;return e?e.length:null},e.float=function(t,e){var n=parseFloat(t);return a(n)?e:n};var m=i.makeMacro(["value","default","base"],[],(function(t,e,n){void 0===n&&(n=10);var r=parseInt(t,n);return a(r)?e:r}));e.int=m,e.d=e.default,e.e=e.escape},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var i=function(t){var e,n;function i(e){var n;return(n=t.call(this)||this).precompiled=e||{},n}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:"code",obj:this.precompiled[t]},path:t}:null},i}(n(6));t.exports={PrecompiledLoader:i}},function(t,e,n){"use strict";var r=n(2).SafeString;e.callable=function(t){return"function"==typeof t},e.defined=function(t){return void 0!==t},e.divisibleby=function(t,e){return t%e==0},e.escaped=function(t){return t instanceof r},e.equalto=function(t,e){return t===e},e.eq=e.equalto,e.sameas=e.equalto,e.even=function(t){return t%2==0},e.falsy=function(t){return!t},e.ge=function(t,e){return t>=e},e.greaterthan=function(t,e){return t>e},e.gt=e.greaterthan,e.le=function(t,e){return t<=e},e.lessthan=function(t,e){return t<e},e.lt=e.lessthan,e.lower=function(t){return t.toLowerCase()===t},e.ne=function(t,e){return t!==e},e.null=function(t){return null===t},e.number=function(t){return"number"==typeof t},e.odd=function(t){return t%2==1},e.string=function(t){return"string"==typeof t},e.truthy=function(t){return!!t},e.undefined=function(t){return void 0===t},e.upper=function(t){return t.toUpperCase()===t},e.iterable=function(t){return"undefined"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||"string"==typeof t},e.mapping=function(t){var e=null!=t&&"object"==typeof t&&!Array.isArray(t);return Set?e&&!(t instanceof Set):e}},function(t,e,n){"use strict";t.exports=function(){return{range:function(t,e,n){void 0===e?(e=t,t=0,n=1):n||(n=1);var r=[];if(n>0)for(var i=t;i<e;i+=n)r.push(i);else for(var o=t;o>e;o+=n)r.push(o);return r},cycler:function(){return t=Array.prototype.slice.call(arguments),e=-1,{current:null,reset:function(){e=-1,this.current=null},next:function(){return++e>=t.length&&(e=0),this.current=t[e],this.current}};var t,e},joiner:function(t){return function(t){t=t||",";var e=!0;return function(){var n=e?"":t;return e=!1,n}}(t)}}}},function(t,e,n){var r=n(4);t.exports=function(t,e){function n(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=r.extname(t),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(e,n){t.render(this.name,e,n)},e.set("view",n),e.set("nunjucksEnv",t),t}},function(t,e,n){"use strict";var r=n(4),i=n(4),o=n(0)._prettifyError,a=n(5),s=n(7).Environment,u=n(24);function c(t,e){return!!Array.isArray(e)&&e.some((function(e){return t.match(e)}))}function l(t,e){(e=e||{}).isString=!0;var n=e.env||new s([]),r=e.wrapper||u;if(!e.name)throw new Error('the "name" option is required when compiling a string');return r([f(t,e.name,n)],e)}function f(t,e,n){var r,i=(n=n||new s([])).asyncFilters,u=n.extensionsList;e=e.replace(/\\/g,"/");try{r=a.compile(t,i,u,e,n.opts)}catch(t){throw o(e,!1,t)}return{name:e,template:r}}t.exports={precompile:function(t,e){var n=(e=e||{}).env||new s([]),o=e.wrapper||u;if(e.isString)return l(t,e);var a=r.existsSync(t)&&r.statSync(t),h=[],p=[];if(a.isFile())h.push(f(r.readFileSync(t,"utf-8"),e.name||t,n));else if(a.isDirectory()){!function n(o){r.readdirSync(o).forEach((function(a){var s=i.join(o,a),u=s.substr(i.join(t,"/").length),l=r.statSync(s);l&&l.isDirectory()?c(u+="/",e.exclude)||n(s):c(u,e.include)&&p.push(s)}))}(t);for(var d=0;d<p.length;d++){var y=p[d].replace(i.join(t,"/"),"");try{h.push(f(r.readFileSync(p[d],"utf-8"),y,n))}catch(t){if(!e.force)throw t;console.error(t)}}}return o(h,e)},precompileString:l}},function(t,e,n){"use strict";t.exports=function(t,e){var n="";e=e||{};for(var r=0;r<t.length;r++){var i=JSON.stringify(t[r].name);n+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+i+"] = (function() {\n"+t[r].template+"\n})();\n",e.asFunction&&(n+="return function(ctx, cb) { return nunjucks.render("+i+", ctx, cb); }\n"),n+="})();\n"}return n}},function(t,e,n){t.exports=function(){"use strict";var t,e,n=this.runtime,r=this.lib,i=this.compiler.Compiler,o=this.parser.Parser,a=this.nodes,s=this.lexer,u=n.contextOrFrameLookup,c=n.memberLookup;function l(t){return{index:t.index,lineno:t.lineno,colno:t.colno}}if(i&&(t=i.prototype.assertType),o&&(e=o.prototype.parseAggregate),n.contextOrFrameLookup=function(t,e,n){var r=u.apply(this,arguments);if(void 0!==r)return r;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}},a&&i&&o){var f=a.Node.extend("Slice",{fields:["start","stop","step"],init:function(t,e,n,r,i){n=n||new a.Literal(t,e,null),r=r||new a.Literal(t,e,null),i=i||new a.Literal(t,e,1),this.parent(t,e,n,r,i)}});i.prototype.assertType=function(e){e instanceof f||t.apply(this,arguments)},i.prototype.compileSlice=function(t,e){this._emit("("),this._compileExpression(t.start,e),this._emit("),("),this._compileExpression(t.stop,e),this._emit("),("),this._compileExpression(t.step,e),this._emit(")")},o.prototype.parseAggregate=function(){var t=this,n=l(this.tokens);n.colno--,n.index--;try{return e.apply(this)}catch(e){var i=l(this.tokens),o=function(){return r._assign(t.tokens,i),e};r._assign(this.tokens,n),this.peeked=!1;var u=this.peekToken();if(u.type!==s.TOKEN_LEFT_BRACKET)throw o();this.nextToken();for(var c=new f(u.lineno,u.colno),h=!1,p=0;p<=c.fields.length&&!this.skip(s.TOKEN_RIGHT_BRACKET);p++){if(p===c.fields.length){if(!h)break;this.fail("parseSlice: too many slice components",u.lineno,u.colno)}this.skip(s.TOKEN_COLON)?h=!0:(c[c.fields[p]]=this.parseExpression(),h=this.skip(s.TOKEN_COLON)||h)}if(!h)throw o();return new a.Array(u.lineno,u.colno,[c])}}}function h(t,e,r,i){t=t||[],null===e&&(e=i<0?t.length-1:0),null===r?r=i<0?-1:t.length:r<0&&(r+=t.length),e<0&&(e+=t.length);for(var o=[],a=e;!(a<0||a>t.length||i>0&&a>=r||i<0&&a<=r);a+=i)o.push(n.memberLookup(t,a));return o}function p(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var d={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw new Error("KeyError");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw new Error("ValueError")},count:function(t){for(var e=0,n=0;n<this.length;n++)this[n]===t&&e++;return e},index:function(t){var e;if(-1===(e=this.indexOf(t)))throw new Error("ValueError");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},y={items:function(){return r._entries(this)},values:function(){return r._values(this)},keys:function(){return r.keys(this)},get:function(t,e){var n=this[t];return void 0===n&&(n=e),n},has_key:function(t){return p(this,t)},pop:function(t,e){var n=this[t];if(void 0===n&&void 0!==e)n=e;else{if(void 0===n)throw new Error("KeyError");delete this[t]}return n},popitem:function(){var t=r.keys(this);if(!t.length)throw new Error("KeyError");var e=t[0],n=this[e];return delete this[e],[e,n]},setdefault:function(t,e){return void 0===e&&(e=null),t in this||(this[t]=e),this[t]},update:function(t){return r._assign(this,t),null}};return y.iteritems=y.items,y.itervalues=y.values,y.iterkeys=y.keys,n.memberLookup=function(t,e,n){return 4===arguments.length?h.apply(this,arguments):(t=t||{},r.isArray(t)&&p(d,e)?d[e].bind(t):r.isObject(t)&&p(y,e)?y[e].bind(t):c.apply(this,arguments))},function(){n.contextOrFrameLookup=u,n.memberLookup=c,i&&(i.prototype.assertType=t),o&&(o.prototype.parseAggregate=e)}}}])},t.exports=e()}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";r.r(i),r.d(i,{Component:()=>_,ComponentAttribute:()=>a,ComponentAttributeDefinition:()=>T,ComponentDefinition:()=>x,ComponentDrawOption:()=>h,ComponentLink:()=>I,ComponentLinkDefinition:()=>R,ComponentRenderer:()=>PT,DefaultConfiguration:()=>WM,DefaultData:()=>UM,DefaultDrawer:()=>oM,DefaultMetadata:()=>cM,DefaultParser:()=>pM,DefaultPlugin:()=>QM,DefaultRender:()=>gM,FileInformation:()=>l,FileInput:()=>z,LinkRenderer:()=>RT,ParseError:()=>OM,Tag:()=>tN,Variable:()=>sN});var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}r.r(t),r.d(t,{Adder:()=>gt,Delaunay:()=>Ru,FormatSpecifier:()=>ef,InternMap:()=>_t,InternSet:()=>wt,Node:()=>Em,Path:()=>Za,Voronoi:()=>Cu,ZoomTransform:()=>LE,active:()=>ia,arc:()=>vO,area:()=>EO,areaRadial:()=>IO,ascending:()=>V,autoType:()=>mc,axisBottom:()=>un,axisLeft:()=>cn,axisRight:()=>sn,axisTop:()=>an,bin:()=>ee,bisect:()=>tt,bisectCenter:()=>Z,bisectLeft:()=>Q,bisectRight:()=>X,bisector:()=>H,blob:()=>ol,blur:()=>et,blur2:()=>nt,blurImage:()=>rt,brush:()=>Pa,brushSelection:()=>Na,brushX:()=>Ca,brushY:()=>ja,buffer:()=>sl,chord:()=>za,chordDirected:()=>Ya,chordTranspose:()=>Va,cluster:()=>bm,color:()=>ti,contourDensity:()=>uu,contours:()=>tu,count:()=>ut,create:()=>Yk,creator:()=>yr,cross:()=>ht,csv:()=>hl,csvFormat:()=>rc,csvFormatBody:()=>ic,csvFormatRow:()=>ac,csvFormatRows:()=>oc,csvFormatValue:()=>sc,csvParse:()=>ec,csvParseRows:()=>nc,cubehelix:()=>zs,cumsum:()=>pt,curveBasis:()=>SS,curveBasisClosed:()=>AS,curveBasisOpen:()=>MS,curveBumpX:()=>FO,curveBumpY:()=>$O,curveBundle:()=>CS,curveCardinal:()=>LS,curveCardinalClosed:()=>DS,curveCardinalOpen:()=>BS,curveCatmullRom:()=>US,curveCatmullRomClosed:()=>KS,curveCatmullRomOpen:()=>VS,curveLinear:()=>xO,curveLinearClosed:()=>HS,curveMonotoneX:()=>eE,curveMonotoneY:()=>nE,curveNatural:()=>oE,curveStep:()=>sE,curveStepAfter:()=>cE,curveStepBefore:()=>uE,descending:()=>Y,deviation:()=>yt,difference:()=>Fe,disjoint:()=>$e,dispatch:()=>yn,drag:()=>zu,dragDisable:()=>Lr,dragEnable:()=>Ir,dsv:()=>fl,dsvFormat:()=>Zu,easeBack:()=>Zc,easeBackIn:()=>Xc,easeBackInOut:()=>Zc,easeBackOut:()=>Qc,easeBounce:()=>Wc,easeBounceIn:()=>Hc,easeBounceInOut:()=>Gc,easeBounceOut:()=>Wc,easeCircle:()=>Dc,easeCircleIn:()=>Lc,easeCircleInOut:()=>Dc,easeCircleOut:()=>Ic,easeCubic:()=>ta,easeCubicIn:()=>Qo,easeCubicInOut:()=>ta,easeCubicOut:()=>Zo,easeElastic:()=>nl,easeElasticIn:()=>el,easeElasticInOut:()=>rl,easeElasticOut:()=>nl,easeExp:()=>Pc,easeExpIn:()=>Cc,easeExpInOut:()=>Pc,easeExpOut:()=>jc,easeLinear:()=>vc,easePoly:()=>Oc,easePolyIn:()=>xc,easePolyInOut:()=>Oc,easePolyOut:()=>kc,easeQuad:()=>wc,easeQuadIn:()=>bc,easeQuadInOut:()=>wc,easeQuadOut:()=>_c,easeSin:()=>Mc,easeSinIn:()=>Ac,easeSinInOut:()=>Mc,easeSinOut:()=>Tc,every:()=>Pe,extent:()=>mt,fcumsum:()=>bt,filter:()=>Ie,flatGroup:()=>Nt,flatRollup:()=>Ct,forceCenter:()=>wl,forceCollide:()=>Ll,forceLink:()=>Rl,forceManyBody:()=>Yl,forceRadial:()=>Hl,forceSimulation:()=>Vl,forceX:()=>Wl,forceY:()=>Gl,format:()=>sf,formatDefaultLocale:()=>hf,formatLocale:()=>ff,formatPrefix:()=>uf,formatSpecifier:()=>tf,fsum:()=>vt,geoAlbers:()=>Ly,geoAlbersUsa:()=>Iy,geoArea:()=>mh,geoAzimuthalEqualArea:()=>Fy,geoAzimuthalEqualAreaRaw:()=>By,geoAzimuthalEquidistant:()=>Uy,geoAzimuthalEquidistantRaw:()=>$y,geoBounds:()=>Xh,geoCentroid:()=>cp,geoCircle:()=>_p,geoClipAntimeridian:()=>Cp,geoClipCircle:()=>jp,geoClipExtent:()=>$p,geoClipRectangle:()=>Fp,geoConicConformal:()=>Hy,geoConicConformalRaw:()=>Yy,geoConicEqualArea:()=>Py,geoConicEqualAreaRaw:()=>jy,geoConicEquidistant:()=>Xy,geoConicEquidistantRaw:()=>Jy,geoContains:()=>rd,geoDistance:()=>Wp,geoEqualEarth:()=>im,geoEqualEarthRaw:()=>rm,geoEquirectangular:()=>Gy,geoEquirectangularRaw:()=>Wy,geoGnomonic:()=>am,geoGnomonicRaw:()=>om,geoGraticule:()=>ad,geoGraticule10:()=>sd,geoIdentity:()=>sm,geoInterpolate:()=>ud,geoLength:()=>Vp,geoMercator:()=>Ky,geoMercatorRaw:()=>qy,geoNaturalEarth1:()=>cm,geoNaturalEarth1Raw:()=>um,geoOrthographic:()=>fm,geoOrthographicRaw:()=>lm,geoPath:()=>yy,geoProjection:()=>My,geoProjectionMutator:()=>Ny,geoRotation:()=>gp,geoStereographic:()=>pm,geoStereographicRaw:()=>hm,geoStream:()=>Yf,geoTransform:()=>my,geoTransverseMercator:()=>ym,geoTransverseMercatorRaw:()=>dm,gray:()=>Os,greatest:()=>ue,greatestIndex:()=>Se,group:()=>At,groupSort:()=>qt,groups:()=>Tt,hcl:()=>Ps,hierarchy:()=>wm,histogram:()=>ee,hsl:()=>pi,html:()=>bl,image:()=>dl,index:()=>Lt,indexes:()=>It,interpolate:()=>Fi,interpolateArray:()=>Ci,interpolateBasis:()=>bi,interpolateBasisClosed:()=>_i,interpolateBlues:()=>bk,interpolateBrBG:()=>Cx,interpolateBuGn:()=>Gx,interpolateBuPu:()=>Xx,interpolateCividis:()=>Nk,interpolateCool:()=>Pk,interpolateCubehelix:()=>$g,interpolateCubehelixDefault:()=>Ck,interpolateCubehelixLong:()=>Ug,interpolateDate:()=>Pi,interpolateDiscrete:()=>Ag,interpolateGnBu:()=>Zx,interpolateGreens:()=>wk,interpolateGreys:()=>kk,interpolateHcl:()=>Rg,interpolateHclLong:()=>Bg,interpolateHsl:()=>Pg,interpolateHslLong:()=>Lg,interpolateHue:()=>Tg,interpolateInferno:()=>zk,interpolateLab:()=>Ig,interpolateMagma:()=>Kk,interpolateNumber:()=>Li,interpolateNumberArray:()=>Mi,interpolateObject:()=>Ii,interpolateOrRd:()=>ek,interpolateOranges:()=>Mk,interpolatePRGn:()=>Px,interpolatePiYG:()=>Ix,interpolatePlasma:()=>Vk,interpolatePuBu:()=>ok,interpolatePuBuGn:()=>rk,interpolatePuOr:()=>Rx,interpolatePuRd:()=>sk,interpolatePurples:()=>Sk,interpolateRainbow:()=>Ik,interpolateRdBu:()=>Fx,interpolateRdGy:()=>Ux,interpolateRdPu:()=>ck,interpolateRdYlBu:()=>Kx,interpolateRdYlGn:()=>Vx,interpolateReds:()=>Ak,interpolateRgb:()=>Si,interpolateRgbBasis:()=>Ai,interpolateRgbBasisClosed:()=>Ti,interpolateRound:()=>Mg,interpolateSinebow:()=>Fk,interpolateSpectral:()=>Hx,interpolateString:()=>Bi,interpolateTransformCss:()=>Ao,interpolateTransformSvg:()=>To,interpolateTurbo:()=>$k,interpolateViridis:()=>qk,interpolateWarm:()=>jk,interpolateYlGn:()=>pk,interpolateYlGnBu:()=>fk,interpolateYlOrBr:()=>yk,interpolateYlOrRd:()=>gk,interpolateZoom:()=>Cg,interrupt:()=>wo,intersection:()=>Ue,interval:()=>CE,isoFormat:()=>TE,isoParse:()=>NE,json:()=>ml,lab:()=>Ss,lch:()=>js,least:()=>ke,leastIndex:()=>Oe,line:()=>SO,lineRadial:()=>LO,link:()=>zO,linkHorizontal:()=>VO,linkRadial:()=>HO,linkVertical:()=>YO,local:()=>Wk,map:()=>De,matcher:()=>wn,max:()=>ne,maxIndex:()=>re,mean:()=>de,median:()=>ye,medianIndex:()=>me,merge:()=>ge,min:()=>ie,minIndex:()=>oe,mode:()=>ve,namespace:()=>Dn,namespaces:()=>In,nice:()=>Zt,now:()=>Zi,pack:()=>Xm,packEnclose:()=>Im,packSiblings:()=>Gm,pairs:()=>be,partition:()=>rg,path:()=>ts,pathRound:()=>es,permute:()=>Bt,pie:()=>MO,piecewise:()=>qg,pointRadial:()=>DO,pointer:()=>Ui,pointers:()=>Jk,polygonArea:()=>zg,polygonCentroid:()=>Vg,polygonContains:()=>Jg,polygonHull:()=>Gg,polygonLength:()=>Xg,precisionFixed:()=>pf,precisionPrefix:()=>df,precisionRound:()=>yf,quadtree:()=>El,quantile:()=>ce,quantileIndex:()=>fe,quantileSorted:()=>le,quantize:()=>Kg,quickselect:()=>ae,radialArea:()=>IO,radialLine:()=>LO,randomBates:()=>iv,randomBernoulli:()=>sv,randomBeta:()=>lv,randomBinomial:()=>fv,randomCauchy:()=>pv,randomExponential:()=>ov,randomGamma:()=>cv,randomGeometric:()=>uv,randomInt:()=>tv,randomIrwinHall:()=>rv,randomLcg:()=>bv,randomLogNormal:()=>nv,randomLogistic:()=>dv,randomNormal:()=>ev,randomPareto:()=>av,randomPoisson:()=>yv,randomUniform:()=>Zg,randomWeibull:()=>hv,range:()=>we,rank:()=>xe,reduce:()=>Re,reverse:()=>Be,rgb:()=>ii,ribbon:()=>hs,ribbonArrow:()=>ps,rollup:()=>jt,rollups:()=>Pt,scaleBand:()=>Ov,scaleDiverging:()=>px,scaleDivergingLog:()=>dx,scaleDivergingPow:()=>mx,scaleDivergingSqrt:()=>gx,scaleDivergingSymlog:()=>yx,scaleIdentity:()=>Fv,scaleImplicit:()=>xv,scaleLinear:()=>Bv,scaleLog:()=>Wv,scaleOrdinal:()=>kv,scalePoint:()=>Ev,scalePow:()=>rb,scaleQuantile:()=>sb,scaleQuantize:()=>ub,scaleRadial:()=>ab,scaleSequential:()=>ax,scaleSequentialLog:()=>sx,scaleSequentialPow:()=>cx,scaleSequentialQuantile:()=>fx,scaleSequentialSqrt:()=>lx,scaleSequentialSymlog:()=>ux,scaleSqrt:()=>ib,scaleSymlog:()=>Qv,scaleThreshold:()=>cb,scaleTime:()=>nx,scaleUtc:()=>rx,scan:()=>Ee,schemeAccent:()=>_x,schemeBlues:()=>vk,schemeBrBG:()=>Nx,schemeBuGn:()=>Wx,schemeBuPu:()=>Jx,schemeCategory10:()=>bx,schemeDark2:()=>wx,schemeGnBu:()=>Qx,schemeGreens:()=>_k,schemeGreys:()=>xk,schemeOrRd:()=>tk,schemeOranges:()=>Tk,schemePRGn:()=>jx,schemePaired:()=>xx,schemePastel1:()=>kx,schemePastel2:()=>Ox,schemePiYG:()=>Lx,schemePuBu:()=>ik,schemePuBuGn:()=>nk,schemePuOr:()=>Dx,schemePuRd:()=>ak,schemePurples:()=>Ok,schemeRdBu:()=>Bx,schemeRdGy:()=>$x,schemeRdPu:()=>uk,schemeRdYlBu:()=>qx,schemeRdYlGn:()=>zx,schemeReds:()=>Ek,schemeSet1:()=>Sx,schemeSet2:()=>Ex,schemeSet3:()=>Ax,schemeSpectral:()=>Yx,schemeTableau10:()=>Tx,schemeYlGn:()=>hk,schemeYlGnBu:()=>lk,schemeYlOrBr:()=>dk,schemeYlOrRd:()=>mk,select:()=>Mr,selectAll:()=>Xk,selection:()=>Tr,selector:()=>gn,selectorAll:()=>_n,shuffle:()=>Ae,shuffler:()=>Te,some:()=>Le,sort:()=>Ft,stack:()=>dE,stackOffsetDiverging:()=>mE,stackOffsetExpand:()=>yE,stackOffsetNone:()=>lE,stackOffsetSilhouette:()=>gE,stackOffsetWiggle:()=>vE,stackOrderAppearance:()=>bE,stackOrderAscending:()=>wE,stackOrderDescending:()=>kE,stackOrderInsideOut:()=>OE,stackOrderNone:()=>fE,stackOrderReverse:()=>SE,stratify:()=>cg,style:()=>Hn,subset:()=>Ve,sum:()=>Me,superset:()=>Ke,svg:()=>_l,symbol:()=>wS,symbolAsterisk:()=>GO,symbolCircle:()=>JO,symbolCross:()=>XO,symbolDiamond:()=>tS,symbolDiamond2:()=>eS,symbolPlus:()=>nS,symbolSquare:()=>rS,symbolSquare2:()=>iS,symbolStar:()=>uS,symbolTimes:()=>vS,symbolTriangle:()=>lS,symbolTriangle2:()=>hS,symbolWye:()=>gS,symbolX:()=>vS,symbols:()=>bS,symbolsFill:()=>bS,symbolsStroke:()=>_S,text:()=>cl,thresholdFreedmanDiaconis:()=>he,thresholdScott:()=>pe,thresholdSturges:()=>te,tickFormat:()=>Dv,tickIncrement:()=>Xt,tickStep:()=>Qt,ticks:()=>Jt,timeDay:()=>Cb,timeDays:()=>jb,timeFormat:()=>C_,timeFormatDefaultLocale:()=>Qw,timeFormatLocale:()=>M_,timeFriday:()=>Kb,timeFridays:()=>Jb,timeHour:()=>Ab,timeHours:()=>Tb,timeInterval:()=>vb,timeMillisecond:()=>bb,timeMilliseconds:()=>_b,timeMinute:()=>kb,timeMinutes:()=>Ob,timeMonday:()=>Fb,timeMondays:()=>Yb,timeMonth:()=>p_,timeMonths:()=>d_,timeParse:()=>j_,timeSaturday:()=>zb,timeSaturdays:()=>Xb,timeSecond:()=>wb,timeSeconds:()=>xb,timeSunday:()=>Bb,timeSundays:()=>Vb,timeThursday:()=>qb,timeThursdays:()=>Gb,timeTickInterval:()=>S_,timeTicks:()=>O_,timeTuesday:()=>$b,timeTuesdays:()=>Hb,timeWednesday:()=>Ub,timeWednesdays:()=>Wb,timeWeek:()=>Bb,timeWeeks:()=>Vb,timeYear:()=>g_,timeYears:()=>v_,timeout:()=>so,timer:()=>no,timerFlush:()=>ro,transition:()=>Go,transpose:()=>Ne,tree:()=>vg,treemap:()=>kg,treemapBinary:()=>Og,treemapDice:()=>ng,treemapResquarify:()=>Eg,treemapSlice:()=>bg,treemapSliceDice:()=>Sg,treemapSquarify:()=>xg,tsv:()=>pl,tsvFormat:()=>fc,tsvFormatBody:()=>hc,tsvFormatRow:()=>dc,tsvFormatRows:()=>pc,tsvFormatValue:()=>yc,tsvParse:()=>cc,tsvParseRows:()=>lc,union:()=>Ye,unixDay:()=>Ib,unixDays:()=>Db,utcDay:()=>Pb,utcDays:()=>Lb,utcFormat:()=>P_,utcFriday:()=>i_,utcFridays:()=>f_,utcHour:()=>Mb,utcHours:()=>Nb,utcMillisecond:()=>bb,utcMilliseconds:()=>_b,utcMinute:()=>Sb,utcMinutes:()=>Eb,utcMonday:()=>t_,utcMondays:()=>s_,utcMonth:()=>y_,utcMonths:()=>m_,utcParse:()=>L_,utcSaturday:()=>o_,utcSaturdays:()=>h_,utcSecond:()=>wb,utcSeconds:()=>xb,utcSunday:()=>Zb,utcSundays:()=>a_,utcThursday:()=>r_,utcThursdays:()=>l_,utcTickInterval:()=>k_,utcTicks:()=>x_,utcTuesday:()=>e_,utcTuesdays:()=>u_,utcWednesday:()=>n_,utcWednesdays:()=>c_,utcWeek:()=>Zb,utcWeeks:()=>a_,utcYear:()=>b_,utcYears:()=>__,variance:()=>dt,window:()=>Kn,xml:()=>vl,zip:()=>je,zoom:()=>VE,zoomIdentity:()=>IE,zoomTransform:()=>DE});var o=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,value:null,type:null,definition:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.name,r=e.value,i=e.type,o=e.definition;this.name=n||null,this.value=null!=r?r:null,this.type=i||null,this.definition=o||null},r=[{key:"isVariable",get:function(){return!1}},{key:"hasError",value:function(){return null===this.definition?null===this.value||("array"===this.type.toLowerCase()?!Array.isArray(this.value):e(this.value)!==this.type.toLowerCase()):null!==this.value&&void 0!==this.value&&(this.__typeOfValueValidation()||this.__ruleValueValidation()||this.__ruleMinAndMaxValidation()||this.__ruleRegexValidation())}},{key:"__typeOfValueValidation",value:function(){var t=this.type.toLowerCase();return"Link"===this.definition.type?!Array.isArray(this.value)||this.value.some((function(t){return"string"!=typeof t})):"array"===t?!Array.isArray(this.value):e(this.value)!==t}},{key:"__ruleValueValidation",value:function(){var t=this;return this.definition.rules.values&&Array.isArray(this.value)?!this.value.every((function(e){return t.definition.rules.values.includes(e)})):this.definition.rules.values&&!this.definition.rules.values.includes(this.value)}},{key:"__ruleMinAndMaxValidation",value:function(){var t="number"==typeof this.value?this.value:this.value.length;return null!==this.definition.rules.min&&t<this.definition.rules.min||null!==this.definition.rules.max&&t>this.definition.rules.max}},{key:"__ruleRegexValidation",value:function(){return null!==this.definition.rules.regex&&!new RegExp(this.definition.rules.regex).test(this.value)}}],r&&function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();const a=o;function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var c=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.path;this.path=null!=n?n:null},(e=[{key:"fileName",get:function(){return this.path?this.path.replace(/^.*[\\/]/,""):null}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const l=c;var f=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:null,y:null,width:null,height:null,hide:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.x,r=e.y,i=e.width,o=e.height,a=e.hide;this.x=n||null,this.y=r||null,this.width=i||null,this.height=o||null,this.hide=a||!1}));const h=f;function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}function y(t,e,n){return e=g(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function v(t,e){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},v(t,e)}var b=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,externalId:null,name:null,definition:null,drawOption:null,attributes:[]};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=y(this,e,[n]);var r=n.id,i=n.externalId,o=n.name,a=n.definition,s=n.drawOption,u=n.attributes;return t.__class="Component",t.id=r||null,t.externalId=i||t.id,t.name=o||null,t.definition=a||null,t.drawOption=s||new h,t.attributes=u||[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v(t,e)}(e,t),n=e,r=[{key:"setExternalId",value:function(t){this.externalId=t}},{key:"getConfigurationKey",value:function(){return this.id}},{key:"setReferenceAttribute",value:function(t){var e=this.definition.definedAttributes.find((function(e){return e.containerRef===t.definition.type}));if(e){var n=this.attributes.filter((function(t){var n=t.definition;return(null==n?void 0:n.name)===e.name}));n.length>0?n.forEach((function(e){e.value=t.id})):this.attributes.push(this.createAttribute({name:e.name,value:t.id,type:"String",definition:e}))}}},{key:"__createNestedAttributes",value:function(t){var e=this,n=this.attributes;return t.slice().reverse().forEach((function(t){var r=n.find((function(e){return e.definition.name===t.name}));r||(r=e.createAttribute({name:t.name,definition:t,type:"Object",value:[]}),n.push(r)),n=r.value})),n}},{key:"createAttribute",value:function(t){return new a(t)}},{key:"removeAllReferenceAttributes",value:function(t){this.attributes=t?this.attributes.filter((function(e){return!("Reference"===e.definition.type&&e.definition.containerRef===t.definition.type&&e.value===t.id)})):this.attributes.filter((function(t){return"Reference"!==t.definition.type}))}},{key:"setLinkAttribute",value:function(t){var e=[],n=this.__getLinkAttribute(e,this.definition.definedAttributes,t),r=this.__createNestedAttributes(e),i=r.find((function(t){return t.definition.name===n.name}));i||(i=this.createAttribute({name:n.name,definition:n,type:"Array",value:[]}),r.push(i)),i.value.includes(t.target)||i.value.push(t.target)}},{key:"__getLinkAttribute",value:function(t,e,n){for(var r=0;r<e.length;r+=1){if("Object"===e[r].type){var i=this.__getLinkAttribute(t,e[r].definedAttributes,n);if(i)return t.push(e[r]),i}if("Link"===e[r].type&&e[r].name===n.definition.attributeRef)return e[r]}return null}},{key:"removeLinkAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.__removeLinkAttribute(this.attributes,t,e)}},{key:"__removeLinkAttribute",value:function(t,e,n){var r=this;t.forEach((function(t){var i;if("Object"===t.type&&r.__removeLinkAttribute(t.value,e,n),"Link"===(null===(i=t.definition)||void 0===i?void 0:i.type)&&(!n||t.name===n)){var o=t.value.findIndex((function(t){return t===e}));o>=0&&t.value.splice(o,1)}}))}},{key:"getAttributeByName",value:function(t){return this.__getAttributeByName(this.attributes,t)}},{key:"__getAttributeByName",value:function(t,e){for(var n=0;n<t.length;n+=1){if(t[n].name===e)return t[n];if("Object"===t[n].type){var r=this.__getAttributeByName(t[n].value,e);if(r)return r}}return null}},{key:"__setAttributesByField",value:function(t,e,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];e.forEach((function(e){"Object"===(null==e?void 0:e.type)&&r.__setAttributesByField.apply(r,[t,e.value,n].concat(o)),r.__compareAttributeField.apply(r,[e,n].concat(o))&&t.push(e)}))}},{key:"__compareAttributeField",value:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o;return"definitionType"===e?r.includes(null===(o=t.definition)||void 0===o?void 0:o.type):r.includes(t[e])}},{key:"getAttributesByType",value:function(){for(var t=[],e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.__setAttributesByField.apply(this,[t,this.attributes,"type"].concat(n)),t}},{key:"getContainerId",value:function(){var t=this.attributes.find((function(t){var e=t.definition;return e&&"Reference"===e.type}));return t?t.value:null}},{key:"hasError",value:function(){return this.checkRequiredAttributes()||this.checkAttributesErrors()}},{key:"checkRequiredAttributes",value:function(){var t=this;return this.definition.definedAttributes.filter((function(t){return t.required})).some((function(e){var n=t.getAttributeByName(e.name);return!(null!=n&&n.value)||("Array"===n.type||"Object"===n.type)&&0===n.value.length||"String"===n.type&&""===n.value.trim()}))}},{key:"checkAttributesErrors",value:function(){return this.attributes.some((function(t){return t.hasError()}))}},{key:"getDefinedAttributesByType",value:function(t){var e=[];return this.__setDefinedAttributesByType(e,this.definition.definedAttributes,t),e}},{key:"__setDefinedAttributesByType",value:function(t,e,n){var r=this;e.forEach((function(e){"Object"===e.type&&r.__setDefinedAttributesByType(t,e.definedAttributes,n),e.type===n&&t.push(e)}))}},{key:"canContain",value:function(t){return this.definition.isContainer&&this.definition.childrenTypes.includes(t)}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(l);const _=b;var w=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:null,icon:null,model:null,displayName:null,description:null,categories:[],tags:[],url:null,parentTypes:[],childrenTypes:[],definedAttributes:[],isContainer:!1,displayType:null,workflowDirection:null,linkModel:null,defaultWidth:0,defaultHeight:0,minWidth:0,minHeight:0,reservedWidth:0,reservedHeight:0,margin:10,gap:30};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.type,r=e.icon,i=e.model,o=e.displayName,a=e.description,s=e.categories,u=e.tags,c=e.url,l=e.parentTypes,f=e.childrenTypes,h=e.definedAttributes,p=e.isContainer,d=e.displayType,y=e.workflowDirection,m=e.linkModel,g=e.defaultWidth,v=e.defaultHeight,b=e.minWidth,_=e.minHeight,w=e.reservedWidth,x=e.reservedHeight,k=e.margin,O=e.gap;this.type=n||null,this.icon=r||null,this.model=i||null,this.displayName=o||null,this.description=a||null,this.categories=s||[],this.tags=u||[],this.url=c||null,this.parentTypes=l||[],this.childrenTypes=f||[],this.definedAttributes=h||[],this.isContainer=void 0!==p&&p,this.displayType=d||null,this.workflowDirection=y||"horizontal",this.linkModel=m||null,this.defaultWidth=g||0,this.defaultHeight=v||0,this.minWidth=b||0,this.minHeight=_||0,this.reservedWidth=w||0,this.reservedHeight=x||0,this.margin=k||10,this.gap=O||30}));const x=w;function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t,e,n){return(e=E(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var A=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,type:null,displayName:null,description:null,tags:[],url:null,linkType:null,linkRef:[],linkModel:null,containerRef:null,required:!1,definedAttributes:[],rules:{values:null,min:null,max:null,regex:null}};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.name,r=e.type,i=e.displayName,o=e.description,a=e.tags,s=e.url,u=e.linkType,c=e.linkRef,l=e.linkModel,f=e.containerRef,h=e.definedAttributes,p=e.required,d=e.rules;this.name=n||null,this.type=r||null,this.displayName=i||null,this.description=o||null,this.tags=a||[],this.url=s||null,this.linkType=u||null,this.linkRef=c||[],this.linkModel=l||null,this.containerRef=f||null,this.definedAttributes=h||[],this.required=p||!1,this.rules=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){S(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({values:null,min:null,max:null,regex:null},d)}));const T=A;function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function N(t,e,n){return e=j(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],j(t).constructor):e.apply(t,n))}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}var L=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{source:null,target:null,name:null,definition:null,isReverse:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=N(this,e);var r=n.source,i=n.target,o=n.name,a=n.definition,s=n.isReverse;return t.__class="Link",t.source=r||null,t.target=i||null,t.name=o||null,t.definition=a||null,t.isReverse=!!s,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(l);const I=L;var D=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeRef:null,sourceRef:null,targetRef:null,type:null,model:null,isTemporary:!1};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.attributeRef,r=e.sourceRef,i=e.targetRef,o=e.type,a=e.model,s=e.isTemporary;this.attributeRef=n||null,this.sourceRef=r||null,this.targetRef=i||null,this.type=o||null,this.model=a||null,this.isTemporary=!!s}));const R=D;function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function F(t,e,n){return e=U(e),function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$()?Reflect.construct(e,n||[],U(t).constructor):e.apply(t,n))}function $(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($=function(){return!!t})()}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}var K=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:null,name:null,content:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=F(this,e,[n]);var r=n.content;return t.content=r||null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(l);const z=K;function V(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=V,n=(e,n)=>V(t(e),n),r=(e,n)=>t(e)-n):(e=t===V||t===Y?t:W,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function W(){return 0}function G(t){return null===t?NaN:+t}const J=H(V),X=J.right,Q=J.left,Z=H(G).center,tt=X;function et(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=st(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const nt=it(st),rt=it((function(t){const e=st(t);return(t,n,r,i,o)=>{e(t,n,0+(r<<=2),0+(i<<=2),o<<=2),e(t,n,r+1,i+1,o),e(t,n,r+2,i+2,o),e(t,n,r+3,i+3,o)}}));function it(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:o,height:a}=e;if(!((o=Math.floor(o))>=0))throw new RangeError("invalid width");if(!((a=Math.floor(void 0!==a?a:i.length/o))>=0))throw new RangeError("invalid height");if(!o||!a||!n&&!r)return e;const s=n&&t(n),u=r&&t(r),c=i.slice();return s&&u?(ot(s,c,i,o,a),ot(s,i,c,o,a),ot(s,c,i,o,a),at(u,i,c,o,a),at(u,c,i,o,a),at(u,i,c,o,a)):s?(ot(s,i,c,o,a),ot(s,c,i,o,a),ot(s,i,c,o,a)):u&&(at(u,i,c,o,a),at(u,c,i,o,a),at(u,i,c,o,a)),e}}function ot(t,e,n,r,i){for(let o=0,a=r*i;o<a;)t(e,n,o,o+=r,1)}function at(t,e,n,r,i){for(let o=0,a=r*i;o<r;++o)t(e,n,o,o+a,r)}function st(t){const e=Math.floor(t);if(e===t)return function(t){const e=2*t+1;return(n,r,i,o,a)=>{if(!((o-=a)>=i))return;let s=t*r[i];const u=a*t;for(let t=i,e=i+u;t<e;t+=a)s+=r[Math.min(o,t)];for(let t=i,c=o;t<=c;t+=a)s+=r[Math.min(o,t+u)],n[t]=s/e,s-=r[Math.max(i,t-u)]}}(t);const n=t-e,r=2*t+1;return(t,i,o,a,s)=>{if(!((a-=s)>=o))return;let u=e*i[o];const c=s*e,l=c+s;for(let t=o,e=o+c;t<e;t+=s)u+=i[Math.min(a,t)];for(let e=o,f=a;e<=f;e+=s)u+=i[Math.min(a,e+c)],t[e]=(u+n*(i[Math.max(o,e-l)]+i[Math.min(a,e+l)]))/r,u-=i[Math.max(o,e-c)]}}function ut(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(i=+i)>=i&&++n}return n}function ct(t){return 0|t.length}function lt(t){return!(t>0)}function ft(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function ht(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(ft)).map(ct),r=t.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(lt))return o;for(;;){o.push(i.map(((e,n)=>t[n][e])));let a=r;for(;++i[a]===n[a];){if(0===a)return e?o.map(e):o;i[a--]=0}}}function pt(t,e){var n=0,r=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:i=>n+=+e(i,r++,t)||0)}function dt(t,e){let n,r=0,i=0,o=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-i,i+=n/++r,o+=n*(e-i));else{let a=-1;for(let s of t)null!=(s=e(s,++a,t))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}function yt(t,e){const n=dt(t,e);return n?Math.sqrt(n):n}function mt(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class gt{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(e[n++]=a),t=o}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(e=o,n=t[--i],o=e+n,r=n-(o-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=o+n,n==e-o&&(o=e))}return o}}function vt(t,e){const n=new gt;if(void 0===e)for(let e of t)(e=+e)&&n.add(e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function bt(t,e){const n=new gt;let r=-1;return Float64Array.from(t,void 0===e?t=>n.add(+t||0):i=>n.add(+e(i,++r,t)||0))}class _t extends Map{constructor(t,e=St){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(xt(this,t))}has(t){return super.has(xt(this,t))}set(t,e){return super.set(kt(this,t),e)}delete(t){return super.delete(Ot(this,t))}}class wt extends Set{constructor(t,e=St){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(xt(this,t))}add(t){return super.add(kt(this,t))}delete(t){return super.delete(Ot(this,t))}}function xt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function kt({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ot({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function St(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Et(t){return t}function At(t,...e){return Rt(t,Et,Et,e)}function Tt(t,...e){return Rt(t,Array.from,Et,e)}function Mt(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap((t=>t.pop().map((([e,n])=>[...t,e,n]))));return t}function Nt(t,...e){return Mt(Tt(t,...e),e)}function Ct(t,e,...n){return Mt(Pt(t,e,...n),n)}function jt(t,e,...n){return Rt(t,Et,e,n)}function Pt(t,e,...n){return Rt(t,Array.from,e,n)}function Lt(t,...e){return Rt(t,Et,Dt,e)}function It(t,...e){return Rt(t,Array.from,Dt,e)}function Dt(t){if(1!==t.length)throw new Error("duplicate key");return t[0]}function Rt(t,e,n,r){return function t(i,o){if(o>=r.length)return n(i);const a=new _t,s=r[o++];let u=-1;for(const t of i){const e=s(t,++u,i),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,o));return e(a)}(t,0)}function Bt(t,e){return Array.from(e,(e=>t[e]))}function Ft(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const r=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),r.sort(((t,n)=>{for(const r of e){const e=Ut(r[t],r[n]);if(e)return e}}))):(n=t.map(n),r.sort(((t,e)=>Ut(n[t],n[e])))),Bt(t,r)}return t.sort($t(n))}function $t(t=V){if(t===V)return Ut;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||0===r?r:(0===t(n,n))-(0===t(e,e))}}function Ut(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function qt(t,e,n){return(2!==e.length?Ft(jt(t,e,n),(([t,e],[n,r])=>V(e,r)||V(t,n))):Ft(At(t,n),(([t,n],[r,i])=>e(n,i)||V(t,r)))).map((([t])=>t))}var Kt=Array.prototype,zt=Kt.slice;function Vt(t){return()=>t}Kt.map;const Yt=Math.sqrt(50),Ht=Math.sqrt(10),Wt=Math.sqrt(2);function Gt(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Yt?10:o>=Ht?5:o>=Wt?2:1;let s,u,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),u=Math.round(e*c),s/c<t&&++s,u/c>e&&--u,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),u=Math.round(e/c),s*c<t&&++s,u*c>e&&--u),u<s&&.5<=n&&n<2?Gt(t,e,2*n):[s,u,c]}function Jt(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,o,a]=r?Gt(e,t,n):Gt(t,e,n);if(!(o>=i))return[];const s=o-i+1,u=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)u[t]=(o-t)/-a;else for(let t=0;t<s;++t)u[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)u[t]=(i+t)/-a;else for(let t=0;t<s;++t)u[t]=(i+t)*a;return u}function Xt(t,e,n){return Gt(t=+t,e=+e,n=+n)[2]}function Qt(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?Xt(e,t,n):Xt(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Zt(t,e,n){let r;for(;;){const i=Xt(t,e,n);if(i===r||0===i||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function te(t){return Math.max(1,Math.ceil(Math.log(ut(t))/Math.LN2)+1)}function ee(){var t=Et,e=mt,n=te;function r(r){Array.isArray(r)||(r=Array.from(r));var i,o,a,s=r.length,u=new Array(s);for(i=0;i<s;++i)u[i]=t(r[i],i,r);var c=e(u),l=c[0],f=c[1],h=n(u,l,f);if(!Array.isArray(h)){const t=f,n=+h;if(e===mt&&([l,f]=Zt(l,f,n)),(h=Jt(l,f,n))[0]<=l&&(a=Xt(l,f,n)),h[h.length-1]>=f)if(t>=f&&e===mt){const t=Xt(l,f,n);isFinite(t)&&(t>0?f=(Math.floor(f/t)+1)*t:t<0&&(f=(Math.ceil(f*-t)+1)/-t))}else h.pop()}for(var p=h.length,d=0,y=p;h[d]<=l;)++d;for(;h[y-1]>f;)--y;(d||y<p)&&(h=h.slice(d,y),p=y-d);var m,g=new Array(p+1);for(i=0;i<=p;++i)(m=g[i]=[]).x0=i>0?h[i-1]:l,m.x1=i<p?h[i]:f;if(isFinite(a)){if(a>0)for(i=0;i<s;++i)null!=(o=u[i])&&l<=o&&o<=f&&g[Math.min(p,Math.floor((o-l)/a))].push(r[i]);else if(a<0)for(i=0;i<s;++i)if(null!=(o=u[i])&&l<=o&&o<=f){const t=Math.floor((l-o)*a);g[Math.min(p,t+(h[t]<=o))].push(r[i])}}else for(i=0;i<s;++i)null!=(o=u[i])&&l<=o&&o<=f&&g[tt(h,o,0,p)].push(r[i]);return g}return r.value=function(e){return arguments.length?(t="function"==typeof e?e:Vt(e),r):t},r.domain=function(t){return arguments.length?(e="function"==typeof t?t:Vt([t[0],t[1]]),r):e},r.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Vt(Array.isArray(t)?zt.call(t):t),r):n},r}function ne(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function re(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n<o||void 0===n&&o>=o)&&(n=o,r=i);return r}function ie(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function oe(t,e){let n,r=-1,i=-1;if(void 0===e)for(const e of t)++i,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,r=i);else for(let o of t)null!=(o=e(o,++i,t))&&(n>o||void 0===n&&o>=o)&&(n=o,r=i);return r}function ae(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=void 0===i?Ut:$t(i);r>n;){if(r-n>600){const o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);ae(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}const o=t[e];let a=n,s=r;for(se(t,n,e),i(t[r],o)>0&&se(t,n,r);a<s;){for(se(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}0===i(t[n],o)?se(t,n,s):(++s,se(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function se(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ue(t,e=V){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?V(t,i)>0:0===V(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)>0:0===e(i,i))&&(n=i,r=!0);return n}function ce(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let r of t)null!=(r=e(r,++n,t))&&(r=+r)>=r&&(yield r)}}(t,n)),(r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return ie(t);if(e>=1)return ne(t);var r,i=(r-1)*e,o=Math.floor(i),a=ne(ae(t,o).subarray(0,o+1));return a+(ie(t.subarray(o+1))-a)*(i-o)}}function le(t,e,n=G){if((r=t.length)&&!isNaN(e=+e)){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function fe(t,e,n=G){if(!isNaN(e=+e)){if(r=Float64Array.from(t,((e,r)=>G(n(t[r],r,t)))),e<=0)return oe(r);if(e>=1)return re(r);var r,i=Uint32Array.from(t,((t,e)=>e)),o=r.length-1,a=Math.floor(o*e);return ae(i,a,0,o,((t,e)=>Ut(r[t],r[e]))),(a=ue(i.subarray(0,a+1),(t=>r[t])))>=0?a:-1}}function he(t,e,n){const r=ut(t),i=ce(t,.75)-ce(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function pe(t,e,n){const r=ut(t),i=yt(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function de(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function ye(t,e){return ce(t,.5,e)}function me(t,e){return fe(t,.5,e)}function ge(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function ve(t,e){const n=new _t;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&i>=i&&n.set(i,(n.get(i)||0)+1)}let r,i=0;for(const[t,e]of n)e>i&&(i=e,r=t);return r}function be(t,e=_e){const n=[];let r,i=!1;for(const o of t)i&&n.push(e(r,o)),r=o,i=!0;return n}function _e(t,e){return[t,e]}function we(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function xe(t,e=V){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);2!==e.length&&(n=n.map(e),e=V);const i=(t,r)=>e(n[t],n[r]);let o,a;return t=Uint32Array.from(n,((t,e)=>e)),t.sort(e===V?(t,e)=>Ut(n[t],n[e]):$t(i)),t.forEach(((t,e)=>{const n=i(t,void 0===o?t:o);n>=0?((void 0===o||n>0)&&(o=t,a=e),r[t]=a):r[t]=NaN})),r}function ke(t,e=V){let n,r=!1;if(1===e.length){let i;for(const o of t){const t=e(o);(r?V(t,i)<0:0===V(t,t))&&(n=o,i=t,r=!0)}}else for(const i of t)(r?e(i,n)<0:0===e(i,i))&&(n=i,r=!0);return n}function Oe(t,e=V){if(1===e.length)return oe(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)<0)&&(n=o,r=i);return r}function Se(t,e=V){if(1===e.length)return re(t,e);let n,r=-1,i=-1;for(const o of t)++i,(r<0?0===e(o,o):e(o,n)>0)&&(n=o,r=i);return r}function Ee(t,e){const n=Oe(t,e);return n<0?void 0:n}const Ae=Te(Math.random);function Te(t){return function(e,n=0,r=e.length){let i=r-(n=+n);for(;i;){const r=t()*i--|0,o=e[i+n];e[i+n]=e[r+n],e[r+n]=o}return e}}function Me(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Ne(t){if(!(i=t.length))return[];for(var e=-1,n=ie(t,Ce),r=new Array(n);++e<n;)for(var i,o=-1,a=r[e]=new Array(i);++o<i;)a[o]=t[o][e];return r}function Ce(t){return t.length}function je(){return Ne(arguments)}function Pe(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function Le(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function Ie(t,e){if("function"!=typeof e)throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function De(t,e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof e)throw new TypeError("mapper is not a function");return Array.from(t,((n,r)=>e(n,r,t)))}function Re(t,e,n){if("function"!=typeof e)throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,o,a=-1;if(arguments.length<3){if(({done:i,value:n}=r.next()),i)return;++a}for(;({done:i,value:o}=r.next()),!i;)n=e(n,o,++a,t);return n}function Be(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Fe(t,...e){t=new wt(t);for(const n of e)for(const e of n)t.delete(e);return t}function $e(t,e){const n=e[Symbol.iterator](),r=new wt;for(const e of t){if(r.has(e))return!1;let t,i;for(;({value:t,done:i}=n.next())&&!i;){if(Object.is(e,t))return!1;r.add(t)}}return!0}function Ue(t,...e){t=new wt(t),e=e.map(qe);t:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue t}return t}function qe(t){return t instanceof wt?t:new wt(t)}function Ke(t,e){const n=t[Symbol.iterator](),r=new Set;for(const t of e){const e=ze(t);if(r.has(e))continue;let i,o;for(;({value:i,done:o}=n.next());){if(o)return!1;const t=ze(i);if(r.add(t),Object.is(e,t))break}}return!0}function ze(t){return null!==t&&"object"==typeof t?t.valueOf():t}function Ve(t,e){return Ke(e,t)}function Ye(...t){const e=new wt;for(const n of t)for(const t of n)e.add(t);return e}function He(t){return t}var We=1,Ge=2,Je=3,Xe=4,Qe=1e-6;function Ze(t){return"translate("+t+",0)"}function tn(t){return"translate(0,"+t+")"}function en(t){return e=>+t(e)}function nn(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function rn(){return!this.__axis}function on(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=t===We||t===Xe?-1:1,l=t===Xe||t===Ge?"x":"y",f=t===We||t===Je?Ze:tn;function h(h){var p=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):He:i,y=Math.max(o,0)+s,m=e.range(),g=+m[0]+u,v=+m[m.length-1]+u,b=(e.bandwidth?nn:en)(e.copy(),u),_=h.selection?h.selection():h,w=_.selectAll(".domain").data([null]),x=_.selectAll(".tick").data(p,e).order(),k=x.exit(),O=x.enter().append("g").attr("class","tick"),S=x.select("line"),E=x.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(O),S=S.merge(O.append("line").attr("stroke","currentColor").attr(l+"2",c*o)),E=E.merge(O.append("text").attr("fill","currentColor").attr(l,c*y).attr("dy",t===We?"0em":t===Je?"0.71em":"0.32em")),h!==_&&(w=w.transition(h),x=x.transition(h),S=S.transition(h),E=E.transition(h),k=k.transition(h).attr("opacity",Qe).attr("transform",(function(t){return isFinite(t=b(t))?f(t+u):this.getAttribute("transform")})),O.attr("opacity",Qe).attr("transform",(function(t){var e=this.parentNode.__axis;return f((e&&isFinite(e=e(t))?e:b(t))+u)}))),k.remove(),w.attr("d",t===Xe||t===Ge?a?"M"+c*a+","+g+"H"+u+"V"+v+"H"+c*a:"M"+u+","+g+"V"+v:a?"M"+g+","+c*a+"V"+u+"H"+v+"V"+c*a:"M"+g+","+u+"H"+v),x.attr("opacity",1).attr("transform",(function(t){return f(b(t)+u)})),S.attr(l+"2",c*o),E.attr(l,c*y).text(d),_.filter(rn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Ge?"start":t===Xe?"end":"middle"),_.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=a=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(a=+t,h):a},h.tickPadding=function(t){return arguments.length?(s=+t,h):s},h.offset=function(t){return arguments.length?(u=+t,h):u},h}function an(t){return on(We,t)}function sn(t){return on(Ge,t)}function un(t){return on(Je,t)}function cn(t){return on(Xe,t)}var ln={value:()=>{}};function fn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new hn(r)}function hn(t){this._=t}function pn(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function dn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ln,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}hn.prototype=fn.prototype={constructor:hn,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=dn(i[n],t.name,e);else if(null==e)for(n in i)i[n]=dn(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=pn(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new hn(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const yn=fn;function mn(){}function gn(t){return null==t?mn:function(){return this.querySelector(t)}}function vn(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function bn(){return[]}function _n(t){return null==t?bn:function(){return this.querySelectorAll(t)}}function wn(t){return function(){return this.matches(t)}}function xn(t){return function(e){return e.matches(t)}}var kn=Array.prototype.find;function On(){return this.firstElementChild}var Sn=Array.prototype.filter;function En(){return Array.from(this.children)}function An(t){return new Array(t.length)}function Tn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Mn(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new Tn(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function Nn(t,e,n,r,i,o,a){var s,u,c,l=new Map,f=e.length,h=o.length,p=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(p[s]=c=a.call(u,u.__data__,s,e)+"",l.has(c)?i[s]=u:l.set(c,u));for(s=0;s<h;++s)c=a.call(t,o[s],s,o)+"",(u=l.get(c))?(r[s]=u,u.__data__=o[s],l.delete(c)):n[s]=new Tn(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l.get(p[s])===u&&(i[s]=u)}function Cn(t){return t.__data__}function jn(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Pn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Tn.prototype={constructor:Tn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Ln="http://www.w3.org/1999/xhtml";const In={svg:"http://www.w3.org/2000/svg",xhtml:Ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dn(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),In.hasOwnProperty(e)?{space:In[e],local:t}:t}function Rn(t){return function(){this.removeAttribute(t)}}function Bn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Fn(t,e){return function(){this.setAttribute(t,e)}}function $n(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Un(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function qn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Kn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zn(t){return function(){this.style.removeProperty(t)}}function Vn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Yn(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Hn(t,e){return t.style.getPropertyValue(e)||Kn(t).getComputedStyle(t,null).getPropertyValue(e)}function Wn(t){return function(){delete this[t]}}function Gn(t,e){return function(){this[t]=e}}function Jn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Xn(t){return t.trim().split(/^|\s+/)}function Qn(t){return t.classList||new Zn(t)}function Zn(t){this._node=t,this._names=Xn(t.getAttribute("class")||"")}function tr(t,e){for(var n=Qn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function er(t,e){for(var n=Qn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function nr(t){return function(){tr(this,t)}}function rr(t){return function(){er(this,t)}}function ir(t,e){return function(){(e.apply(this,arguments)?tr:er)(this,t)}}function or(){this.textContent=""}function ar(t){return function(){this.textContent=t}}function sr(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ur(){this.innerHTML=""}function cr(t){return function(){this.innerHTML=t}}function lr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function fr(){this.nextSibling&&this.parentNode.appendChild(this)}function hr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pr(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ln&&e.documentElement.namespaceURI===Ln?e.createElement(t):e.createElementNS(n,t)}}function dr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yr(t){var e=Dn(t);return(e.local?dr:pr)(e)}function mr(){return null}function gr(){var t=this.parentNode;t&&t.removeChild(this)}function vr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function br(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _r(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function wr(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function xr(t,e,n){var r=Kn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function kr(t,e){return function(){return xr(this,t,e)}}function Or(t,e){return function(){return xr(this,t,e.apply(this,arguments))}}Zn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Sr=[null];function Er(t,e){this._groups=t,this._parents=e}function Ar(){return new Er([[document.documentElement]],Sr)}Er.prototype=Ar.prototype={constructor:Er,select:function(t){"function"!=typeof t&&(t=gn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new Er(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return vn(t.apply(this,arguments))}}(t):_n(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new Er(r,i)},selectChild:function(t){return this.select(null==t?On:function(t){return function(){return kn.call(this.children,t)}}("function"==typeof t?t:xn(t)))},selectChildren:function(t){return this.selectAll(null==t?En:function(t){return function(){return Sn.call(this.children,t)}}("function"==typeof t?t:xn(t)))},filter:function(t){"function"!=typeof t&&(t=wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Er(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Cn);var n,r=e?Nn:Mn,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var f=i[l],h=o[l],p=h.length,d=jn(t.call(f,f&&f.__data__,l,i)),y=d.length,m=u[l]=new Array(y),g=s[l]=new Array(y);r(f,h,m,g,c[l]=new Array(p),d,e);for(var v,b,_=0,w=0;_<y;++_)if(v=m[_]){for(_>=w&&(w=_+1);!(b=g[w])&&++w<y;);v._next=b||null}}return(s=new Er(s,i))._enter=u,s._exit=c,s},enter:function(){return new Er(this._enter||this._groups.map(An),this._parents)},exit:function(){return new Er(this._exit||this._groups.map(An),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),u=0;u<a;++u)for(var c,l=n[u],f=r[u],h=l.length,p=s[u]=new Array(h),d=0;d<h;++d)(c=l[d]||f[d])&&(p[d]=c);for(;u<i;++u)s[u]=n[u];return new Er(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Pn);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new Er(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=Dn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Bn:Rn:"function"==typeof e?n.local?qn:Un:n.local?$n:Fn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?zn:"function"==typeof e?Yn:Vn)(t,e,null==n?"":n)):Hn(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Wn:"function"==typeof e?Jn:Gn)(t,e)):this.node()[t]},classed:function(t,e){var n=Xn(t+"");if(arguments.length<2){for(var r=Qn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ir:e?nr:rr)(n,e))},text:function(t){return arguments.length?this.each(null==t?or:("function"==typeof t?sr:ar)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ur:("function"==typeof t?lr:cr)(t)):this.node().innerHTML},raise:function(){return this.each(fr)},lower:function(){return this.each(hr)},append:function(t){var e="function"==typeof t?t:yr(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:yr(t),r=null==e?mr:"function"==typeof e?e:gn(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(gr)},clone:function(t){return this.select(t?br:vr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?wr:_r,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Or:kr)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Tr=Ar;function Mr(t){return"string"==typeof t?new Er([[document.querySelector(t)]],[document.documentElement]):new Er([[t]],Sr)}const Nr={passive:!1},Cr={capture:!0,passive:!1};function jr(t){t.stopImmediatePropagation()}function Pr(t){t.preventDefault(),t.stopImmediatePropagation()}function Lr(t){var e=t.document.documentElement,n=Mr(t).on("dragstart.drag",Pr,Cr);"onselectstart"in e?n.on("selectstart.drag",Pr,Cr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ir(t,e){var n=t.document.documentElement,r=Mr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Pr,Cr),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Dr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Rr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Br(){}var Fr=.7,$r=1/Fr,Ur="\\s*([+-]?\\d+)\\s*",qr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Kr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zr=/^#([0-9a-f]{3,8})$/,Vr=new RegExp(`^rgb\\(${Ur},${Ur},${Ur}\\)$`),Yr=new RegExp(`^rgb\\(${Kr},${Kr},${Kr}\\)$`),Hr=new RegExp(`^rgba\\(${Ur},${Ur},${Ur},${qr}\\)$`),Wr=new RegExp(`^rgba\\(${Kr},${Kr},${Kr},${qr}\\)$`),Gr=new RegExp(`^hsl\\(${qr},${Kr},${Kr}\\)$`),Jr=new RegExp(`^hsla\\(${qr},${Kr},${Kr},${qr}\\)$`),Xr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qr(){return this.rgb().formatHex()}function Zr(){return this.rgb().formatRgb()}function ti(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=zr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ei(e):3===n?new oi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ni(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ni(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Vr.exec(t))?new oi(e[1],e[2],e[3],1):(e=Yr.exec(t))?new oi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Hr.exec(t))?ni(e[1],e[2],e[3],e[4]):(e=Wr.exec(t))?ni(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Gr.exec(t))?fi(e[1],e[2]/100,e[3]/100,1):(e=Jr.exec(t))?fi(e[1],e[2]/100,e[3]/100,e[4]):Xr.hasOwnProperty(t)?ei(Xr[t]):"transparent"===t?new oi(NaN,NaN,NaN,0):null}function ei(t){return new oi(t>>16&255,t>>8&255,255&t,1)}function ni(t,e,n,r){return r<=0&&(t=e=n=NaN),new oi(t,e,n,r)}function ri(t){return t instanceof Br||(t=ti(t)),t?new oi((t=t.rgb()).r,t.g,t.b,t.opacity):new oi}function ii(t,e,n,r){return 1===arguments.length?ri(t):new oi(t,e,n,null==r?1:r)}function oi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ai(){return`#${li(this.r)}${li(this.g)}${li(this.b)}`}function si(){const t=ui(this.opacity);return`${1===t?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${1===t?")":`, ${t})`}`}function ui(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function li(t){return((t=ci(t))<16?"0":"")+t.toString(16)}function fi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new di(t,e,n,r)}function hi(t){if(t instanceof di)return new di(t.h,t.s,t.l,t.opacity);if(t instanceof Br||(t=ti(t)),!t)return new di;if(t instanceof di)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new di(a,s,u,t.opacity)}function pi(t,e,n,r){return 1===arguments.length?hi(t):new di(t,e,n,null==r?1:r)}function di(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function yi(t){return(t=(t||0)%360)<0?t+360:t}function mi(t){return Math.max(0,Math.min(1,t||0))}function gi(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function vi(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function bi(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return vi((n-r/e)*e,a,i,o,s)}}function _i(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return vi((n-r/e)*e,i,o,a,s)}}Dr(Br,ti,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qr,formatHex:Qr,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hi(this).formatHsl()},formatRgb:Zr,toString:Zr}),Dr(oi,ii,Rr(Br,{brighter(t){return t=null==t?$r:Math.pow($r,t),new oi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Fr:Math.pow(Fr,t),new oi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new oi(ci(this.r),ci(this.g),ci(this.b),ui(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ai,formatHex:ai,formatHex8:function(){return`#${li(this.r)}${li(this.g)}${li(this.b)}${li(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:si,toString:si})),Dr(di,pi,Rr(Br,{brighter(t){return t=null==t?$r:Math.pow($r,t),new di(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Fr:Math.pow(Fr,t),new di(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new oi(gi(t>=240?t-240:t+120,i,r),gi(t,i,r),gi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new di(yi(this.h),mi(this.s),mi(this.l),ui(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ui(this.opacity);return`${1===t?"hsl(":"hsla("}${yi(this.h)}, ${100*mi(this.s)}%, ${100*mi(this.l)}%${1===t?")":`, ${t})`}`}}));const wi=t=>()=>t;function xi(t,e){return function(n){return t+n*e}}function ki(t,e){var n=e-t;return n?xi(t,n>180||n<-180?n-360*Math.round(n/360):n):wi(isNaN(t)?e:t)}function Oi(t,e){var n=e-t;return n?xi(t,n):wi(isNaN(t)?e:t)}const Si=function t(e){var n=function(t){return 1==(t=+t)?Oi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):wi(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=ii(t)).r,(e=ii(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Oi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Ei(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ii(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}var Ai=Ei(bi),Ti=Ei(_i);function Mi(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Ni(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ci(t,e){return(Ni(e)?Mi:ji)(t,e)}function ji(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Fi(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Pi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Li(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ii(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Fi(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Di=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ri=new RegExp(Di.source,"g");function Bi(t,e){var n,r,i,o=Di.lastIndex=Ri.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Di.exec(t))&&(r=Ri.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Li(n,r)})),o=Ri.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}function Fi(t,e){var n,r=typeof e;return null==e||"boolean"===r?wi(e):("number"===r?Li:"string"===r?(n=ti(e))?(e=n,Si):Bi:e instanceof ti?Si:e instanceof Date?Pi:Ni(e)?Mi:Array.isArray(e)?ji:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ii:Li)(t,e)}function $i(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Ui(t,e){if(t=$i(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}var qi,Ki,zi=0,Vi=0,Yi=0,Hi=1e3,Wi=0,Gi=0,Ji=0,Xi="object"==typeof performance&&performance.now?performance:Date,Qi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zi(){return Gi||(Qi(to),Gi=Xi.now()+Ji)}function to(){Gi=0}function eo(){this._call=this._time=this._next=null}function no(t,e,n){var r=new eo;return r.restart(t,e,n),r}function ro(){Zi(),++zi;for(var t,e=qi;e;)(t=Gi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zi}function io(){Gi=(Wi=Xi.now())+Ji,zi=Vi=0;try{ro()}finally{zi=0,function(){for(var t,e,n=qi,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:qi=e);Ki=t,ao(r)}(),Gi=0}}function oo(){var t=Xi.now(),e=t-Wi;e>Hi&&(Ji-=e,Wi=t)}function ao(t){zi||(Vi&&(Vi=clearTimeout(Vi)),t-Gi>24?(t<1/0&&(Vi=setTimeout(io,t-Xi.now()-Ji)),Yi&&(Yi=clearInterval(Yi))):(Yi||(Wi=Xi.now(),Yi=setInterval(oo,Hi)),zi=1,Qi(io)))}function so(t,e,n){var r=new eo;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}eo.prototype=no.prototype={constructor:eo,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Zi():+n)+(null==e?0:+e),this._next||Ki===this||(Ki?Ki._next=this:qi=this,Ki=this),this._call=t,this._time=n,ao()},stop:function(){this._call&&(this._call=null,this._time=1/0,ao())}};var uo=yn("start","end","cancel","interrupt"),co=[],lo=0,fo=1,ho=2,po=3,yo=5,mo=6;function go(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,f,h;if(n.state!==fo)return s();for(c in i)if((h=i[c]).name===n.name){if(h.state===po)return so(o);4===h.state?(h.state=mo,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=mo,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(so((function(){n.state===po&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=ho,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ho){for(n.state=po,r=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=yo,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===yo&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=mo,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=no((function(t){n.state=fo,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:uo,tween:co,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:lo})}function vo(t,e){var n=_o(t,e);if(n.state>lo)throw new Error("too late; already scheduled");return n}function bo(t,e){var n=_o(t,e);if(n.state>po)throw new Error("too late; already running");return n}function _o(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function wo(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>ho&&n.state<yo,n.state=mo,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var xo,ko=180/Math.PI,Oo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function So(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ko,skewX:Math.atan(u)*ko,scaleX:a,scaleY:s}}function Eo(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Li(t,i)},{i:u-2,x:Li(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Li(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Li(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,u),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Li(t,n)},{i:s-2,x:Li(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ao=Eo((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Oo:So(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),To=Eo((function(t){return null==t?Oo:(xo||(xo=document.createElementNS("http://www.w3.org/2000/svg","g")),xo.setAttribute("transform",t),(t=xo.transform.baseVal.consolidate())?So((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Oo)}),", ",")",")");function Mo(t,e){var n,r;return function(){var i=bo(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function No(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=bo(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function Co(t,e,n){var r=t._id;return t.each((function(){var t=bo(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return _o(t,r).value[e]}}function jo(t,e){var n;return("number"==typeof e?Li:e instanceof ti?Si:(n=ti(e))?(e=n,Si):Bi)(t,e)}function Po(t){return function(){this.removeAttribute(t)}}function Lo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Io(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function Do(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function Ro(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttribute(t)}}function Bo(t,e,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,u));this.removeAttributeNS(t.space,t.local)}}function Fo(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function $o(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Uo(t,e){return function(){vo(this,t).delay=+e.apply(this,arguments)}}function qo(t,e){return e=+e,function(){vo(this,t).delay=e}}function Ko(t,e){return function(){bo(this,t).duration=+e.apply(this,arguments)}}function zo(t,e){return e=+e,function(){bo(this,t).duration=e}}var Vo=Tr.prototype.constructor;function Yo(t){return function(){this.style.removeProperty(t)}}var Ho=0;function Wo(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Go(t){return Tr().transition(t)}function Jo(){return++Ho}var Xo=Tr.prototype;function Qo(t){return t*t*t}function Zo(t){return--t*t*t+1}function ta(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Wo.prototype=Go.prototype={constructor:Wo,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=gn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,go(f[h],e,n,h,f,_o(s,n)));return new Wo(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_n(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,p=t.call(u,u.__data__,f,c),d=_o(u,n),y=0,m=p.length;y<m;++y)(h=p[y])&&go(h,e,n,y,p,d);o.push(p),a.push(u)}return new Wo(o,a,e,n)},selectChild:Xo.selectChild,selectChildren:Xo.selectChildren,filter:function(t){"function"!=typeof t&&(t=wn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Wo(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new Wo(a,this._parents,this._name,this._id)},selection:function(){return new Vo(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Jo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=_o(a,e);go(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Wo(r,this._parents,t,n)},call:Xo.call,nodes:Xo.nodes,node:Xo.node,size:Xo.size,empty:Xo.empty,each:Xo.each,on:function(t,e){var n=this._id;return arguments.length<2?_o(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?vo:bo;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=Dn(t),r="transform"===n?To:jo;return this.attrTween(t,"function"==typeof e?(n.local?Bo:Ro)(n,r,Co(this,"attr."+t,e)):null==e?(n.local?Lo:Po)(n):(n.local?Do:Io)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Dn(t);return this.tween(n,(r.local?Fo:$o)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Ao:jo;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Hn(this,t),a=(this.style.removeProperty(t),Hn(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Yo(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=Hn(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=Hn(this,t)),a===u?null:a===r&&u===i?o:(i=u,o=e(r=a,s))}}(t,r,Co(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var u=bo(this,t),c=u.on,l=null==u.value[a]?o||(o=Yo(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(s,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=Hn(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Co(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_o(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Mo:No)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Uo:qo)(e,t)):_o(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ko:zo)(e,t)):_o(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){bo(this,t).ease=e}}(e,t)):_o(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;bo(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=bo(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:Xo[Symbol.iterator]};var ea={time:null,delay:0,duration:250,ease:ta};function na(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Tr.prototype.interrupt=function(t){return this.each((function(){wo(this,t)}))},Tr.prototype.transition=function(t){var e,n;t instanceof Wo?(e=t._id,t=t._name):(e=Jo(),(n=ea).time=Zi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&go(a,t,e,c,s,n||na(a,e));return new Wo(r,this._parents,t,e)};var ra=[null];function ia(t,e){var n,r,i=t.__transition;if(i)for(r in e=null==e?null:e+"",i)if((n=i[r]).state>fo&&n.name===e)return new Wo([[t]],ra,e,+r);return null}const oa=t=>()=>t;function aa(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function sa(t){t.preventDefault(),t.stopImmediatePropagation()}var ua={name:"drag"},ca={name:"space"},la={name:"handle"},fa={name:"center"};const{abs:ha,max:pa,min:da}=Math;function ya(t){return[+t[0],+t[1]]}function ma(t){return[ya(t[0]),ya(t[1])]}var ga={name:"x",handles:["w","e"].map(Sa),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},va={name:"y",handles:["n","s"].map(Sa),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},ba={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Sa),input:function(t){return null==t?null:ma(t)},output:function(t){return t}},_a={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wa={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},xa={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ka={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Oa={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Sa(t){return{type:t}}function Ea(t){return!t.ctrlKey&&!t.button}function Aa(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ta(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ma(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Na(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Ca(){return La(ga)}function ja(){return La(va)}function Pa(){return La(ba)}function La(t){var e,n=Aa,r=Ea,i=Ta,o=!0,a=yn("start","brush","end"),s=6;function u(e){var n=e.property("__brush",y).selectAll(".overlay").data([Sa("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_a.overlay).merge(n).each((function(){var t=Ma(this).extent;Mr(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])})),e.selectAll(".selection").data([Sa("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_a.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,(function(t){return t.type}));r.exit().remove(),r.enter().append("rect").attr("class",(function(t){return"handle handle--"+t.type})).attr("cursor",(function(t){return _a[t.type]})),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",p).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=Mr(this),e=Ma(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",(function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2})).attr("y",(function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2})).attr("width",(function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s})).attr("height",(function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s}))):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(t,e,n){var r=t.__brush.emitter;return!r||n&&r.clean?new f(t,e,n):r}function f(t,e,n){this.that=t,this.args=e,this.state=t.__brush,this.active=0,this.clean=n}function h(n){if((!e||n.touches)&&r.apply(this,arguments)){var i,a,s,u,f,h,p,d,y,m,g,v=this,b=n.target.__data__.type,_="selection"===(o&&n.metaKey?b="overlay":b)?ua:o&&n.altKey?fa:la,w=t===va?null:ka[b],x=t===ga?null:Oa[b],k=Ma(v),O=k.extent,S=k.selection,E=O[0][0],A=O[0][1],T=O[1][0],M=O[1][1],N=0,C=0,j=w&&x&&o&&n.shiftKey,P=Array.from(n.touches||[n],(t=>{const e=t.identifier;return(t=Ui(t,v)).point0=t.slice(),t.identifier=e,t}));wo(v);var L=l(v,arguments,!0).beforestart();if("overlay"===b){S&&(y=!0);const e=[P[0],P[1]||P[0]];k.selection=S=[[i=t===va?E:da(e[0][0],e[1][0]),s=t===ga?A:da(e[0][1],e[1][1])],[f=t===va?T:pa(e[0][0],e[1][0]),p=t===ga?M:pa(e[0][1],e[1][1])]],P.length>1&&F(n)}else i=S[0][0],s=S[0][1],f=S[1][0],p=S[1][1];a=i,u=s,h=f,d=p;var I=Mr(v).attr("pointer-events","none"),D=I.selectAll(".overlay").attr("cursor",_a[b]);if(n.touches)L.moved=B,L.ended=$;else{var R=Mr(n.view).on("mousemove.brush",B,!0).on("mouseup.brush",$,!0);o&&R.on("keydown.brush",(function(t){switch(t.keyCode){case 16:j=w&&x;break;case 18:_===la&&(w&&(f=h-N*w,i=a+N*w),x&&(p=d-C*x,s=u+C*x),_=fa,F(t));break;case 32:_!==la&&_!==fa||(w<0?f=h-N:w>0&&(i=a-N),x<0?p=d-C:x>0&&(s=u-C),_=ca,D.attr("cursor",_a.selection),F(t));break;default:return}sa(t)}),!0).on("keyup.brush",(function(t){switch(t.keyCode){case 16:j&&(m=g=j=!1,F(t));break;case 18:_===fa&&(w<0?f=h:w>0&&(i=a),x<0?p=d:x>0&&(s=u),_=la,F(t));break;case 32:_===ca&&(t.altKey?(w&&(f=h-N*w,i=a+N*w),x&&(p=d-C*x,s=u+C*x),_=fa):(w<0?f=h:w>0&&(i=a),x<0?p=d:x>0&&(s=u),_=la),D.attr("cursor",_a[b]),F(t));break;default:return}sa(t)}),!0),Lr(n.view)}c.call(v),L.start(n,_.name)}function B(t){for(const e of t.changedTouches||[t])for(const t of P)t.identifier===e.identifier&&(t.cur=Ui(e,v));if(j&&!m&&!g&&1===P.length){const t=P[0];ha(t.cur[0]-t[0])>ha(t.cur[1]-t[1])?g=!0:m=!0}for(const t of P)t.cur&&(t[0]=t.cur[0],t[1]=t.cur[1]);y=!0,sa(t),F(t)}function F(t){const e=P[0],n=e.point0;var r;switch(N=e[0]-n[0],C=e[1]-n[1],_){case ca:case ua:w&&(N=pa(E-i,da(T-f,N)),a=i+N,h=f+N),x&&(C=pa(A-s,da(M-p,C)),u=s+C,d=p+C);break;case la:P[1]?(w&&(a=pa(E,da(T,P[0][0])),h=pa(E,da(T,P[1][0])),w=1),x&&(u=pa(A,da(M,P[0][1])),d=pa(A,da(M,P[1][1])),x=1)):(w<0?(N=pa(E-i,da(T-i,N)),a=i+N,h=f):w>0&&(N=pa(E-f,da(T-f,N)),a=i,h=f+N),x<0?(C=pa(A-s,da(M-s,C)),u=s+C,d=p):x>0&&(C=pa(A-p,da(M-p,C)),u=s,d=p+C));break;case fa:w&&(a=pa(E,da(T,i-N*w)),h=pa(E,da(T,f+N*w))),x&&(u=pa(A,da(M,s-C*x)),d=pa(A,da(M,p+C*x)))}h<a&&(w*=-1,r=i,i=f,f=r,r=a,a=h,h=r,b in wa&&D.attr("cursor",_a[b=wa[b]])),d<u&&(x*=-1,r=s,s=p,p=r,r=u,u=d,d=r,b in xa&&D.attr("cursor",_a[b=xa[b]])),k.selection&&(S=k.selection),m&&(a=S[0][0],h=S[1][0]),g&&(u=S[0][1],d=S[1][1]),S[0][0]===a&&S[0][1]===u&&S[1][0]===h&&S[1][1]===d||(k.selection=[[a,u],[h,d]],c.call(v),L.brush(t,_.name))}function $(t){if(function(t){t.stopImmediatePropagation()}(t),t.touches){if(t.touches.length)return;e&&clearTimeout(e),e=setTimeout((function(){e=null}),500)}else Ir(t.view,y),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);I.attr("pointer-events","all"),D.attr("cursor",_a.overlay),k.selection&&(S=k.selection),function(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}(S)&&(k.selection=null,c.call(v)),L.end(t,_.name)}}function p(t){l(this,arguments).moved(t)}function d(t){l(this,arguments).ended(t)}function y(){var e=this.__brush||{selection:null};return e.extent=ma(n.apply(this,arguments)),e.dim=t,e}return u.move=function(e,n,r){e.tween?e.on("start.brush",(function(t){l(this,arguments).beforestart().start(t)})).on("interrupt.brush end.brush",(function(t){l(this,arguments).end(t)})).tween("brush",(function(){var e=this,r=e.__brush,i=l(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=Fi(o,a);function u(t){r.selection=1===t&&null===a?null:s(t),c.call(e),i.brush()}return null!==o&&null!==a?u:u(1)})):e.each((function(){var e=this,i=arguments,o=e.__brush,a=t.input("function"==typeof n?n.apply(e,i):n,o.extent),s=l(e,i).beforestart();wo(e),o.selection=null===a?null:a,c.call(e),s.start(r).brush(r).end(r)}))},u.clear=function(t,e){u.move(t,null,e)},f.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(t,e){return this.starting?(this.starting=!1,this.emit("start",t,e)):this.emit("brush",t),this},brush:function(t,e){return this.emit("brush",t,e),this},end:function(t,e){return 0==--this.active&&(delete this.state.emitter,this.emit("end",t,e)),this},emit:function(e,n,r){var i=Mr(this.that).datum();a.call(e,this.that,new aa(e,{sourceEvent:n,target:u,selection:t.output(this.state.selection),mode:r,dispatch:a}),i)}},u.extent=function(t){return arguments.length?(n="function"==typeof t?t:oa(ma(t)),u):n},u.filter=function(t){return arguments.length?(r="function"==typeof t?t:oa(!!t),u):r},u.touchable=function(t){return arguments.length?(i="function"==typeof t?t:oa(!!t),u):i},u.handleSize=function(t){return arguments.length?(s=+t,u):s},u.keyModifiers=function(t){return arguments.length?(o=!!t,u):o},u.on=function(){var t=a.on.apply(a,arguments);return t===a?u:t},u}var Ia=Math.abs,Da=Math.cos,Ra=Math.sin,Ba=Math.PI,Fa=Ba/2,$a=2*Ba,Ua=Math.max,qa=1e-12;function Ka(t,e){return Array.from({length:e-t},((e,n)=>t+n))}function za(){return Ha(!1,!1)}function Va(){return Ha(!1,!0)}function Ya(){return Ha(!0,!1)}function Ha(t,e){var n=0,r=null,i=null,o=null;function a(a){var s,u=a.length,c=new Array(u),l=Ka(0,u),f=new Array(u*u),h=new Array(u),p=0;a=Float64Array.from({length:u*u},e?(t,e)=>a[e%u][e/u|0]:(t,e)=>a[e/u|0][e%u]);for(let e=0;e<u;++e){let n=0;for(let r=0;r<u;++r)n+=a[e*u+r]+t*a[r*u+e];p+=c[e]=n}s=(p=Ua(0,$a-n*u)/p)?n:$a/u;{let e=0;r&&l.sort(((t,e)=>r(c[t],c[e])));for(const n of l){const r=e;if(t){const t=Ka(1+~u,u).filter((t=>t<0?a[~t*u+n]:a[n*u+t]));i&&t.sort(((t,e)=>i(t<0?-a[~t*u+n]:a[n*u+t],e<0?-a[~e*u+n]:a[n*u+e])));for(const r of t)r<0?(f[~r*u+n]||(f[~r*u+n]={source:null,target:null})).target={index:n,startAngle:e,endAngle:e+=a[~r*u+n]*p,value:a[~r*u+n]}:(f[n*u+r]||(f[n*u+r]={source:null,target:null})).source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]};h[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}else{const t=Ka(0,u).filter((t=>a[n*u+t]||a[t*u+n]));i&&t.sort(((t,e)=>i(a[n*u+t],a[n*u+e])));for(const r of t){let t;if(n<r?(t=f[n*u+r]||(f[n*u+r]={source:null,target:null}),t.source={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]}):(t=f[r*u+n]||(f[r*u+n]={source:null,target:null}),t.target={index:n,startAngle:e,endAngle:e+=a[n*u+r]*p,value:a[n*u+r]},n===r&&(t.source=t.target)),t.source&&t.target&&t.source.value<t.target.value){const e=t.source;t.source=t.target,t.target=e}}h[n]={index:n,startAngle:r,endAngle:e,value:c[n]}}e+=s}}return(f=Object.values(f)).groups=h,o?f.sort(o):f}return a.padAngle=function(t){return arguments.length?(n=Ua(0,t),a):n},a.sortGroups=function(t){return arguments.length?(r=t,a):r},a.sortSubgroups=function(t){return arguments.length?(i=t,a):i},a.sortChords=function(t){return arguments.length?(null==t?o=null:(e=t,o=function(t,n){return e(t.source.value+t.target.value,n.source.value+n.target.value)})._=t,a):o&&o._;var e},a}const Wa=Math.PI,Ga=2*Wa,Ja=1e-6,Xa=Ga-Ja;function Qa(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Za{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Qa:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Qa;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,f=c*c+l*l;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(f>Ja)if(Math.abs(l*s-u*c)>Ja&&i){let h=n-o,p=r-a,d=s*s+u*u,y=h*h+p*p,m=Math.sqrt(d),g=Math.sqrt(f),v=i*Math.tan((Wa-Math.acos((d+f-y)/(2*m*g)))/2),b=v/g,_=v/m;Math.abs(b-1)>Ja&&this._append`L${t+b*c},${e+b*l}`,this._append`A${i},${i},0,0,${+(l*h>c*p)},${this._x1=t+_*s},${this._y1=e+_*u}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,f=o?r-i:i-r;null===this._x1?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Ja||Math.abs(this._y1-c)>Ja)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%Ga+Ga),f>Xa?this._append`A${n},${n},0,1,${l},${t-a},${e-s}A${n},${n},0,1,${l},${this._x1=u},${this._y1=c}`:f>Ja&&this._append`A${n},${n},0,${+(f>=Wa)},${l},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function ts(){return new Za}function es(t=3){return new Za(+t)}ts.prototype=Za.prototype;var ns=Array.prototype.slice;function rs(t){return function(){return t}}function is(t){return t.source}function os(t){return t.target}function as(t){return t.radius}function ss(t){return t.startAngle}function us(t){return t.endAngle}function cs(){return 0}function ls(){return 10}function fs(t){var e=is,n=os,r=as,i=as,o=ss,a=us,s=cs,u=null;function c(){var c,l=e.apply(this,arguments),f=n.apply(this,arguments),h=s.apply(this,arguments)/2,p=ns.call(arguments),d=+r.apply(this,(p[0]=l,p)),y=o.apply(this,p)-Fa,m=a.apply(this,p)-Fa,g=+i.apply(this,(p[0]=f,p)),v=o.apply(this,p)-Fa,b=a.apply(this,p)-Fa;if(u||(u=c=ts()),h>qa&&(Ia(m-y)>2*h+qa?m>y?(y+=h,m-=h):(y-=h,m+=h):y=m=(y+m)/2,Ia(b-v)>2*h+qa?b>v?(v+=h,b-=h):(v-=h,b+=h):v=b=(v+b)/2),u.moveTo(d*Da(y),d*Ra(y)),u.arc(0,0,d,y,m),y!==v||m!==b)if(t){var _=g-+t.apply(this,arguments),w=(v+b)/2;u.quadraticCurveTo(0,0,_*Da(v),_*Ra(v)),u.lineTo(g*Da(w),g*Ra(w)),u.lineTo(_*Da(b),_*Ra(b))}else u.quadraticCurveTo(0,0,g*Da(v),g*Ra(v)),u.arc(0,0,g,v,b);if(u.quadraticCurveTo(0,0,d*Da(y),d*Ra(y)),u.closePath(),c)return u=null,c+""||null}return t&&(c.headRadius=function(e){return arguments.length?(t="function"==typeof e?e:rs(+e),c):t}),c.radius=function(t){return arguments.length?(r=i="function"==typeof t?t:rs(+t),c):r},c.sourceRadius=function(t){return arguments.length?(r="function"==typeof t?t:rs(+t),c):r},c.targetRadius=function(t){return arguments.length?(i="function"==typeof t?t:rs(+t),c):i},c.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:rs(+t),c):o},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:rs(+t),c):a},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:rs(+t),c):s},c.source=function(t){return arguments.length?(e=t,c):e},c.target=function(t){return arguments.length?(n=t,c):n},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c}function hs(){return fs()}function ps(){return fs(ls)}const ds=Math.PI/180,ys=180/Math.PI,ms=.96422,gs=1,vs=.82521,bs=4/29,_s=6/29,ws=3*_s*_s,xs=_s*_s*_s;function ks(t){if(t instanceof Es)return new Es(t.l,t.a,t.b,t.opacity);if(t instanceof Ls)return Is(t);t instanceof oi||(t=ri(t));var e,n,r=Ns(t.r),i=Ns(t.g),o=Ns(t.b),a=As((.2225045*r+.7168786*i+.0606169*o)/gs);return r===i&&i===o?e=n=a:(e=As((.4360747*r+.3850649*i+.1430804*o)/ms),n=As((.0139322*r+.0971045*i+.7141733*o)/vs)),new Es(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Os(t,e){return new Es(t,0,0,null==e?1:e)}function Ss(t,e,n,r){return 1===arguments.length?ks(t):new Es(t,e,n,null==r?1:r)}function Es(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function As(t){return t>xs?Math.pow(t,1/3):t/ws+bs}function Ts(t){return t>_s?t*t*t:ws*(t-bs)}function Ms(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ns(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Cs(t){if(t instanceof Ls)return new Ls(t.h,t.c,t.l,t.opacity);if(t instanceof Es||(t=ks(t)),0===t.a&&0===t.b)return new Ls(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ys;return new Ls(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function js(t,e,n,r){return 1===arguments.length?Cs(t):new Ls(n,e,t,null==r?1:r)}function Ps(t,e,n,r){return 1===arguments.length?Cs(t):new Ls(t,e,n,null==r?1:r)}function Ls(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Is(t){if(isNaN(t.h))return new Es(t.l,0,0,t.opacity);var e=t.h*ds;return new Es(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Dr(Es,Ss,Rr(Br,{brighter(t){return new Es(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Es(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new oi(Ms(3.1338561*(e=ms*Ts(e))-1.6168667*(t=gs*Ts(t))-.4906146*(n=vs*Ts(n))),Ms(-.9787684*e+1.9161415*t+.033454*n),Ms(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Dr(Ls,Ps,Rr(Br,{brighter(t){return new Ls(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Ls(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Is(this).rgb()}}));var Ds=-.14861,Rs=1.78277,Bs=-.29227,Fs=-.90649,$s=1.97294,Us=$s*Fs,qs=$s*Rs,Ks=Rs*Bs-Fs*Ds;function zs(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Vs)return new Vs(t.h,t.s,t.l,t.opacity);t instanceof oi||(t=ri(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Ks*r+Us*e-qs*n)/(Ks+Us-qs),o=r-i,a=($s*(n-i)-Bs*o)/Fs,s=Math.sqrt(a*a+o*o)/($s*i*(1-i)),u=s?Math.atan2(a,o)*ys-120:NaN;return new Vs(u<0?u+360:u,s,i,t.opacity)}(t):new Vs(t,e,n,null==r?1:r)}function Vs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Dr(Vs,zs,Rr(Br,{brighter(t){return t=null==t?$r:Math.pow($r,t),new Vs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Fr:Math.pow(Fr,t),new Vs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*ds,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new oi(255*(e+n*(Ds*r+Rs*i)),255*(e+n*(Bs*r+Fs*i)),255*(e+n*($s*r)),this.opacity)}}));var Ys=Array.prototype.slice;function Hs(t,e){return t-e}const Ws=t=>()=>t;function Gs(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=Js(t,e[r]))return n;return 0}function Js(t,e){for(var n=e[0],r=e[1],i=-1,o=0,a=t.length,s=a-1;o<a;s=o++){var u=t[o],c=u[0],l=u[1],f=t[s],h=f[0],p=f[1];if(Xs(u,f,e))return 0;l>r!=p>r&&n<(h-c)*(r-l)/(p-l)+c&&(i=-i)}return i}function Xs(t,e,n){var r,i,o,a;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(i=t[r=+(t[0]===e[0])],o=n[r],a=e[r],i<=o&&o<=a||a<=o&&o<=i)}function Qs(){}var Zs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function tu(){var t=1,e=1,n=te,r=s;function i(t){var e=n(t);if(Array.isArray(e))e=e.slice().sort(Hs);else{const n=mt(t,eu);for(e=Jt(...Zt(n[0],n[1],e),e);e[e.length-1]>=n[1];)e.pop();for(;e[1]<n[0];)e.shift()}return e.map((e=>o(t,e)))}function o(n,i){const o=null==i?NaN:+i;if(isNaN(o))throw new Error(`invalid value: ${i}`);var s=[],u=[];return function(n,r,i){var o,s,u,c,l,f,h=new Array,p=new Array;for(o=s=-1,c=nu(n[0],r),Zs[c<<1].forEach(d);++o<t-1;)u=c,c=nu(n[o+1],r),Zs[u|c<<1].forEach(d);for(Zs[0|c].forEach(d);++s<e-1;){for(o=-1,c=nu(n[s*t+t],r),l=nu(n[s*t],r),Zs[c<<1|l<<2].forEach(d);++o<t-1;)u=c,c=nu(n[s*t+t+o+1],r),f=l,l=nu(n[s*t+o+1],r),Zs[u|c<<1|l<<2|f<<3].forEach(d);Zs[c|l<<3].forEach(d)}for(o=-1,l=n[s*t]>=r,Zs[l<<2].forEach(d);++o<t-1;)f=l,l=nu(n[s*t+o+1],r),Zs[l<<2|f<<3].forEach(d);function d(t){var e,n,r=[t[0][0]+o,t[0][1]+s],u=[t[1][0]+o,t[1][1]+s],c=a(r),l=a(u);(e=p[c])?(n=h[l])?(delete p[e.end],delete h[n.start],e===n?(e.ring.push(u),i(e.ring)):h[e.start]=p[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete p[e.end],e.ring.push(u),p[e.end=l]=e):(e=h[l])?(n=p[c])?(delete h[e.start],delete p[n.end],e===n?(e.ring.push(u),i(e.ring)):h[n.start]=p[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(r),h[e.start=c]=e):h[c]=p[l]={start:c,end:l,ring:[r,u]}}Zs[l<<3].forEach(d)}(n,o,(function(t){r(t,n,o),function(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}(t)>0?s.push([t]):u.push(t)})),u.forEach((function(t){for(var e,n=0,r=s.length;n<r;++n)if(-1!==Gs((e=s[n])[0],t))return void e.push(t)})),{type:"MultiPolygon",value:i,coordinates:s}}function a(e){return 2*e[0]+e[1]*(t+1)*4}function s(n,r,i){n.forEach((function(n){var o=n[0],a=n[1],s=0|o,u=0|a,c=ru(r[u*t+s]);o>0&&o<t&&s===o&&(n[0]=iu(o,ru(r[u*t+s-1]),c,i)),a>0&&a<e&&u===a&&(n[1]=iu(a,ru(r[(u-1)*t+s]),c,i))}))}return i.contour=o,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),o=Math.floor(n[1]);if(!(r>=0&&o>=0))throw new Error("invalid size");return t=r,e=o,i},i.thresholds=function(t){return arguments.length?(n="function"==typeof t?t:Array.isArray(t)?Ws(Ys.call(t)):Ws(t),i):n},i.smooth=function(t){return arguments.length?(r=t?s:Qs,i):r===s},i}function eu(t){return isFinite(t)?t:NaN}function nu(t,e){return null!=t&&+t>=e}function ru(t){return null==t||isNaN(t=+t)?-1/0:t}function iu(t,e,n,r){const i=r-e,o=n-e,a=isFinite(i)||isFinite(o)?i/o:Math.sign(i)/Math.sign(o);return isNaN(a)?t:t+a-.5}function ou(t){return t[0]}function au(t){return t[1]}function su(){return 1}function uu(){var t=ou,e=au,n=su,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,c=i+2*s>>a,l=Ws(20);function f(r){var i=new Float32Array(u*c),l=Math.pow(2,-a),f=-1;for(const o of r){var h=(t(o,++f,r)+s)*l,p=(e(o,f,r)+s)*l,d=+n(o,f,r);if(d&&h>=0&&h<u&&p>=0&&p<c){var y=Math.floor(h),m=Math.floor(p),g=h-y-.5,v=p-m-.5;i[y+m*u]+=(1-g)*(1-v)*d,i[y+1+m*u]+=g*(1-v)*d,i[y+1+(m+1)*u]+=g*v*d,i[y+(m+1)*u]+=(1-g)*v*d}}return nt({data:i,width:u,height:c},o*l),i}function h(t){var e=f(t),n=l(e),r=Math.pow(2,2*a);return Array.isArray(n)||(n=Jt(Number.MIN_VALUE,ne(e)/r,n)),tu().size([u,c]).thresholds(n.map((t=>t*r)))(e).map(((t,e)=>(t.value=+n[e],p(t))))}function p(t){return t.coordinates.forEach(d),t}function d(t){t.forEach(y)}function y(t){t.forEach(m)}function m(t){t[0]=t[0]*Math.pow(2,a)-s,t[1]=t[1]*Math.pow(2,a)-s}function g(){return u=r+2*(s=3*o)>>a,c=i+2*s>>a,h}return h.contours=function(t){var e=f(t),n=tu().size([u,c]),r=Math.pow(2,2*a),i=t=>{t=+t;var i=p(n.contour(e,t*r));return i.value=t,i};return Object.defineProperty(i,"max",{get:()=>ne(e)/r}),i},h.x=function(e){return arguments.length?(t="function"==typeof e?e:Ws(+e),h):t},h.y=function(t){return arguments.length?(e="function"==typeof t?t:Ws(+t),h):e},h.weight=function(t){return arguments.length?(n="function"==typeof t?t:Ws(+t),h):n},h.size=function(t){if(!arguments.length)return[r,i];var e=+t[0],n=+t[1];if(!(e>=0&&n>=0))throw new Error("invalid size");return r=e,i=n,g()},h.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),g()},h.thresholds=function(t){return arguments.length?(l="function"==typeof t?t:Array.isArray(t)?Ws(Ys.call(t)):Ws(t),h):l},h.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=(Math.sqrt(4*t*t+1)-1)/2,g()},h}const cu=134217729;function lu(t,e,n,r,i){let o,a,s,u,c=e[0],l=r[0],f=0,h=0;l>c==l>-c?(o=c,c=e[++f]):(o=l,l=r[++h]);let p=0;if(f<t&&h<n)for(l>c==l>-c?(a=c+o,s=o-(a-c),c=e[++f]):(a=l+o,s=o-(a-l),l=r[++h]),o=a,0!==s&&(i[p++]=s);f<t&&h<n;)l>c==l>-c?(a=o+c,u=a-o,s=o-(a-u)+(c-u),c=e[++f]):(a=o+l,u=a-o,s=o-(a-u)+(l-u),l=r[++h]),o=a,0!==s&&(i[p++]=s);for(;f<t;)a=o+c,u=a-o,s=o-(a-u)+(c-u),c=e[++f],o=a,0!==s&&(i[p++]=s);for(;h<n;)a=o+l,u=a-o,s=o-(a-u)+(l-u),l=r[++h],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function fu(t){return new Float64Array(t)}const hu=fu(4),pu=fu(8),du=fu(12),yu=fu(16),mu=fu(4);function gu(t,e,n,r,i,o){const a=(e-o)*(n-i),s=(t-i)*(r-o),u=a-s,c=Math.abs(a+s);return Math.abs(u)>=33306690738754716e-32*c?u:-function(t,e,n,r,i,o,a){let s,u,c,l,f,h,p,d,y,m,g,v,b,_,w,x,k,O;const S=t-i,E=n-i,A=e-o,T=r-o;_=S*T,h=cu*S,p=h-(h-S),d=S-p,h=cu*T,y=h-(h-T),m=T-y,w=d*m-(_-p*y-d*y-p*m),x=A*E,h=cu*A,p=h-(h-A),d=A-p,h=cu*E,y=h-(h-E),m=E-y,k=d*m-(x-p*y-d*y-p*m),g=w-k,f=w-g,hu[0]=w-(g+f)+(f-k),v=_+g,f=v-_,b=_-(v-f)+(g-f),g=b-x,f=b-g,hu[1]=b-(g+f)+(f-x),O=v+g,f=O-v,hu[2]=v-(O-f)+(g-f),hu[3]=O;let M=function(t,e){let n=e[0];for(let t=1;t<4;t++)n+=e[t];return n}(0,hu),N=22204460492503146e-32*a;if(M>=N||-M>=N)return M;if(f=t-S,s=t-(S+f)+(f-i),f=n-E,c=n-(E+f)+(f-i),f=e-A,u=e-(A+f)+(f-o),f=r-T,l=r-(T+f)+(f-o),0===s&&0===u&&0===c&&0===l)return M;if(N=11093356479670487e-47*a+33306690738754706e-32*Math.abs(M),M+=S*l+T*s-(A*c+E*u),M>=N||-M>=N)return M;_=s*T,h=cu*s,p=h-(h-s),d=s-p,h=cu*T,y=h-(h-T),m=T-y,w=d*m-(_-p*y-d*y-p*m),x=u*E,h=cu*u,p=h-(h-u),d=u-p,h=cu*E,y=h-(h-E),m=E-y,k=d*m-(x-p*y-d*y-p*m),g=w-k,f=w-g,mu[0]=w-(g+f)+(f-k),v=_+g,f=v-_,b=_-(v-f)+(g-f),g=b-x,f=b-g,mu[1]=b-(g+f)+(f-x),O=v+g,f=O-v,mu[2]=v-(O-f)+(g-f),mu[3]=O;const C=lu(4,hu,4,mu,pu);_=S*l,h=cu*S,p=h-(h-S),d=S-p,h=cu*l,y=h-(h-l),m=l-y,w=d*m-(_-p*y-d*y-p*m),x=A*c,h=cu*A,p=h-(h-A),d=A-p,h=cu*c,y=h-(h-c),m=c-y,k=d*m-(x-p*y-d*y-p*m),g=w-k,f=w-g,mu[0]=w-(g+f)+(f-k),v=_+g,f=v-_,b=_-(v-f)+(g-f),g=b-x,f=b-g,mu[1]=b-(g+f)+(f-x),O=v+g,f=O-v,mu[2]=v-(O-f)+(g-f),mu[3]=O;const j=lu(C,pu,4,mu,du);_=s*l,h=cu*s,p=h-(h-s),d=s-p,h=cu*l,y=h-(h-l),m=l-y,w=d*m-(_-p*y-d*y-p*m),x=u*c,h=cu*u,p=h-(h-u),d=u-p,h=cu*c,y=h-(h-c),m=c-y,k=d*m-(x-p*y-d*y-p*m),g=w-k,f=w-g,mu[0]=w-(g+f)+(f-k),v=_+g,f=v-_,b=_-(v-f)+(g-f),g=b-x,f=b-g,mu[1]=b-(g+f)+(f-x),O=v+g,f=O-v,mu[2]=v-(O-f)+(g-f),mu[3]=O;const P=lu(j,du,4,mu,yu);return yu[P-1]}(t,e,n,r,i,o,c)}fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(8),fu(8),fu(8),fu(4),fu(8),fu(8),fu(8),fu(12),fu(192),fu(192),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(8),fu(8),fu(8),fu(8),fu(8),fu(8),fu(8),fu(8),fu(8),fu(4),fu(4),fu(4),fu(8),fu(16),fu(16),fu(16),fu(32),fu(32),fu(48),fu(64),fu(1152),fu(1152),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(4),fu(24),fu(24),fu(24),fu(24),fu(24),fu(24),fu(24),fu(24),fu(24),fu(24),fu(1152),fu(1152),fu(1152),fu(1152),fu(1152),fu(2304),fu(2304),fu(3456),fu(5760),fu(8),fu(8),fu(8),fu(16),fu(24),fu(48),fu(48),fu(96),fu(192),fu(384),fu(384),fu(384),fu(768),fu(96),fu(96),fu(96),fu(1152);const vu=Math.pow(2,-52),bu=new Uint32Array(512);class _u{static from(t,e=Eu,n=Au){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=e(r),i[2*o+1]=n(r)}return new _u(i)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,s=1/0,u=-1/0,c=-1/0;for(let e=0;e<o;e++){const n=t[2*e],r=t[2*e+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>c&&(c=r),this._ids[e]=e}const l=(a+u)/2,f=(s+c)/2;let h,p,d,y=1/0;for(let e=0;e<o;e++){const n=wu(l,f,t[2*e],t[2*e+1]);n<y&&(h=e,y=n)}const m=t[2*h],g=t[2*h+1];y=1/0;for(let e=0;e<o;e++){if(e===h)continue;const n=wu(m,g,t[2*e],t[2*e+1]);n<y&&n>0&&(p=e,y=n)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let e=0;e<o;e++){if(e===h||e===p)continue;const n=ku(m,g,v,b,t[2*e],t[2*e+1]);n<_&&(d=e,_=n)}let w=t[2*d],x=t[2*d+1];if(_===1/0){for(let e=0;e<o;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];Ou(this._ids,this._dists,0,o-1);const e=new Uint32Array(o);let n=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(e[n++]=i,r=this._dists[i])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(gu(m,g,v,b,w,x)<0){const t=p,e=v,n=b;p=d,v=w,b=x,d=t,w=e,x=n}const k=function(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,h=.5/(a*c-s*u);return{x:t+(c*l-s*f)*h,y:e+(a*f-u*l)*h}}(m,g,v,b,w,x);this._cx=k.x,this._cy=k.y;for(let e=0;e<o;e++)this._dists[e]=wu(t[2*e],t[2*e+1],k.x,k.y);Ou(this._ids,this._dists,0,o-1),this._hullStart=h;let O=3;n[h]=e[d]=p,n[p]=e[h]=d,n[d]=e[p]=h,r[h]=0,r[p]=1,r[d]=2,i.fill(-1),i[this._hashKey(m,g)]=h,i[this._hashKey(v,b)]=p,i[this._hashKey(w,x)]=d,this.trianglesLen=0,this._addTriangle(h,p,d,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],c=t[2*u],l=t[2*u+1];if(s>0&&Math.abs(c-o)<=vu&&Math.abs(l-a)<=vu)continue;if(o=c,a=l,u===h||u===p||u===d)continue;let f=0;for(let t=0,e=this._hashKey(c,l);t<this._hashSize&&(f=i[(e+t)%this._hashSize],-1===f||f===n[f]);t++);f=e[f];let y,m=f;for(;y=n[m],gu(c,l,t[2*m],t[2*m+1],t[2*y],t[2*y+1])>=0;)if(m=y,m===f){m=-1;break}if(-1===m)continue;let g=this._addTriangle(m,u,n[m],-1,-1,r[m]);r[u]=this._legalize(g+2),r[m]=g,O++;let v=n[m];for(;y=n[v],gu(c,l,t[2*v],t[2*v+1],t[2*y],t[2*y+1])<0;)g=this._addTriangle(v,u,y,r[u],-1,r[v]),r[u]=this._legalize(g+2),n[v]=v,O--,v=y;if(m===f)for(;y=e[m],gu(c,l,t[2*y],t[2*y+1],t[2*m],t[2*m+1])<0;)g=this._addTriangle(y,u,m,-1,r[m],r[y]),this._legalize(g+2),r[y]=g,n[m]=m,O--,m=y;this._hullStart=e[u]=m,n[m]=e[v]=u,n[u]=v,i[this._hashKey(c,l)]=u,i[this._hashKey(t[2*m],t[2*m+1])]=m}this.hull=new Uint32Array(O);for(let t=0,e=this._hullStart;t<O;t++)this.hull[t]=e,e=n[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[t],s=t-t%3;if(o=s+(t+2)%3,-1===a){if(0===i)break;t=bu[--i];continue}const u=a-a%3,c=s+(t+1)%3,l=u+(a+2)%3,f=e[o],h=e[t],p=e[c],d=e[l];if(xu(r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1],r[2*d],r[2*d+1])){e[t]=d,e[a]=f;const r=n[l];if(-1===r){let e=this._hullStart;do{if(this._hullTri[e]===l){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,r),this._link(a,n[o]),this._link(o,l);const s=u+(a+1)%3;i<bu.length&&(bu[i++]=s)}else{if(0===i)break;t=bu[--i]}}return o}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=e,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function wu(t,e,n,r){const i=t-n,o=e-r;return i*i+o*o}function xu(t,e,n,r,i,o,a,s){const u=t-a,c=e-s,l=n-a,f=r-s,h=i-a,p=o-s,d=l*l+f*f,y=h*h+p*p;return u*(f*y-d*p)-c*(l*y-d*h)+(u*u+c*c)*(l*p-f*h)<0}function ku(t,e,n,r,i,o){const a=n-t,s=r-e,u=i-t,c=o-e,l=a*a+s*s,f=u*u+c*c,h=.5/(a*c-s*u),p=(c*l-s*f)*h,d=(a*f-u*l)*h;return p*p+d*d}function Ou(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=t[i],o=e[r];let a=i-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=n+1,o=r;Su(t,n+r>>1,i),e[t[n]]>e[t[r]]&&Su(t,n,r),e[t[i]]>e[t[r]]&&Su(t,i,r),e[t[n]]>e[t[i]]&&Su(t,n,i);const a=t[i],s=e[a];for(;;){do{i++}while(e[t[i]]<s);do{o--}while(e[t[o]]>s);if(o<i)break;Su(t,i,o)}t[n+1]=t[o],t[o]=a,r-i+1>=o-n?(Ou(t,e,i,r),Ou(t,e,n,o-1)):(Ou(t,e,n,o-1),Ou(t,e,i,r))}}function Su(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Eu(t){return t[0]}function Au(t){return t[1]}const Tu=1e-6;class Mu{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const r=(t=+t)+(n=+n),i=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Tu||Math.abs(this._y1-i)>Tu)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,e,n,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class Nu{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class Cu{constructor(t,[e,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(e=+e)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=e,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let r,s,u=0,c=0,l=n.length;u<l;u+=3,c+=2){const l=2*n[u],f=2*n[u+1],h=2*n[u+2],p=t[l],d=t[l+1],y=t[f],m=t[f+1],g=t[h],v=t[h+1],b=y-p,_=m-d,w=g-p,x=v-d,k=2*(b*x-_*w);if(Math.abs(k)<1e-9){if(void 0===i){i=o=0;for(const n of e)i+=t[2*n],o+=t[2*n+1];i/=e.length,o/=e.length}const n=1e9*Math.sign((i-p)*x-(o-d)*w);r=(p+g)/2-n*x,s=(d+v)/2+n*w}else{const t=1/k,e=b*b+_*_,n=w*w+x*x;r=p+(x*e-_*n)*t,s=d+(b*n-w*e)*t}a[c]=r,a[c+1]=s}let s,u,c,l=e[e.length-1],f=4*l,h=t[2*l],p=t[2*l+1];r.fill(0);for(let n=0;n<e.length;++n)l=e[n],s=f,u=h,c=p,f=4*l,h=t[2*l],p=t[2*l+1],r[s+2]=r[f]=c-p,r[s+3]=r[f+1]=h-u}render(t){const e=null==t?t=new Mu:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let e=0,r=n.length;e<r;++e){const r=n[e];if(r<e)continue;const i=2*Math.floor(e/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],c=o[a],l=o[a+1];this._renderSegment(s,u,c,l,t)}let s,u=i[i.length-1];for(let e=0;e<i.length;++e){s=u,u=i[e];const n=2*Math.floor(r[u]/3),c=o[n],l=o[n+1],f=4*s,h=this._project(c,l,a[f+2],a[f+3]);h&&this._renderSegment(c,l,h[0],h[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new Mu:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new Mu:void 0,r=this._clip(t);if(null===r||!r.length)return;e.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||e.lineTo(r[t],r[t+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new Nu;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,r,i){let o;const a=this._regioncode(t,e),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(t,e),i.lineTo(n,r)):(o=this._clipSegment(t,e,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let r=0,i=e.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(e[r]===t[o]&&e[r+1]===t[o+1]&&e[(r+2)%i]===t[(o+a-2)%a]&&e[(r+3)%i]===t[(o+a-1)%a]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[t];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(e[2*n],e[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==t)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,r=4*t;return this._simplify(n[r]||n[r+1]?this._clipInfinite(t,e,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(t,e))}_clipFinite(t,e){const n=e.length;let r,i,o,a,s=null,u=e[n-2],c=e[n-1],l=this._regioncode(u,c),f=0;for(let h=0;h<n;h+=2)if(r=u,i=c,u=e[h],c=e[h+1],o=l,l=this._regioncode(u,c),0===o&&0===l)a=f,f=0,s?s.push(u,c):s=[u,c];else{let e,n,h,p,d;if(0===o){if(null===(e=this._clipSegment(r,i,u,c,o,l)))continue;[n,h,p,d]=e}else{if(null===(e=this._clipSegment(u,c,r,i,l,o)))continue;[p,d,n,h]=e,a=f,f=this._edgecode(n,h),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(n,h):s=[n,h]}a=f,f=this._edgecode(p,d),a&&f&&this._edge(t,a,f,s,s.length),s?s.push(p,d):s=[p,d]}if(s)a=f,f=this._edgecode(s[0],s[1]),a&&f&&this._edge(t,a,f,s,s.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(t,e,n,r,i,o){const a=i<o;for(a&&([t,e,n,r,i,o]=[n,r,t,e,o,i]);;){if(0===i&&0===o)return a?[n,r,t,e]:[t,e,n,r];if(i&o)return null;let s,u,c=i||o;8&c?(s=t+(n-t)*(this.ymax-e)/(r-e),u=this.ymax):4&c?(s=t+(n-t)*(this.ymin-e)/(r-e),u=this.ymin):2&c?(u=e+(r-e)*(this.xmax-t)/(n-t),s=this.xmax):(u=e+(r-e)*(this.xmin-t)/(n-t),s=this.xmin),i?(t=s,e=u,i=this._regioncode(t,e)):(n=s,r=u,o=this._regioncode(n,r))}}_clipInfinite(t,e,n,r,i,o){let a,s=Array.from(e);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(t,s))for(let e,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)e=i,i=this._edgecode(s[n],s[n+1]),e&&i&&(n=this._edge(t,e,i,s,n),r=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,e,n,r,i){for(;e!==n;){let n,o;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(t,n,o)||(r.splice(i,0,n,o),i+=2)}return i}_project(t,e,n,r){let i,o,a,s=1/0;if(r<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/r)<s&&(a=this.ymin,o=t+(s=i)*n)}else if(r>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/r)<s&&(a=this.ymax,o=t+(s=i)*n)}if(n>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/n)<s&&(o=this.xmax,a=e+(s=i)*r)}else if(n<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/n)<s&&(o=this.xmin,a=e+(s=i)*r)}return[o,a]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,r=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[r]||t[e+1]===t[n+1]&&t[n+1]===t[r+1])&&(t.splice(n,2),e-=2)}t.length||(t=null)}return t}}const ju=2*Math.PI,Pu=Math.pow;function Lu(t){return t[0]}function Iu(t){return t[1]}function Du(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class Ru{static from(t,e=Lu,n=Iu,r){return new Ru("length"in t?function(t,e,n,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=e.call(r,i,a,t),o[2*a+1]=n.call(r,i,a,t)}return o}(t,e,n,r):Float64Array.from(function*(t,e,n,r){let i=0;for(const o of t)yield e.call(r,o,i,t),yield n.call(r,o,i,t),++i}(t,e,n,r)))}constructor(t){this._delaunator=new _u(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let t=0;t<e.length;t+=3){const r=2*e[t],i=2*e[t+1],o=2*e[t+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},((t,e)=>e)).sort(((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]));const t=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,n=e.length/2;t<n;++t){const n=Du(e[2*t],e[2*t+1],i);e[2*t]=n[0],e[2*t+1]=n[1]}this._delaunator=new _u(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,e=n.length;t<e;++t){const e=i[t%3==2?t-2:t+1];-1!==n[t]&&-1!==o[e]||(o[e]=t)}for(let t=0,e=r.length;t<e;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Cu(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const e=a.indexOf(t);return e>0&&(yield a[e-1]),void(e<a.length-1&&(yield a[e+1]))}const s=e[t];if(-1===s)return;let u=s,c=-1;do{if(yield c=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const e=n[(r[t]+1)%n.length];return void(e!==c&&(yield e))}}while(u!==s)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const r=n;let i;for(;(i=this._step(n,t,e))>=0&&i!==n&&i!==r;)n=i;return i}_step(t,e,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let c=t,l=Pu(e-u[2*t],2)+Pu(n-u[2*t+1],2);const f=r[t];let h=f;do{let r=s[h];const f=Pu(e-u[2*r],2)+Pu(n-u[2*r+1],2);if(f<l&&(l=f,c=r),h=h%3==2?h-2:h+1,s[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Pu(e-u[2*h],2)+Pu(n-u[2*h+1],2)<l)return h;break}}while(h!==f);return c}render(t){const e=null==t?t=new Mu:void 0,{points:n,halfedges:r,triangles:i}=this;for(let e=0,o=r.length;e<o;++e){const o=r[e];if(o<e)continue;const a=2*i[e],s=2*i[o];t.moveTo(n[a],n[a+1]),t.lineTo(n[s],n[s+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e){void 0!==e||t&&"function"==typeof t.moveTo||(e=t,t=null),e=null==e?2:+e;const n=null==t?t=new Mu:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];t.moveTo(i+e,o),t.arc(i,o,e,0,ju)}return n&&n.value()}renderHull(t){const e=null==t?t=new Mu:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;t.moveTo(r[i],r[i+1]);for(let e=1;e<o;++e){const i=2*n[e];t.lineTo(r[i],r[i+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new Nu;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new Mu:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],s=2*i[t+2];return e.moveTo(r[o],r[o+1]),e.lineTo(r[a],r[a+1]),e.lineTo(r[s],r[s+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new Nu;return this.renderTriangle(t,e),e.value()}}const Bu=t=>()=>t;function Fu(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}function $u(t){return!t.ctrlKey&&!t.button}function Uu(){return this.parentNode}function qu(t,e){return null==e?{x:t.x,y:t.y}:e}function Ku(){return navigator.maxTouchPoints||"ontouchstart"in this}function zu(){var t,e,n,r,i=$u,o=Uu,a=qu,s=Ku,u={},c=yn("start","drag","end"),l=0,f=0;function h(t){t.on("mousedown.drag",p).filter(s).on("touchstart.drag",m).on("touchmove.drag",g,Nr).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(a,s){if(!r&&i.call(this,a,s)){var u=b(this,o.call(this,a,s),a,s,"mouse");u&&(Mr(a.view).on("mousemove.drag",d,Cr).on("mouseup.drag",y,Cr),Lr(a.view),jr(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function d(r){if(Pr(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>f}u.mouse("drag",r)}function y(t){Mr(t.view).on("mousemove.drag mouseup.drag",null),Ir(t.view,n),Pr(t),u.mouse("end",t)}function m(t,e){if(i.call(this,t,e)){var n,r,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(r=b(this,s,t,e,a[n].identifier,a[n]))&&(jr(t),r("start",t,a[n]))}}function g(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=u[r[e].identifier])&&(Pr(t),n("drag",t,r[e]))}function v(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=u[i[e].identifier])&&(jr(t),n("end",t,i[e]))}function b(t,e,n,r,i,o){var s,f,p,d=c.copy(),y=Ui(o||n,e);if(null!=(p=a.call(t,new Fu("beforestart",{sourceEvent:n,target:h,identifier:i,active:l,x:y[0],y:y[1],dx:0,dy:0,dispatch:d}),r)))return s=p.x-y[0]||0,f=p.y-y[1]||0,function n(o,a,c){var m,g=y;switch(o){case"start":u[i]=n,m=l++;break;case"end":delete u[i],--l;case"drag":y=Ui(c||a,e),m=l}d.call(o,t,new Fu(o,{sourceEvent:a,subject:p,target:h,identifier:i,active:m,x:y[0]+s,y:y[1]+f,dx:y[0]-g[0],dy:y[1]-g[1],dispatch:d}),r)}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Bu(!!t),h):i},h.container=function(t){return arguments.length?(o="function"==typeof t?t:Bu(t),h):o},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:Bu(t),h):a},h.touchable=function(t){return arguments.length?(s="function"==typeof t?t:Bu(!!t),h):s},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}Fu.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Vu={},Yu={},Hu=34,Wu=10,Gu=13;function Ju(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function Xu(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Qu(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Zu(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,a=0,s=0,u=o<=0,c=!1;function l(){if(u)return Yu;if(c)return c=!1,Vu;var e,r,i=a;if(t.charCodeAt(i)===Hu){for(;a++<o&&t.charCodeAt(a)!==Hu||t.charCodeAt(++a)===Hu;);return(e=a)>=o?u=!0:(r=t.charCodeAt(a++))===Wu?c=!0:r===Gu&&(c=!0,t.charCodeAt(a)===Wu&&++a),t.slice(i+1,e-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(e=a++))===Wu)c=!0;else if(r===Gu)c=!0,t.charCodeAt(a)===Wu&&++a;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Wu&&--o,t.charCodeAt(o-1)===Gu&&--o;(r=l())!==Yu;){for(var f=[];r!==Vu&&r!==Yu;)f.push(r),r=l();e&&null==(f=e(f,s++))||i.push(f)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?function(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Qu(-e,6):e>9999?"+"+Qu(e,6):Qu(e,4))+"-"+Qu(t.getUTCMonth()+1,2)+"-"+Qu(t.getUTCDate(),2)+(o?"T"+Qu(n,2)+":"+Qu(r,2)+":"+Qu(i,2)+"."+Qu(o,3)+"Z":i?"T"+Qu(n,2)+":"+Qu(r,2)+":"+Qu(i,2)+"Z":r||n?"T"+Qu(n,2)+":"+Qu(r,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=Ju(t);return function(r,i){return e(n(r),i,t)}}(t,e):Ju(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=Xu(e)),[n.map(a).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Xu(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:a}}var tc=Zu(","),ec=tc.parse,nc=tc.parseRows,rc=tc.format,ic=tc.formatBody,oc=tc.formatRows,ac=tc.formatRow,sc=tc.formatValue,uc=Zu("\t"),cc=uc.parse,lc=uc.parseRows,fc=uc.format,hc=uc.formatBody,pc=uc.formatRows,dc=uc.formatRow,yc=uc.formatValue;function mc(t){for(var e in t){var n,r,i=t[e].trim();if(i)if("true"===i)i=!0;else if("false"===i)i=!1;else if("NaN"===i)i=NaN;else if(isNaN(n=+i)){if(!(r=i.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;gc&&r[4]&&!r[7]&&(i=i.replace(/-/g,"/").replace(/T/," ")),i=new Date(i)}else i=n;else i=null;t[e]=i}return t}const gc=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),vc=t=>+t;function bc(t){return t*t}function _c(t){return t*(2-t)}function wc(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}var xc=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),kc=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),Oc=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Sc=Math.PI,Ec=Sc/2;function Ac(t){return 1==+t?1:1-Math.cos(t*Ec)}function Tc(t){return Math.sin(t*Ec)}function Mc(t){return(1-Math.cos(Sc*t))/2}function Nc(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function Cc(t){return Nc(1-+t)}function jc(t){return 1-Nc(t)}function Pc(t){return((t*=2)<=1?Nc(1-t):2-Nc(t-1))/2}function Lc(t){return 1-Math.sqrt(1-t*t)}function Ic(t){return Math.sqrt(1- --t*t)}function Dc(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Rc=4/11,Bc=6/11,Fc=8/11,$c=3/4,Uc=9/11,qc=10/11,Kc=15/16,zc=21/22,Vc=63/64,Yc=1/Rc/Rc;function Hc(t){return 1-Wc(1-t)}function Wc(t){return(t=+t)<Rc?Yc*t*t:t<Fc?Yc*(t-=Bc)*t+$c:t<qc?Yc*(t-=Uc)*t+Kc:Yc*(t-=zc)*t+Vc}function Gc(t){return((t*=2)<=1?1-Wc(1-t):Wc(t-1)+1)/2}var Jc=1.70158,Xc=function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(Jc),Qc=function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(Jc),Zc=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(Jc),tl=2*Math.PI,el=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=tl);function i(t){return e*Nc(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*tl)},i.period=function(n){return t(e,n)},i}(1,.3),nl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=tl);function i(t){return 1-e*Nc(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*tl)},i.period=function(n){return t(e,n)},i}(1,.3),rl=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=tl);function i(t){return((t=2*t-1)<0?e*Nc(-t)*Math.sin((r-t)/n):2-e*Nc(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*tl)},i.period=function(n){return t(e,n)},i}(1,.3);function il(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function ol(t,e){return fetch(t,e).then(il)}function al(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function sl(t,e){return fetch(t,e).then(al)}function ul(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function cl(t,e){return fetch(t,e).then(ul)}function ll(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),cl(e,n).then((function(e){return t(e,r)}))}}function fl(t,e,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=Zu(t);return cl(e,n).then((function(t){return i.parse(t,r)}))}var hl=ll(ec),pl=ll(cc);function dl(t,e){return new Promise((function(n,r){var i=new Image;for(var o in e)i[o]=e[o];i.onerror=r,i.onload=function(){n(i)},i.src=t}))}function yl(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(204!==t.status&&205!==t.status)return t.json()}function ml(t,e){return fetch(t,e).then(yl)}function gl(t){return(e,n)=>cl(e,n).then((e=>(new DOMParser).parseFromString(e,t)))}const vl=gl("application/xml");var bl=gl("text/html"),_l=gl("image/svg+xml");function wl(t,e){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-t)*r,u=(u/a-e)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}function xl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,h,p=t._root,d={data:r},y=t._x0,m=t._y0,g=t._x1,v=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(a=(m+v)/2))?m=a:v=a,i=p,!(p=p[f=l<<1|c]))return i[f]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[f]=d:t._root=d,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(a=(m+v)/2))?m=a:v=a}while((f=l<<1|c)==(h=(u>=a)<<1|s>=o));return i[h]=p,i[f]=d,t}function kl(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Ol(t){return t[0]}function Sl(t){return t[1]}function El(t,e,n){var r=new Al(null==e?Ol:e,null==n?Sl:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Al(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Tl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ml=El.prototype=Al.prototype;function Nl(t){return function(){return t}}function Cl(t){return 1e-6*(t()-.5)}function jl(t){return t.x+t.vx}function Pl(t){return t.y+t.vy}function Ll(t){var e,n,r,i=1,o=1;function a(){for(var t,a,u,c,l,f,h,p=e.length,d=0;d<o;++d)for(a=El(e,jl,Pl).visitAfter(s),t=0;t<p;++t)u=e[t],f=n[u.index],h=f*f,c=u.x+u.vx,l=u.y+u.vy,a.visit(y);function y(t,e,n,o,a){var s=t.data,p=t.r,d=f+p;if(!s)return e>c+d||o<c-d||n>l+d||a<l-d;if(s.index>u.index){var y=c-s.x-s.vx,m=l-s.y-s.vy,g=y*y+m*m;g<d*d&&(0===y&&(g+=(y=Cl(r))*y),0===m&&(g+=(m=Cl(r))*m),g=(d-(g=Math.sqrt(g)))/g*i,u.vx+=(y*=g)*(d=(p*=p)/(h+p)),u.vy+=(m*=g)*d,s.vx-=y*(d=1-d),s.vy-=m*d)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Nl(null==t?1:+t)),a.initialize=function(t,n){e=t,r=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Nl(+e),u(),a):t},a}function Il(t){return t.index}function Dl(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Rl(t){var e,n,r,i,o,a,s=Il,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=Nl(30),l=1;function f(r){for(var i=0,s=t.length;i<l;++i)for(var u,c,f,h,p,d,y,m=0;m<s;++m)c=(u=t[m]).source,h=(f=u.target).x+f.vx-c.x-c.vx||Cl(a),p=f.y+f.vy-c.y-c.vy||Cl(a),h*=d=((d=Math.sqrt(h*h+p*p))-n[m])/d*r*e[m],p*=d,f.vx-=h*(y=o[m]),f.vy-=p*y,c.vx+=h*(y=1-y),c.vy+=p*y}function h(){if(r){var a,u,c=r.length,l=t.length,f=new Map(r.map(((t,e)=>[s(t,e,r),t])));for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=Dl(f,u.source)),"object"!=typeof u.target&&(u.target=Dl(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(l);a<l;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),p(),n=new Array(l),d()}}function p(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+c(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){r=t,a=e,h()},f.links=function(e){return arguments.length?(t=e,h(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(l=+t,f):l},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:Nl(+t),p(),f):u},f.distance=function(t){return arguments.length?(c="function"==typeof t?t:Nl(+t),d(),f):c},f}Ml.copy=function(){var t,e,n=new Al(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Tl(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Tl(e));return n},Ml.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return xl(this.cover(e,n),e,n,t)},Ml.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));if(u>l||c>f)return this;for(this.cover(u,c).cover(l,f),n=0;n<o;++n)xl(this,a[n],s[n],t[n]);return this},Ml.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a,s,u=i-n||1,c=this._root;n>t||t>=i||r>e||e>=o;)switch(s=(e<r)<<1|t<n,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ml.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ml.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ml.find=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,h=this._x1,p=this._y1,d=[],y=this._root;for(y&&d.push(new kl(y,l,f,h,p)),null==n?n=1/0:(l=t-n,f=e-n,h=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(y=u.node)||(i=u.x0)>h||(o=u.y0)>p||(a=u.x1)<l||(s=u.y1)<f))if(y.length){var m=(i+a)/2,g=(o+s)/2;d.push(new kl(y[3],m,g,a,s),new kl(y[2],i,g,m,s),new kl(y[1],m,o,a,g),new kl(y[0],i,o,m,g)),(c=(e>=g)<<1|t>=m)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=u)}else{var v=t-+this._x.call(null,y.data),b=e-+this._y.call(null,y.data),_=v*v+b*b;if(_<n){var w=Math.sqrt(n=_);l=t-w,f=e-w,h=t+w,p=e+w,r=y.data}}return r},Ml.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,h,p=this._root,d=this._x0,y=this._y0,m=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+m)/2))?d=s:m=s,(l=a>=(u=(y+g)/2))?y=u:g=u,e=p,!(p=p[f=l<<1|c]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},Ml.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ml.root=function(){return this._root},Ml.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ml.visit=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new kl(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new kl(n,c,l,o,a)),(n=u[2])&&s.push(new kl(n,r,l,c,a)),(n=u[1])&&s.push(new kl(n,c,i,o,l)),(n=u[0])&&s.push(new kl(n,r,i,c,l))}return this},Ml.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new kl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new kl(o,a,s,l,f)),(o=i[1])&&n.push(new kl(o,l,s,u,f)),(o=i[2])&&n.push(new kl(o,a,f,l,c)),(o=i[3])&&n.push(new kl(o,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ml.x=function(t){return arguments.length?(this._x=t,this):this._x},Ml.y=function(t){return arguments.length?(this._y=t,this):this._y};const Bl=1664525,Fl=1013904223,$l=4294967296;function Ul(t){return t.x}function ql(t){return t.y}var Kl=10,zl=Math.PI*(3-Math.sqrt(5));function Vl(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=no(f),c=yn("tick","end"),l=function(){let t=1;return()=>(t=(Bl*t+Fl)%$l)/$l}();function f(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(r){var u,c,l=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=Kl*Math.sqrt(.5+n),o=n*zl;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t,l),e}return null==t&&(t=[]),p(),e={tick:h,restart:function(){return u.restart(f),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,p(),s.forEach(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},randomSource:function(t){return arguments.length?(l=t,s.forEach(d),e):l},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,d(n)),e):s.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(a=(i=e-(s=t[c]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function Yl(){var t,e,n,r,i,o=Nl(-30),a=1,s=1/0,u=.81;function c(n){var i,o=t.length,a=El(t,Ul,ql).visitAfter(f);for(r=n,i=0;i<o;++i)e=t[i],a.visit(h)}function l(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function f(t){var e,n,r,o,a,s=0,u=0;if(t.length){for(r=o=a=0;a<4;++a)(e=t[a])&&(n=Math.abs(e.value))&&(s+=e.value,u+=n,r+=n*e.x,o+=n*e.y);t.x=r/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function h(t,o,c,l){if(!t.value)return!0;var f=t.x-e.x,h=t.y-e.y,p=l-o,d=f*f+h*h;if(p*p/u<d)return d<s&&(0===f&&(d+=(f=Cl(n))*f),0===h&&(d+=(h=Cl(n))*h),d<a&&(d=Math.sqrt(a*d)),e.vx+=f*t.value*r/d,e.vy+=h*t.value*r/d),!0;if(!(t.length||d>=s)){(t.data!==e||t.next)&&(0===f&&(d+=(f=Cl(n))*f),0===h&&(d+=(h=Cl(n))*h),d<a&&(d=Math.sqrt(a*d)));do{t.data!==e&&(p=i[t.data.index]*r/d,e.vx+=f*p,e.vy+=h*p)}while(t=t.next)}}return c.initialize=function(e,r){t=e,n=r,l()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:Nl(+t),l(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c}function Hl(t,e,n){var r,i,o,a=Nl(.1);function s(t){for(var a=0,s=r.length;a<s;++a){var u=r[a],c=u.x-e||1e-6,l=u.y-n||1e-6,f=Math.sqrt(c*c+l*l),h=(o[a]-f)*i[a]*t/f;u.vx+=c*h,u.vy+=l*h}}function u(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)o[e]=+t(r[e],e,r),i[e]=isNaN(o[e])?0:+a(r[e],e,r)}}return"function"!=typeof t&&(t=Nl(+t)),null==e&&(e=0),null==n&&(n=0),s.initialize=function(t){r=t,u()},s.strength=function(t){return arguments.length?(a="function"==typeof t?t:Nl(+t),u(),s):a},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Nl(+e),u(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(n=+t,s):n},s}function Wl(t){var e,n,r,i=Nl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Nl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Nl(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:Nl(+e),a(),o):t},o}function Gl(t){var e,n,r,i=Nl(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function a(){if(e){var o,a=e.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=Nl(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Nl(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Nl(+e),a(),o):t},o}function Jl(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xl(t){return(t=Jl(Math.abs(t)))?t[1]:NaN}var Ql,Zl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tf(t){if(!(e=Zl.exec(t)))throw new Error("invalid format: "+t);var e;return new ef({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ef(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function nf(t,e){var n=Jl(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}tf.prototype=ef.prototype,ef.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const rf={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nf(100*t,e),r:nf,s:function(t,e){var n=Jl(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Ql=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Jl(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function of(t){return t}var af,sf,uf,cf=Array.prototype.map,lf=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ff(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?of:(e=cf.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?of:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(cf.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=tf(t)).fill,n=t.align,f=t.sign,h=t.symbol,p=t.zero,d=t.width,y=t.comma,m=t.precision,g=t.trim,v=t.type;"n"===v?(y=!0,v="g"):rf[v]||(void 0===m&&(m=12),g=!0,v="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",_="$"===h?o:/[%p]/.test(v)?u:"",w=rf[v],x=/[defgprs%]/.test(v);function k(t){var i,o,u,h=b,k=_;if("c"===v)k=w(t)+k,t="";else{var O=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),m),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),O&&0==+t&&"+"!==f&&(O=!1),h=(O?"("===f?f:c:"-"===f||"("===f?"":f)+h,k=("s"===v?lf[8+Ql/3]:"")+k+(O&&"("===f?")":""),x)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?a+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}y&&!p&&(t=r(t,1/0));var S=h.length+t.length+k.length,E=S<d?new Array(d-S+1).join(e):"";switch(y&&p&&(t=r(E+t,E.length?d-k.length:1/0),E=""),n){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,S=E.length>>1)+h+t+k+E.slice(S);break;default:t=E+h+t+k}return s(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=tf(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Xl(e)/3))),i=Math.pow(10,-r),o=lf[8+r/3];return function(t){return n(i*t)+o}}}}function hf(t){return af=ff(t),sf=af.format,uf=af.formatPrefix,af}function pf(t){return Math.max(0,-Xl(Math.abs(t)))}function df(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xl(e)/3)))-Xl(Math.abs(t)))}function yf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xl(e)-Xl(t))+1}hf({thousands:",",grouping:[3],currency:["$",""]});var mf=1e-6,gf=1e-12,vf=Math.PI,bf=vf/2,_f=vf/4,wf=2*vf,xf=180/vf,kf=vf/180,Of=Math.abs,Sf=Math.atan,Ef=Math.atan2,Af=Math.cos,Tf=Math.ceil,Mf=Math.exp,Nf=(Math.floor,Math.hypot),Cf=Math.log,jf=Math.pow,Pf=Math.sin,Lf=Math.sign||function(t){return t>0?1:t<0?-1:0},If=Math.sqrt,Df=Math.tan;function Rf(t){return t>1?0:t<-1?vf:Math.acos(t)}function Bf(t){return t>1?bf:t<-1?-bf:Math.asin(t)}function Ff(t){return(t=Pf(t/2))*t}function $f(){}function Uf(t,e){t&&Kf.hasOwnProperty(t.type)&&Kf[t.type](t,e)}var qf={Feature:function(t,e){Uf(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Uf(n[r].geometry,e)}},Kf={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){zf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)zf(n[r],e,0)},Polygon:function(t,e){Vf(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Vf(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Uf(n[r],e)}};function zf(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Vf(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)zf(t[n],e,1);e.polygonEnd()}function Yf(t,e){t&&qf.hasOwnProperty(t.type)?qf[t.type](t,e):Uf(t,e)}var Hf,Wf,Gf,Jf,Xf,Qf,Zf,th,eh,nh,rh,ih,oh,ah,sh,uh,ch=new gt,lh=new gt,fh={point:$f,lineStart:$f,lineEnd:$f,polygonStart:function(){ch=new gt,fh.lineStart=hh,fh.lineEnd=ph},polygonEnd:function(){var t=+ch;lh.add(t<0?wf+t:t),this.lineStart=this.lineEnd=this.point=$f},sphere:function(){lh.add(wf)}};function hh(){fh.point=dh}function ph(){yh(Hf,Wf)}function dh(t,e){fh.point=yh,Hf=t,Wf=e,Gf=t*=kf,Jf=Af(e=(e*=kf)/2+_f),Xf=Pf(e)}function yh(t,e){var n=(t*=kf)-Gf,r=n>=0?1:-1,i=r*n,o=Af(e=(e*=kf)/2+_f),a=Pf(e),s=Xf*a,u=Jf*o+s*Af(i),c=s*r*Pf(i);ch.add(Ef(c,u)),Gf=t,Jf=o,Xf=a}function mh(t){return lh=new gt,Yf(t,fh),2*lh}function gh(t){return[Ef(t[1],t[0]),Bf(t[2])]}function vh(t){var e=t[0],n=t[1],r=Af(n);return[r*Af(e),r*Pf(e),Pf(n)]}function bh(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _h(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function wh(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xh(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function kh(t){var e=If(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Oh,Sh,Eh,Ah,Th,Mh,Nh,Ch,jh,Ph,Lh,Ih,Dh,Rh,Bh,Fh,$h={point:Uh,lineStart:Kh,lineEnd:zh,polygonStart:function(){$h.point=Vh,$h.lineStart=Yh,$h.lineEnd=Hh,ah=new gt,fh.polygonStart()},polygonEnd:function(){fh.polygonEnd(),$h.point=Uh,$h.lineStart=Kh,$h.lineEnd=zh,ch<0?(Qf=-(th=180),Zf=-(eh=90)):ah>mf?eh=90:ah<-mf&&(Zf=-90),uh[0]=Qf,uh[1]=th},sphere:function(){Qf=-(th=180),Zf=-(eh=90)}};function Uh(t,e){sh.push(uh=[Qf=t,th=t]),e<Zf&&(Zf=e),e>eh&&(eh=e)}function qh(t,e){var n=vh([t*kf,e*kf]);if(oh){var r=_h(oh,n),i=_h([r[1],-r[0],0],r);kh(i),i=gh(i);var o,a=t-nh,s=a>0?1:-1,u=i[0]*xf*s,c=Of(a)>180;c^(s*nh<u&&u<s*t)?(o=i[1]*xf)>eh&&(eh=o):c^(s*nh<(u=(u+360)%360-180)&&u<s*t)?(o=-i[1]*xf)<Zf&&(Zf=o):(e<Zf&&(Zf=e),e>eh&&(eh=e)),c?t<nh?Wh(Qf,t)>Wh(Qf,th)&&(th=t):Wh(t,th)>Wh(Qf,th)&&(Qf=t):th>=Qf?(t<Qf&&(Qf=t),t>th&&(th=t)):t>nh?Wh(Qf,t)>Wh(Qf,th)&&(th=t):Wh(t,th)>Wh(Qf,th)&&(Qf=t)}else sh.push(uh=[Qf=t,th=t]);e<Zf&&(Zf=e),e>eh&&(eh=e),oh=n,nh=t}function Kh(){$h.point=qh}function zh(){uh[0]=Qf,uh[1]=th,$h.point=Uh,oh=null}function Vh(t,e){if(oh){var n=t-nh;ah.add(Of(n)>180?n+(n>0?360:-360):n)}else rh=t,ih=e;fh.point(t,e),qh(t,e)}function Yh(){fh.lineStart()}function Hh(){Vh(rh,ih),fh.lineEnd(),Of(ah)>mf&&(Qf=-(th=180)),uh[0]=Qf,uh[1]=th,oh=null}function Wh(t,e){return(e-=t)<0?e+360:e}function Gh(t,e){return t[0]-e[0]}function Jh(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Xh(t){var e,n,r,i,o,a,s;if(eh=th=-(Qf=Zf=1/0),sh=[],Yf(t,$h),n=sh.length){for(sh.sort(Gh),e=1,o=[r=sh[0]];e<n;++e)Jh(r,(i=sh[e])[0])||Jh(r,i[1])?(Wh(r[0],i[1])>Wh(r[0],r[1])&&(r[1]=i[1]),Wh(i[0],r[1])>Wh(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=Wh(r[1],i[0]))>a&&(a=s,Qf=i[0],th=r[1])}return sh=uh=null,Qf===1/0||Zf===1/0?[[NaN,NaN],[NaN,NaN]]:[[Qf,Zf],[th,eh]]}var Qh={sphere:$f,point:Zh,lineStart:ep,lineEnd:ip,polygonStart:function(){Qh.lineStart=op,Qh.lineEnd=ap},polygonEnd:function(){Qh.lineStart=ep,Qh.lineEnd=ip}};function Zh(t,e){t*=kf;var n=Af(e*=kf);tp(n*Af(t),n*Pf(t),Pf(e))}function tp(t,e,n){++Oh,Eh+=(t-Eh)/Oh,Ah+=(e-Ah)/Oh,Th+=(n-Th)/Oh}function ep(){Qh.point=np}function np(t,e){t*=kf;var n=Af(e*=kf);Rh=n*Af(t),Bh=n*Pf(t),Fh=Pf(e),Qh.point=rp,tp(Rh,Bh,Fh)}function rp(t,e){t*=kf;var n=Af(e*=kf),r=n*Af(t),i=n*Pf(t),o=Pf(e),a=Ef(If((a=Bh*o-Fh*i)*a+(a=Fh*r-Rh*o)*a+(a=Rh*i-Bh*r)*a),Rh*r+Bh*i+Fh*o);Sh+=a,Mh+=a*(Rh+(Rh=r)),Nh+=a*(Bh+(Bh=i)),Ch+=a*(Fh+(Fh=o)),tp(Rh,Bh,Fh)}function ip(){Qh.point=Zh}function op(){Qh.point=sp}function ap(){up(Ih,Dh),Qh.point=Zh}function sp(t,e){Ih=t,Dh=e,t*=kf,e*=kf,Qh.point=up;var n=Af(e);Rh=n*Af(t),Bh=n*Pf(t),Fh=Pf(e),tp(Rh,Bh,Fh)}function up(t,e){t*=kf;var n=Af(e*=kf),r=n*Af(t),i=n*Pf(t),o=Pf(e),a=Bh*o-Fh*i,s=Fh*r-Rh*o,u=Rh*i-Bh*r,c=Nf(a,s,u),l=Bf(c),f=c&&-l/c;jh.add(f*a),Ph.add(f*s),Lh.add(f*u),Sh+=l,Mh+=l*(Rh+(Rh=r)),Nh+=l*(Bh+(Bh=i)),Ch+=l*(Fh+(Fh=o)),tp(Rh,Bh,Fh)}function cp(t){Oh=Sh=Eh=Ah=Th=Mh=Nh=Ch=0,jh=new gt,Ph=new gt,Lh=new gt,Yf(t,Qh);var e=+jh,n=+Ph,r=+Lh,i=Nf(e,n,r);return i<gf&&(e=Mh,n=Nh,r=Ch,Sh<mf&&(e=Eh,n=Ah,r=Th),(i=Nf(e,n,r))<gf)?[NaN,NaN]:[Ef(n,e)*xf,Bf(r/i)*xf]}function lp(t){return function(){return t}}function fp(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function hp(t,e){return Of(t)>vf&&(t-=Math.round(t/wf)*wf),[t,e]}function pp(t,e,n){return(t%=wf)?e||n?fp(yp(t),mp(e,n)):yp(t):e||n?mp(e,n):hp}function dp(t){return function(e,n){return Of(e+=t)>vf&&(e-=Math.round(e/wf)*wf),[e,n]}}function yp(t){var e=dp(t);return e.invert=dp(-t),e}function mp(t,e){var n=Af(t),r=Pf(t),i=Af(e),o=Pf(e);function a(t,e){var a=Af(e),s=Af(t)*a,u=Pf(t)*a,c=Pf(e),l=c*n+s*r;return[Ef(u*i-l*o,s*n-c*r),Bf(l*i+u*o)]}return a.invert=function(t,e){var a=Af(e),s=Af(t)*a,u=Pf(t)*a,c=Pf(e),l=c*i-u*o;return[Ef(u*i+c*o,s*n+l*r),Bf(l*n-s*r)]},a}function gp(t){function e(e){return(e=t(e[0]*kf,e[1]*kf))[0]*=xf,e[1]*=xf,e}return t=pp(t[0]*kf,t[1]*kf,t.length>2?t[2]*kf:0),e.invert=function(e){return(e=t.invert(e[0]*kf,e[1]*kf))[0]*=xf,e[1]*=xf,e},e}function vp(t,e,n,r,i,o){if(n){var a=Af(e),s=Pf(e),u=r*n;null==i?(i=e+r*wf,o=e-u/2):(i=bp(a,i),o=bp(a,o),(r>0?i<o:i>o)&&(i+=r*wf));for(var c,l=i;r>0?l>o:l<o;l-=u)c=gh([a,-s*Af(l),-s*Pf(l)]),t.point(c[0],c[1])}}function bp(t,e){(e=vh(e))[0]-=t,kh(e);var n=Rf(-e[1]);return((-e[2]<0?-n:n)+wf-mf)%wf}function _p(){var t,e,n=lp([0,0]),r=lp(90),i=lp(6),o={point:function(n,r){t.push(n=e(n,r)),n[0]*=xf,n[1]*=xf}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*kf,u=i.apply(this,arguments)*kf;return t=[],e=pp(-a[0]*kf,-a[1]*kf,0).invert,vp(o,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:lp([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:lp(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:lp(+t),a):i},a}function wp(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:$f,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xp(t,e){return Of(t[0]-e[0])<mf&&Of(t[1]-e[1])<mf}function kp(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Op(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(xp(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2*mf}s.push(n=new kp(r,t,null,!0)),u.push(n.o=new kp(r,null,n,!1)),s.push(n=new kp(a,t,null,!1)),u.push(n.o=new kp(a,null,n,!0))}})),s.length){for(u.sort(e),Sp(s),Sp(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,p=!p}while(!h.v);i.lineEnd()}}}function Sp(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ep(t){return Of(t[0])<=vf?t[0]:Lf(t[0])*((Of(t[0])+vf)%wf-vf)}function Ap(t,e){var n=Ep(e),r=e[1],i=Pf(r),o=[Pf(n),-Af(n),0],a=0,s=0,u=new gt;1===i?r=bf+mf:-1===i&&(r=-bf-mf);for(var c=0,l=t.length;c<l;++c)if(h=(f=t[c]).length)for(var f,h,p=f[h-1],d=Ep(p),y=p[1]/2+_f,m=Pf(y),g=Af(y),v=0;v<h;++v,d=_,m=x,g=k,p=b){var b=f[v],_=Ep(b),w=b[1]/2+_f,x=Pf(w),k=Af(w),O=_-d,S=O>=0?1:-1,E=S*O,A=E>vf,T=m*x;if(u.add(Ef(T*S*Pf(E),g*k+T*Af(E))),a+=A?O+S*wf:O,A^d>=n^_>=n){var M=_h(vh(p),vh(b));kh(M);var N=_h(o,M);kh(N);var C=(A^O>=0?-1:1)*Bf(N[2]);(r>C||r===C&&(M[0]||M[1]))&&(s+=A^O>=0?1:-1)}}return(a<-mf||a<mf&&u<-gf)^1&s}function Tp(t,e,n,r){return function(i){var o,a,s,u=e(i),c=wp(),l=e(c),f=!1,h={point:p,lineStart:y,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=v,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=y,h.lineEnd=m,a=ge(a);var t=Ap(o,r);a.length?(f||(i.polygonStart(),f=!0),Op(a,Np,t,n,i)):t&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(e,n){t(e,n)&&i.point(e,n)}function d(t,e){u.point(t,e)}function y(){h.point=d,u.lineStart()}function m(){h.point=p,u.lineEnd()}function g(t,e){s.push([t,e]),l.point(t,e)}function v(){l.lineStart(),s=[]}function b(){g(s[0][0],s[0][1]),l.lineEnd();var t,e,n,r,u=l.clean(),h=c.result(),p=h.length;if(s.pop(),o.push(s),s=null,p)if(1&u){if((e=(n=h[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else p>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Mp))}return h}}function Mp(t){return t.length>1}function Np(t,e){return((t=t.x)[0]<0?t[1]-bf-mf:bf-t[1])-((e=e.x)[0]<0?e[1]-bf-mf:bf-e[1])}hp.invert=hp;const Cp=Tp((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?vf:-vf,u=Of(o-n);Of(u-vf)<mf?(t.point(n,r=(r+a)/2>0?bf:-bf),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=vf&&(Of(n-i)<mf&&(n-=i*mf),Of(o-s)<mf&&(o-=s*mf),r=function(t,e,n,r){var i,o,a=Pf(t-n);return Of(a)>mf?Sf((Pf(e)*(o=Af(r))*Pf(n)-Pf(r)*(i=Af(e))*Pf(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*bf,r.point(-vf,i),r.point(0,i),r.point(vf,i),r.point(vf,0),r.point(vf,-i),r.point(0,-i),r.point(-vf,-i),r.point(-vf,0),r.point(-vf,i);else if(Of(t[0]-e[0])>mf){var o=t[0]<e[0]?vf:-vf;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-vf,-bf]);function jp(t){var e=Af(t),n=6*kf,r=e>0,i=Of(e)>mf;function o(t,n){return Af(t)*Af(n)>e}function a(t,n,r){var i=[1,0,0],o=_h(vh(t),vh(n)),a=bh(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=e*a/u,l=-e*s/u,f=_h(i,o),h=xh(i,c);wh(h,xh(o,l));var p=f,d=bh(h,p),y=bh(p,p),m=d*d-y*(bh(h,h)-1);if(!(m<0)){var g=If(m),v=xh(p,(-d-g)/y);if(wh(v,h),v=gh(v),!r)return v;var b,_=t[0],w=n[0],x=t[1],k=n[1];w<_&&(b=_,_=w,w=b);var O=w-_,S=Of(O-vf)<mf;if(!S&&k<x&&(b=x,x=k,k=b),S||O<mf?S?x+k>0^v[1]<(Of(v[0]-_)<mf?x:k):x<=v[1]&&v[1]<=k:O>vf^(_<=v[0]&&v[0]<=w)){var E=xh(p,(-d+g)/y);return wh(E,h),[v,gh(E)]}}}function s(e,n){var i=r?t:vf-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Tp(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(f,h){var p,d=[f,h],y=o(f,h),m=r?y?0:s(f,h):y?s(f+(f<0?vf:-vf),h):0;if(!e&&(c=u=y)&&t.lineStart(),y!==u&&(!(p=a(e,d))||xp(e,p)||xp(d,p))&&(d[2]=1),y!==u)l=0,y?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^y){var g;m&n||!(g=a(d,e,!0))||(l=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!y||e&&xp(e,d)||t.point(d[0],d[1]),e=d,u=y,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(e,r,i,o){vp(o,t,n,i,e,r)}),r?[0,-t]:[-vf,t-vf])}var Pp,Lp,Ip,Dp,Rp=1e9,Bp=-Rp;function Fp(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==f);else c.point(o[0],o[1])}function a(r,i){return Of(r[0]-t)<mf?i>0?0:3:Of(r[0]-n)<mf?i>0?2:1:Of(r[1]-e)<mf?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,f,h,p,d,y,m,g,v,b=a,_=wp(),w={point:x,lineStart:function(){w.point=k,c&&c.push(l=[]),g=!0,m=!1,d=y=NaN},lineEnd:function(){u&&(k(f,h),p&&m&&_.rejoin(),u.push(_.result())),w.point=x,m&&b.lineEnd()},polygonStart:function(){b=_,u=[],c=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,f=s[0],h=f[0],p=f[1];u<l;++u)o=h,a=p,h=(f=s[u])[0],p=f[1],a<=r?p>r&&(h-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(h-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=v&&e,i=(u=ge(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Op(u,s,e,o,a),a.polygonEnd()),b=a,u=c=l=null}};function x(t,e){i(t,e)&&b.point(t,e)}function k(o,a){var s=i(o,a);if(c&&l.push([o,a]),g)f=o,h=a,p=s,g=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&m)b.point(o,a);else{var u=[d=Math.max(Bp,Math.min(Rp,d)),y=Math.max(Bp,Math.min(Rp,y))],_=[o=Math.max(Bp,Math.min(Rp,o)),a=Math.max(Bp,Math.min(Rp,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,f=e[0]-s,h=e[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*f,t[1]=u+c*h),l<1&&(e[0]=s+l*f,e[1]=u+l*h),!0}}}}}(u,_,t,e,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(m||(b.lineStart(),b.point(u[0],u[1])),b.point(_[0],_[1]),s||b.lineEnd(),v=!1)}d=o,y=a,m=s}return w}}function $p(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Fp(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}var Up={sphere:$f,point:$f,lineStart:function(){Up.point=Kp,Up.lineEnd=qp},lineEnd:$f,polygonStart:$f,polygonEnd:$f};function qp(){Up.point=Up.lineEnd=$f}function Kp(t,e){Lp=t*=kf,Ip=Pf(e*=kf),Dp=Af(e),Up.point=zp}function zp(t,e){t*=kf;var n=Pf(e*=kf),r=Af(e),i=Of(t-Lp),o=Af(i),a=r*Pf(i),s=Dp*n-Ip*r*o,u=Ip*n+Dp*r*o;Pp.add(Ef(If(a*a+s*s),u)),Lp=t,Ip=n,Dp=r}function Vp(t){return Pp=new gt,Yf(t,Up),+Pp}var Yp=[null,null],Hp={type:"LineString",coordinates:Yp};function Wp(t,e){return Yp[0]=t,Yp[1]=e,Vp(Hp)}var Gp={Feature:function(t,e){return Xp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Xp(n[r].geometry,e))return!0;return!1}},Jp={Sphere:function(){return!0},Point:function(t,e){return Qp(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Qp(n[r],e))return!0;return!1},LineString:function(t,e){return Zp(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Zp(n[r],e))return!0;return!1},Polygon:function(t,e){return td(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(td(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Xp(n[r],e))return!0;return!1}};function Xp(t,e){return!(!t||!Jp.hasOwnProperty(t.type))&&Jp[t.type](t,e)}function Qp(t,e){return 0===Wp(t,e)}function Zp(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Wp(t[o],e)))return!0;if(o>0&&(i=Wp(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<gf*i)return!0;n=r}return!1}function td(t,e){return!!Ap(t.map(ed),nd(e))}function ed(t){return(t=t.map(nd)).pop(),t}function nd(t){return[t[0]*kf,t[1]*kf]}function rd(t,e){return(t&&Gp.hasOwnProperty(t.type)?Gp[t.type]:Xp)(t,e)}function id(t,e,n){var r=we(t,e-mf,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function od(t,e,n){var r=we(t,e-mf,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function ad(){var t,e,n,r,i,o,a,s,u,c,l,f,h=10,p=h,d=90,y=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:v()}}function v(){return we(Tf(r/d)*d,n,d).map(l).concat(we(Tf(s/y)*y,a,y).map(f)).concat(we(Tf(e/h)*h,t,h).filter((function(t){return Of(t%d)>mf})).map(u)).concat(we(Tf(o/p)*p,i,p).filter((function(t){return Of(t%y)>mf})).map(c))}return g.lines=function(){return v().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(a).slice(1),l(n).reverse().slice(1),f(s).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),g.precision(m)):[[r,s],[n,a]]},g.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),g.precision(m)):[[e,o],[t,i]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(d=+t[0],y=+t[1],g):[d,y]},g.stepMinor=function(t){return arguments.length?(h=+t[0],p=+t[1],g):[h,p]},g.precision=function(h){return arguments.length?(m=+h,u=id(o,i,90),c=od(e,t,m),l=id(s,a,90),f=od(r,n,m),g):m},g.extentMajor([[-180,-90+mf],[180,90-mf]]).extentMinor([[-180,-80-mf],[180,80+mf]])}function sd(){return ad()()}function ud(t,e){var n=t[0]*kf,r=t[1]*kf,i=e[0]*kf,o=e[1]*kf,a=Af(r),s=Pf(r),u=Af(o),c=Pf(o),l=a*Af(n),f=a*Pf(n),h=u*Af(i),p=u*Pf(i),d=2*Bf(If(Ff(o-r)+a*u*Ff(i-n))),y=Pf(d),m=d?function(t){var e=Pf(t*=d)/y,n=Pf(d-t)/y,r=n*l+e*h,i=n*f+e*p,o=n*s+e*c;return[Ef(i,r)*xf,Ef(o,If(r*r+i*i))*xf]}:function(){return[n*xf,r*xf]};return m.distance=d,m}const cd=t=>t;var ld,fd,hd,pd,dd=new gt,yd=new gt,md={point:$f,lineStart:$f,lineEnd:$f,polygonStart:function(){md.lineStart=gd,md.lineEnd=_d},polygonEnd:function(){md.lineStart=md.lineEnd=md.point=$f,dd.add(Of(yd)),yd=new gt},result:function(){var t=dd/2;return dd=new gt,t}};function gd(){md.point=vd}function vd(t,e){md.point=bd,ld=hd=t,fd=pd=e}function bd(t,e){yd.add(pd*t-hd*e),hd=t,pd=e}function _d(){bd(ld,fd)}const wd=md;var xd=1/0,kd=xd,Od=-xd,Sd=Od,Ed={point:function(t,e){t<xd&&(xd=t),t>Od&&(Od=t),e<kd&&(kd=e),e>Sd&&(Sd=e)},lineStart:$f,lineEnd:$f,polygonStart:$f,polygonEnd:$f,result:function(){var t=[[xd,kd],[Od,Sd]];return Od=Sd=-(kd=xd=1/0),t}};const Ad=Ed;var Td,Md,Nd,Cd,jd=0,Pd=0,Ld=0,Id=0,Dd=0,Rd=0,Bd=0,Fd=0,$d=0,Ud={point:qd,lineStart:Kd,lineEnd:Yd,polygonStart:function(){Ud.lineStart=Hd,Ud.lineEnd=Wd},polygonEnd:function(){Ud.point=qd,Ud.lineStart=Kd,Ud.lineEnd=Yd},result:function(){var t=$d?[Bd/$d,Fd/$d]:Rd?[Id/Rd,Dd/Rd]:Ld?[jd/Ld,Pd/Ld]:[NaN,NaN];return jd=Pd=Ld=Id=Dd=Rd=Bd=Fd=$d=0,t}};function qd(t,e){jd+=t,Pd+=e,++Ld}function Kd(){Ud.point=zd}function zd(t,e){Ud.point=Vd,qd(Nd=t,Cd=e)}function Vd(t,e){var n=t-Nd,r=e-Cd,i=If(n*n+r*r);Id+=i*(Nd+t)/2,Dd+=i*(Cd+e)/2,Rd+=i,qd(Nd=t,Cd=e)}function Yd(){Ud.point=qd}function Hd(){Ud.point=Gd}function Wd(){Jd(Td,Md)}function Gd(t,e){Ud.point=Jd,qd(Td=Nd=t,Md=Cd=e)}function Jd(t,e){var n=t-Nd,r=e-Cd,i=If(n*n+r*r);Id+=i*(Nd+t)/2,Dd+=i*(Cd+e)/2,Rd+=i,Bd+=(i=Cd*t-Nd*e)*(Nd+t),Fd+=i*(Cd+e),$d+=3*i,qd(Nd=t,Cd=e)}const Xd=Ud;function Qd(t){this._context=t}Qd.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,wf)}},result:$f};var Zd,ty,ey,ny,ry,iy=new gt,oy={point:$f,lineStart:function(){oy.point=ay},lineEnd:function(){Zd&&sy(ty,ey),oy.point=$f},polygonStart:function(){Zd=!0},polygonEnd:function(){Zd=null},result:function(){var t=+iy;return iy=new gt,t}};function ay(t,e){oy.point=sy,ty=ny=t,ey=ry=e}function sy(t,e){ny-=t,ry-=e,iy.add(If(ny*ny+ry*ry)),ny=t,ry=e}const uy=oy;let cy,ly,fy,hy;class py{constructor(t){this._append=null==t?dy:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return dy;if(e!==cy){const t=10**e;cy=e,ly=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return ly}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==fy||this._append!==ly){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,fy=t,ly=this._append,hy=this._,this._=e}this._+=hy}}result(){const t=this._;return this._="",t.length?t:null}}function dy(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function yy(t,e){let n,r,i=3,o=4.5;function a(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Yf(t,n(r))),r.result()}return a.area=function(t){return Yf(t,n(wd)),wd.result()},a.measure=function(t){return Yf(t,n(uy)),uy.result()},a.bounds=function(t){return Yf(t,n(Ad)),Ad.result()},a.centroid=function(t){return Yf(t,n(Xd)),Xd.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,cd):(t=e).stream,a):t},a.context=function(t){return arguments.length?(r=null==t?(e=null,new py(i)):new Qd(e=t),"function"!=typeof o&&r.pointRadius(o),a):e},a.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),a):o},a.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new py(i)),a},a.projection(t).digits(i).context(e)}function my(t){return{stream:gy(t)}}function gy(t){return function(e){var n=new vy;for(var r in t)n[r]=t[r];return n.stream=e,n}}function vy(){}function by(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Yf(n,t.stream(Ad)),e(Ad.result()),null!=r&&t.clipExtent(r),t}function _y(t,e,n){return by(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function wy(t,e,n){return _y(t,[[0,0],e],n)}function xy(t,e,n){return by(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function ky(t,e,n){return by(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}vy.prototype={constructor:vy,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Oy=16,Sy=Af(30*kf);function Ey(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,f,h,p,d,y,m){var g=c-r,v=l-i,b=g*g+v*v;if(b>4*e&&y--){var _=a+h,w=s+p,x=u+d,k=If(_*_+w*w+x*x),O=Bf(x/=k),S=Of(Of(x)-1)<mf||Of(o-f)<mf?(o+f)/2:Ef(w,_),E=t(S,O),A=E[0],T=E[1],M=A-r,N=T-i,C=v*M-g*N;(C*C/b>e||Of((g*M+v*N)/b-.5)>.3||a*h+s*p+u*d<Sy)&&(n(r,i,o,a,s,u,A,T,S,_/=k,w/=k,x,y,m),m.point(A,T),n(A,T,S,_,w,x,c,l,f,h,p,d,y,m))}}return function(e){var r,i,o,a,s,u,c,l,f,h,p,d,y={point:m,lineStart:g,lineEnd:b,polygonStart:function(){e.polygonStart(),y.lineStart=_},polygonEnd:function(){e.polygonEnd(),y.lineStart=g}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){l=NaN,y.point=v,e.lineStart()}function v(r,i){var o=vh([r,i]),a=t(r,i);n(l,f,c,h,p,d,l=a[0],f=a[1],c=r,h=o[0],p=o[1],d=o[2],Oy,e),e.point(l,f)}function b(){y.point=m,e.lineEnd()}function _(){g(),y.point=w,y.lineEnd=x}function w(t,e){v(r=t,e),i=l,o=f,a=h,s=p,u=d,y.point=v}function x(){n(l,f,c,h,p,d,i,o,r,a,s,u,Oy,e),y.lineEnd=b,b()}return y}}(t,e):function(t){return gy({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Ay=gy({point:function(t,e){this.stream.point(t*kf,e*kf)}});function Ty(t,e,n,r,i,o){if(!o)return function(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}(t,e,n,r,i);var a=Af(o),s=Pf(o),u=a*t,c=s*t,l=a/t,f=s/t,h=(s*n-a*e)/t,p=(s*e+a*n)/t;function d(t,o){return[u*(t*=r)-c*(o*=i)+e,n-c*t-u*o]}return d.invert=function(t,e){return[r*(l*t-f*e+h),i*(p-f*t-l*e)]},d}function My(t){return Ny((function(){return t}))()}function Ny(t){var e,n,r,i,o,a,s,u,c,l,f=150,h=480,p=250,d=0,y=0,m=0,g=0,v=0,b=0,_=1,w=1,x=null,k=Cp,O=null,S=cd,E=.5;function A(t){return u(t[0]*kf,t[1]*kf)}function T(t){return(t=u.invert(t[0],t[1]))&&[t[0]*xf,t[1]*xf]}function M(){var t=Ty(f,0,0,_,w,b).apply(null,e(d,y)),r=Ty(f,h-t[0],p-t[1],_,w,b);return n=pp(m,g,v),s=fp(e,r),u=fp(n,s),a=Ey(s,E),N()}function N(){return c=l=null,A}return A.stream=function(t){return c&&l===t?c:c=Ay(function(t){return gy({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(l=t)))))},A.preclip=function(t){return arguments.length?(k=t,x=void 0,N()):k},A.postclip=function(t){return arguments.length?(S=t,O=r=i=o=null,N()):S},A.clipAngle=function(t){return arguments.length?(k=+t?jp(x=t*kf):(x=null,Cp),N()):x*xf},A.clipExtent=function(t){return arguments.length?(S=null==t?(O=r=i=o=null,cd):Fp(O=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),N()):null==O?null:[[O,r],[i,o]]},A.scale=function(t){return arguments.length?(f=+t,M()):f},A.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],M()):[h,p]},A.center=function(t){return arguments.length?(d=t[0]%360*kf,y=t[1]%360*kf,M()):[d*xf,y*xf]},A.rotate=function(t){return arguments.length?(m=t[0]%360*kf,g=t[1]%360*kf,v=t.length>2?t[2]%360*kf:0,M()):[m*xf,g*xf,v*xf]},A.angle=function(t){return arguments.length?(b=t%360*kf,M()):b*xf},A.reflectX=function(t){return arguments.length?(_=t?-1:1,M()):_<0},A.reflectY=function(t){return arguments.length?(w=t?-1:1,M()):w<0},A.precision=function(t){return arguments.length?(a=Ey(s,E=t*t),N()):If(E)},A.fitExtent=function(t,e){return _y(A,t,e)},A.fitSize=function(t,e){return wy(A,t,e)},A.fitWidth=function(t,e){return xy(A,t,e)},A.fitHeight=function(t,e){return ky(A,t,e)},function(){return e=t.apply(this,arguments),A.invert=e.invert&&T,M()}}function Cy(t){var e=0,n=vf/3,r=Ny(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*kf,n=t[1]*kf):[e*xf,n*xf]},i}function jy(t,e){var n=Pf(t),r=(n+Pf(e))/2;if(Of(r)<mf)return function(t){var e=Af(t);function n(t,n){return[t*e,Pf(n)/e]}return n.invert=function(t,n){return[t/e,Bf(n*e)]},n}(t);var i=1+n*(2*r-n),o=If(i)/r;function a(t,e){var n=If(i-2*r*Pf(e))/r;return[n*Pf(t*=r),o-n*Af(t)]}return a.invert=function(t,e){var n=o-e,a=Ef(t,Of(n))*Lf(n);return n*r<0&&(a-=vf*Lf(t)*Lf(n)),[a/r,Bf((i-(t*t+n*n)*r*r)/(2*r))]},a}function Py(){return Cy(jy).scale(155.424).center([0,33.6442])}function Ly(){return Py().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Iy(){var t,e,n,r,i,o,a=Ly(),s=Py().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Py().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function f(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),f()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(c),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+mf,l+.12*e+mf],[o-.214*e-mf,l+.234*e-mf]]).stream(c),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+mf,l+.166*e+mf],[o-.115*e-mf,l+.234*e-mf]]).stream(c),f()},l.fitExtent=function(t,e){return _y(l,t,e)},l.fitSize=function(t,e){return wy(l,t,e)},l.fitWidth=function(t,e){return xy(l,t,e)},l.fitHeight=function(t,e){return ky(l,t,e)},l.scale(1070)}function Dy(t){return function(e,n){var r=Af(e),i=Af(n),o=t(r*i);return o===1/0?[2,0]:[o*i*Pf(e),o*Pf(n)]}}function Ry(t){return function(e,n){var r=If(e*e+n*n),i=t(r),o=Pf(i),a=Af(i);return[Ef(e*o,r*a),Bf(r&&n*o/r)]}}var By=Dy((function(t){return If(2/(1+t))}));function Fy(){return My(By).scale(124.75).clipAngle(179.999)}By.invert=Ry((function(t){return 2*Bf(t/2)}));var $y=Dy((function(t){return(t=Rf(t))&&t/Pf(t)}));function Uy(){return My($y).scale(79.4188).clipAngle(179.999)}function qy(t,e){return[t,Cf(Df((bf+e)/2))]}function Ky(){return zy(qy).scale(961/wf)}function zy(t){var e,n,r,i=My(t),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,c=null;function l(){var o=vf*a(),s=i(gp(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:t===qy?[[Math.max(s[0]-o,c),e],[Math.min(s[0]+o,n),r]]:[[c,Math.max(s[1]-o,e)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),l()):a()},i.translate=function(t){return arguments.length?(s(t),l()):s()},i.center=function(t){return arguments.length?(o(t),l()):o()},i.clipExtent=function(t){return arguments.length?(null==t?c=e=n=r=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),l()):null==c?null:[[c,e],[n,r]]},l()}function Vy(t){return Df((bf+t)/2)}function Yy(t,e){var n=Af(t),r=t===e?Pf(t):Cf(n/Af(e))/Cf(Vy(e)/Vy(t)),i=n*jf(Vy(t),r)/r;if(!r)return qy;function o(t,e){i>0?e<-bf+mf&&(e=-bf+mf):e>bf-mf&&(e=bf-mf);var n=i/jf(Vy(e),r);return[n*Pf(r*t),i-n*Af(r*t)]}return o.invert=function(t,e){var n=i-e,o=Lf(r)*If(t*t+n*n),a=Ef(t,Of(n))*Lf(n);return n*r<0&&(a-=vf*Lf(t)*Lf(n)),[a/r,2*Sf(jf(i/o,1/r))-bf]},o}function Hy(){return Cy(Yy).scale(109.5).parallels([30,30])}function Wy(t,e){return[t,e]}function Gy(){return My(Wy).scale(152.63)}function Jy(t,e){var n=Af(t),r=t===e?Pf(t):(n-Af(e))/(e-t),i=n/r+t;if(Of(r)<mf)return Wy;function o(t,e){var n=i-e,o=r*t;return[n*Pf(o),i-n*Af(o)]}return o.invert=function(t,e){var n=i-e,o=Ef(t,Of(n))*Lf(n);return n*r<0&&(o-=vf*Lf(t)*Lf(n)),[o/r,i-Lf(r)*If(t*t+n*n)]},o}function Xy(){return Cy(Jy).scale(131.154).center([0,13.9389])}$y.invert=Ry((function(t){return t})),qy.invert=function(t,e){return[t,2*Sf(Mf(e))-bf]},Wy.invert=Wy;var Qy=1.340264,Zy=-.081106,tm=893e-6,em=.003796,nm=If(3)/2;function rm(t,e){var n=Bf(nm*Pf(e)),r=n*n,i=r*r*r;return[t*Af(n)/(nm*(Qy+3*Zy*r+i*(7*tm+9*em*r))),n*(Qy+Zy*r+i*(tm+em*r))]}function im(){return My(rm).scale(177.158)}function om(t,e){var n=Af(e),r=Af(t)*n;return[n*Pf(t)/r,Pf(e)/r]}function am(){return My(om).scale(144.049).clipAngle(60)}function sm(){var t,e,n,r,i,o,a,s=1,u=0,c=0,l=1,f=1,h=0,p=null,d=1,y=1,m=gy({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),g=cd;function v(){return d=s*l,y=s*f,o=a=null,b}function b(n){var r=n[0]*d,i=n[1]*y;if(h){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+c]}return b.invert=function(n){var r=n[0]-u,i=n[1]-c;if(h){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/d,i/y]},b.stream=function(t){return o&&a===t?o:o=m(g(a=t))},b.postclip=function(t){return arguments.length?(g=t,p=n=r=i=null,v()):g},b.clipExtent=function(t){return arguments.length?(g=null==t?(p=n=r=i=null,cd):Fp(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),v()):null==p?null:[[p,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,v()):s},b.translate=function(t){return arguments.length?(u=+t[0],c=+t[1],v()):[u,c]},b.angle=function(n){return arguments.length?(e=Pf(h=n%360*kf),t=Af(h),v()):h*xf},b.reflectX=function(t){return arguments.length?(l=t?-1:1,v()):l<0},b.reflectY=function(t){return arguments.length?(f=t?-1:1,v()):f<0},b.fitExtent=function(t,e){return _y(b,t,e)},b.fitSize=function(t,e){return wy(b,t,e)},b.fitWidth=function(t,e){return xy(b,t,e)},b.fitHeight=function(t,e){return ky(b,t,e)},b}function um(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function cm(){return My(um).scale(175.295)}function lm(t,e){return[Af(e)*Pf(t),Pf(e)]}function fm(){return My(lm).scale(249.5).clipAngle(90+mf)}function hm(t,e){var n=Af(e),r=1+Af(t)*n;return[n*Pf(t)/r,Pf(e)/r]}function pm(){return My(hm).scale(250).clipAngle(142)}function dm(t,e){return[Cf(Df((bf+e)/2)),-t]}function ym(){var t=zy(dm),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function mm(t,e){return t.parent===e.parent?1:2}function gm(t,e){return t+e.x}function vm(t,e){return Math.max(t,e.y)}function bm(){var t=mm,e=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(gm,0)/t.length}(n),e.y=function(t){return 1+t.reduce(vm,0)}(n)):(e.x=o?a+=t(e,o):0,e.y=0,o=e)}));var s=function(t){for(var e;e=t.children;)t=e[0];return t}(i),u=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),c=s.x-t(s,u)/2,l=u.x+t(u,s)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-c)/(l-c)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function _m(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function wm(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=km)):void 0===e&&(e=xm);for(var n,r,i,o,a,s=new Em(t),u=[s];n=u.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new Em(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Sm)}function xm(t){return t.children}function km(t){return Array.isArray(t)?t[1]:null}function Om(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Sm(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Em(t){this.data=t,this.depth=this.height=0,this.parent=null}function Am(t){return null==t?null:Tm(t)}function Tm(t){if("function"!=typeof t)throw new Error;return t}function Mm(){return 0}function Nm(t){return function(){return t}}rm.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Qy+Zy*i+o*(tm+em*i))-e)/(Qy+3*Zy*i+o*(7*tm+9*em*i)))*r)*i*i,!(Of(n)<gf));++a);return[nm*t*(Qy+3*Zy*i+o*(7*tm+9*em*i))/Af(r),Bf(Pf(r)/nm)]},om.invert=Ry(Sf),um.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Of(n)>mf&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},lm.invert=Ry(Bf),hm.invert=Ry((function(t){return 2*Sf(t)})),dm.invert=function(t,e){return[-e,2*Sf(Mf(t))-bf]},Em.prototype=wm.prototype={constructor:Em,count:function(){return this.eachAfter(_m)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++u,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return wm(this).eachBefore(Om)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};const Cm=1664525,jm=1013904223,Pm=4294967296;function Lm(){let t=1;return()=>(t=(Cm*t+jm)%Pm)/Pm}function Im(t){return Dm(t,Lm())}function Dm(t,e){for(var n,r,i=0,o=(t=function(t,e){let n,r,i=t.length;for(;i;)r=e()*i--|0,n=t[i],t[i]=t[r],t[r]=n;return t}(Array.from(t),e)).length,a=[];i<o;)n=t[i],r&&Fm(r,n)?++i:(r=Um(a=Rm(a,n)),i=0);return r}function Rm(t,e){var n,r;if($m(e,t))return[e];for(n=0;n<t.length;++n)if(Bm(e,t[n])&&$m(qm(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Bm(qm(t[n],t[r]),e)&&Bm(qm(t[n],e),t[r])&&Bm(qm(t[r],e),t[n])&&$m(Km(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Bm(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Fm(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function $m(t,e){for(var n=0;n<e.length;++n)if(!Fm(t,e[n]))return!1;return!0}function Um(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return qm(t[0],t[1]);case 3:return Km(t[0],t[1],t[2])}}function qm(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function Km(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=r-a,p=r-c,d=i-s,y=i-l,m=u-o,g=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,_=v-c*c-l*l+f*f,w=p*d-h*y,x=(d*_-y*b)/(2*w)-r,k=(y*m-d*g)/w,O=(p*b-h*_)/(2*w)-i,S=(h*g-p*m)/w,E=k*k+S*S-1,A=2*(o+x*k+O*S),T=x*x+O*O-o*o,M=-(Math.abs(E)>1e-6?(A+Math.sqrt(A*A-4*E*T))/(2*E):T/A);return{x:r+x+k*M,y:i+O+S*M,r:M}}function zm(t,e,n){var r,i,o,a,s=t.x-e.x,u=t.y-e.y,c=s*s+u*u;c?(i=e.r+n.r,i*=i,a=t.r+n.r,i>(a*=a)?(r=(c+a-i)/(2*c),o=Math.sqrt(Math.max(0,a/c-r*r)),n.x=t.x-r*s-o*u,n.y=t.y-r*u+o*s):(r=(c+i-a)/(2*c),o=Math.sqrt(Math.max(0,i/c-r*r)),n.x=e.x+r*s-o*u,n.y=e.y+r*u+o*s)):(n.x=e.x+n.r,n.y=e.y)}function Vm(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ym(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function Hm(t){this._=t,this.next=null,this.previous=null}function Wm(t,e){if(!(a=(n=t,t="object"==typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,r,i,o,a,s,u,c,l,f,h,p;if((r=t[0]).x=0,r.y=0,!(a>1))return r.r;if(i=t[1],r.x=-i.r,i.x=r.r,i.y=0,!(a>2))return r.r+i.r;zm(i,r,o=t[2]),r=new Hm(r),i=new Hm(i),o=new Hm(o),r.next=o.previous=i,i.next=r.previous=o,o.next=i.previous=r;t:for(c=3;c<a;++c){zm(r._,i._,o=t[c]),o=new Hm(o),l=i.next,f=r.previous,h=i._.r,p=r._.r;do{if(h<=p){if(Vm(l._,o._)){i=l,r.next=i,i.previous=r,--c;continue t}h+=l._.r,l=l.next}else{if(Vm(f._,o._)){(r=f).next=i,i.previous=r,--c;continue t}p+=f._.r,f=f.previous}}while(l!==f.next);for(o.previous=r,o.next=i,r.next=i.previous=i=o,s=Ym(r);(o=o.next)!==i;)(u=Ym(o))<s&&(r=o,s=u);i=r.next}for(r=[i._],o=i;(o=o.next)!==i;)r.push(o._);for(o=Dm(r,e),c=0;c<a;++c)(r=t[c]).x-=o.x,r.y-=o.y;return o.r}function Gm(t){return Wm(t,Lm()),t}function Jm(t){return Math.sqrt(t.value)}function Xm(){var t=null,e=1,n=1,r=Mm;function i(i){const o=Lm();return i.x=e/2,i.y=n/2,t?i.eachBefore(Qm(t)).eachAfter(Zm(r,.5,o)).eachBefore(tg(1)):i.eachBefore(Qm(Jm)).eachAfter(Zm(Mm,1,o)).eachAfter(Zm(r,i.r/Math.min(e,n),o)).eachBefore(tg(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=Am(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Nm(+t),i):r},i}function Qm(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Zm(t,e,n){return function(r){if(i=r.children){var i,o,a,s=i.length,u=t(r)*e||0;if(u)for(o=0;o<s;++o)i[o].r+=u;if(a=Wm(i,n),u)for(o=0;o<s;++o)i[o].r-=u;r.r=a+u}}}function tg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function eg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ng(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function rg(){var t=1,e=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/o,i.eachBefore(function(t,e){return function(r){r.children&&ng(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(e,o)),r&&i.eachBefore(eg),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}var ig={depth:-1},og={},ag={};function sg(t){return t.id}function ug(t){return t.parentId}function cg(){var t,e=sg,n=ug;function r(r){var i,o,a,s,u,c,l,f,h=Array.from(r),p=e,d=n,y=new Map;if(null!=t){const e=h.map(((e,n)=>function(t){let e=(t=`${t}`).length;return fg(t,e-1)&&!fg(t,e-2)&&(t=t.slice(0,-1)),"/"===t[0]?t:`/${t}`}(t(e,n,r)))),n=e.map(lg),i=new Set(e).add("");for(const t of n)i.has(t)||(i.add(t),e.push(t),n.push(lg(t)),h.push(ag));p=(t,n)=>e[n],d=(t,e)=>n[e]}for(a=0,i=h.length;a<i;++a)o=h[a],c=h[a]=new Em(o),null!=(l=p(o,a,r))&&(l+="")&&(f=c.id=l,y.set(f,y.has(f)?og:c)),null!=(l=d(o,a,r))&&(l+="")&&(c.parent=l);for(a=0;a<i;++a)if(l=(c=h[a]).parent){if(!(u=y.get(l)))throw new Error("missing: "+l);if(u===og)throw new Error("ambiguous: "+l);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(s)throw new Error("multiple roots");s=c}if(!s)throw new Error("no root");if(null!=t){for(;s.data===ag&&1===s.children.length;)s=s.children[0],--i;for(let t=h.length-1;t>=0&&(c=h[t]).data===ag;--t)c.data=null}if(s.parent=ig,s.eachBefore((function(t){t.depth=t.parent.depth+1,--i})).eachBefore(Sm),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(t){return arguments.length?(e=Am(t),r):e},r.parentId=function(t){return arguments.length?(n=Am(t),r):n},r.path=function(e){return arguments.length?(t=Am(e),r):t},r}function lg(t){let e=t.length;if(e<2)return"";for(;--e>1&&!fg(t,e););return t.slice(0,e)}function fg(t,e){if("/"===t[e]){let n=0;for(;e>0&&"\\"===t[--e];)++n;if(!(1&n))return!0}return!1}function hg(t,e){return t.parent===e.parent?1:2}function pg(t){var e=t.children;return e?e[0]:t.t}function dg(t){var e=t.children;return e?e[e.length-1]:t.t}function yg(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function mg(t,e,n){return t.a.parent===e.parent?t.a:n}function gg(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function vg(){var t=hg,e=1,n=1,r=null;function i(i){var u=function(t){for(var e,n,r,i,o,a=new gg(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new gg(r[i],i)),n.parent=e;return(a.parent=new gg(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var c=i,l=i,f=i;i.eachBefore((function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)}));var h=c===l?1:t(c,l)/2,p=h-c.x,d=e/(l.x+h+p),y=n/(f.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*d,t.y=t.depth*y}))}return i}function o(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var o=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-o):e.z=o}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,o=e,a=e,s=n,u=o.parent.children[0],c=o.m,l=a.m,f=s.m,h=u.m;s=dg(s),o=pg(o),s&&o;)u=pg(u),(a=dg(a)).a=e,(i=s.z+f-o.z-c+t(s._,o._))>0&&(yg(mg(s,e,r),e,i),c+=i,l+=i),f+=s.m,c+=o.m,h+=u.m,l+=a.m;s&&!dg(a)&&(a.t=s,a.m+=f-l),o&&!pg(u)&&(u.t=o,u.m+=c-h,r=e)}return r}(e,i,e.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}function bg(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}gg.prototype=Object.create(Em.prototype);var _g=(1+Math.sqrt(5))/2;function wg(t,e,n,r,i,o){for(var a,s,u,c,l,f,h,p,d,y,m,g=[],v=e.children,b=0,_=0,w=v.length,x=e.value;b<w;){u=i-n,c=o-r;do{l=v[_++].value}while(!l&&_<w);for(f=h=l,m=l*l*(y=Math.max(c/u,u/c)/(x*t)),d=Math.max(h/m,m/f);_<w;++_){if(l+=s=v[_].value,s<f&&(f=s),s>h&&(h=s),m=l*l*y,(p=Math.max(h/m,m/f))>d){l-=s;break}d=p}g.push(a={value:l,dice:u<c,children:v.slice(b,_)}),a.dice?ng(a,n,r,i,x?r+=c*l/x:o):bg(a,n,r,x?n+=u*l/x:i,o),x-=l,b=_}return g}const xg=function t(e){function n(t,n,r,i,o){wg(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(_g);function kg(){var t=xg,e=!1,n=1,r=1,i=[0],o=Mm,a=Mm,s=Mm,u=Mm,c=Mm;function l(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(f),i=[0],e&&t.eachBefore(eg),t}function f(e){var n=i[e.depth],r=e.x0+n,l=e.y0+n,f=e.x1-n,h=e.y1-n;f<r&&(r=f=(r+f)/2),h<l&&(l=h=(l+h)/2),e.x0=r,e.y0=l,e.x1=f,e.y1=h,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,l+=a(e)-n,(f-=s(e)-n)<r&&(r=f=(r+f)/2),(h-=u(e)-n)<l&&(l=h=(l+h)/2),t(e,r,l,f,h))}return l.round=function(t){return arguments.length?(e=!!t,l):e},l.size=function(t){return arguments.length?(n=+t[0],r=+t[1],l):[n,r]},l.tile=function(e){return arguments.length?(t=Tm(e),l):t},l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()},l.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Nm(+t),l):o},l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()},l.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Nm(+t),l):a},l.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Nm(+t),l):s},l.paddingBottom=function(t){return arguments.length?(u="function"==typeof t?t:Nm(+t),l):u},l.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Nm(+t),l):c},l}function Og(t,e,n,r,i){var o,a,s=t.children,u=s.length,c=new Array(u+1);for(c[0]=a=o=0;o<u;++o)c[o+1]=a+=s[o].value;!function t(e,n,r,i,o,a,u){if(e>=n-1){var l=s[e];return l.x0=i,l.y0=o,l.x1=a,void(l.y1=u)}for(var f=c[e],h=r/2+f,p=e+1,d=n-1;p<d;){var y=p+d>>>1;c[y]<h?p=y+1:d=y}h-c[p-1]<c[p]-h&&e+1<p&&--p;var m=c[p]-f,g=r-m;if(a-i>u-o){var v=r?(i*g+a*m)/r:a;t(e,p,m,i,o,v,u),t(p,n,g,v,o,a,u)}else{var b=r?(o*g+u*m)/r:u;t(e,p,m,i,o,a,b),t(p,n,g,i,b,a,u)}}(0,u,t.value,e,n,r,i)}function Sg(t,e,n,r,i){(1&t.depth?bg:ng)(t,e,n,r,i)}const Eg=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,f=-1,h=a.length,p=t.value;++f<h;){for(u=(s=a[f]).children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?ng(s,n,r,i,p?r+=(o-r)*s.value/p:o):bg(s,n,r,p?n+=(i-n)*s.value/p:i,o),p-=s.value}else t._squarify=a=wg(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(_g);function Ag(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Tg(t,e){var n=ki(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}function Mg(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ng(t){return((t=Math.exp(t))+1/t)/2}const Cg=function t(e,n,r){function i(t,i){var o,a,s=t[0],u=t[1],c=t[2],l=i[0],f=i[1],h=i[2],p=l-s,d=f-u,y=p*p+d*d;if(y<1e-12)a=Math.log(h/c)/e,o=function(t){return[s+t*p,u+t*d,c*Math.exp(e*t*a)]};else{var m=Math.sqrt(y),g=(h*h-c*c+r*y)/(2*c*n*m),v=(h*h-c*c-r*y)/(2*h*n*m),b=Math.log(Math.sqrt(g*g+1)-g),_=Math.log(Math.sqrt(v*v+1)-v);a=(_-b)/e,o=function(t){var r,i=t*a,o=Ng(b),l=c/(n*m)*(o*(r=e*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(b));return[s+l*p,u+l*d,c*o/Ng(e*i+b)]}}return o.duration=1e3*a*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);function jg(t){return function(e,n){var r=t((e=pi(e)).h,(n=pi(n)).h),i=Oi(e.s,n.s),o=Oi(e.l,n.l),a=Oi(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}const Pg=jg(ki);var Lg=jg(Oi);function Ig(t,e){var n=Oi((t=Ss(t)).l,(e=Ss(e)).l),r=Oi(t.a,e.a),i=Oi(t.b,e.b),o=Oi(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Dg(t){return function(e,n){var r=t((e=Ps(e)).h,(n=Ps(n)).h),i=Oi(e.c,n.c),o=Oi(e.l,n.l),a=Oi(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}const Rg=Dg(ki);var Bg=Dg(Oi);function Fg(t){return function e(n){function r(e,r){var i=t((e=zs(e)).h,(r=zs(r)).h),o=Oi(e.s,r.s),a=Oi(e.l,r.l),s=Oi(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}const $g=Fg(ki);var Ug=Fg(Oi);function qg(t,e){void 0===e&&(e=t,t=Fi);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}function Kg(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function zg(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2}function Vg(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o/(u*=3),a/u]}function Yg(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Hg(t,e){return t[0]-e[0]||t[1]-e[1]}function Wg(t){const e=t.length,n=[0,1];let r,i=2;for(r=2;r<e;++r){for(;i>1&&Yg(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}function Gg(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(Hg),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]];var o=Wg(r),a=Wg(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c}function Jg(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,f=0;f<i;++f)n=(o=t[f])[0],(r=o[1])>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l}function Xg(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,e-=a=(o=t[r])[0],n-=s=o[1],u+=Math.hypot(e,n);return u}const Qg=Math.random,Zg=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Qg),tv=function t(e){function n(t,n){return arguments.length<2&&(n=t,t=0),t=Math.floor(t),n=Math.floor(n)-t,function(){return Math.floor(e()*n+t)}}return n.source=t,n}(Qg),ev=function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Qg),nv=function t(e){var n=ev.source(e);function r(){var t=n.apply(this,arguments);return function(){return Math.exp(t())}}return r.source=t,r}(Qg),rv=function t(e){function n(t){return(t=+t)<=0?()=>0:function(){for(var n=0,r=t;r>1;--r)n+=e();return n+r*e()}}return n.source=t,n}(Qg),iv=function t(e){var n=rv.source(e);function r(t){if(0==(t=+t))return e;var r=n(t);return function(){return r()/t}}return r.source=t,r}(Qg),ov=function t(e){function n(t){return function(){return-Math.log1p(-e())/t}}return n.source=t,n}(Qg),av=function t(e){function n(t){if((t=+t)<0)throw new RangeError("invalid alpha");return t=1/-t,function(){return Math.pow(1-e(),t)}}return n.source=t,n}(Qg),sv=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+t)}}return n.source=t,n}(Qg),uv=function t(e){function n(t){if((t=+t)<0||t>1)throw new RangeError("invalid p");return 0===t?()=>1/0:1===t?()=>1:(t=Math.log1p(-t),function(){return 1+Math.floor(Math.log1p(-e())/t)})}return n.source=t,n}(Qg),cv=function t(e){var n=ev.source(e)();function r(t,r){if((t=+t)<0)throw new RangeError("invalid k");if(0===t)return()=>0;if(r=null==r?1:+r,1===t)return()=>-Math.log1p(-e())*r;var i=(t<1?t+1:t)-1/3,o=1/(3*Math.sqrt(i)),a=t<1?()=>Math.pow(e(),1/t):()=>1;return function(){do{do{var t=n(),s=1+o*t}while(s<=0);s*=s*s;var u=1-e()}while(u>=1-.0331*t*t*t*t&&Math.log(u)>=.5*t*t+i*(1-s+Math.log(s)));return i*s*a()*r}}return r.source=t,r}(Qg),lv=function t(e){var n=cv.source(e);function r(t,e){var r=n(t),i=n(e);return function(){var t=r();return 0===t?0:t/(t+i())}}return r.source=t,r}(Qg),fv=function t(e){var n=uv.source(e),r=lv.source(e);function i(t,e){return t=+t,(e=+e)>=1?()=>t:e<=0?()=>0:function(){for(var i=0,o=t,a=e;o*a>16&&o*(1-a)>16;){var s=Math.floor((o+1)*a),u=r(s,o-s+1)();u<=a?(i+=s,o-=s,a=(a-u)/(1-u)):(o=s-1,a/=u)}for(var c=a<.5,l=n(c?a:1-a),f=l(),h=0;f<=o;++h)f+=l();return i+(c?h:o-h)}}return i.source=t,i}(Qg),hv=function t(e){function n(t,n,r){var i;return 0==(t=+t)?i=t=>-Math.log(t):(t=1/t,i=e=>Math.pow(e,t)),n=null==n?0:+n,r=null==r?1:+r,function(){return n+r*i(-Math.log1p(-e()))}}return n.source=t,n}(Qg),pv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){return t+n*Math.tan(Math.PI*e())}}return n.source=t,n}(Qg),dv=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,function(){var r=e();return t+n*Math.log(r/(1-r))}}return n.source=t,n}(Qg),yv=function t(e){var n=cv.source(e),r=fv.source(e);function i(t){return function(){for(var i=0,o=t;o>16;){var a=Math.floor(.875*o),s=n(a)();if(s>o)return i+r(a-1,o/s)();i+=a,o-=s}for(var u=-Math.log1p(-e()),c=0;u<=o;++c)u-=Math.log1p(-e());return i+c}}return i.source=t,i}(Qg),mv=1664525,gv=1013904223,vv=1/4294967296;function bv(t=Math.random()){let e=0|(0<=t&&t<1?t/vv:Math.abs(t));return()=>(e=mv*e+gv|0,vv*(e>>>0))}function _v(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function wv(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const xv=Symbol("implicit");function kv(){var t=new _t,e=[],n=[],r=xv;function i(i){let o=t.get(i);if(void 0===o){if(r!==xv)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new _t;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return kv(e,n).unknown(r)},_v.apply(i,arguments),i}function Ov(){var t,e,n=kv().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,u=0,c=0,l=.5;function f(){var n=r().length,f=a<o,h=f?a:o,p=f?o:a;t=(p-h)/Math.max(1,n-u+2*c),s&&(t=Math.floor(t)),h+=(p-h-t*(n-u))*l,e=t*(1-u),s&&(h=Math.round(h),e=Math.round(e));var d=we(n).map((function(e){return h+t*e}));return i(f?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),f()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,f()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,f()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,f()):s},n.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),f()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),f()):u},n.paddingOuter=function(t){return arguments.length?(c=+t,f()):c},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),f()):l},n.copy=function(){return Ov(r(),[o,a]).round(s).paddingInner(u).paddingOuter(c).align(l)},_v.apply(f(),arguments)}function Sv(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Sv(e())},t}function Ev(){return Sv(Ov.apply(null,arguments).paddingInner(1))}function Av(t){return+t}var Tv=[0,1];function Mv(t){return t}function Nv(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Cv(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Nv(i,r),o=n(a,o)):(r=Nv(r,i),o=n(o,a)),function(t){return o(r(t))}}function jv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Nv(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=tt(t,e,1,r)-1;return o[n](i[n](e))}}function Pv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Lv(){var t,e,n,r,i,o,a=Tv,s=Tv,u=Fi,c=Mv;function l(){var t=Math.min(a.length,s.length);return c!==Mv&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),r=t>2?jv:Cv,i=o=null,f}function f(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,u)))(t(c(e)))}return f.invert=function(n){return c(e((o||(o=r(s,a.map(t),Li)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,Av),l()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),l()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=Mg,l()},f.clamp=function(t){return arguments.length?(c=!!t||Mv,l()):c!==Mv},f.interpolate=function(t){return arguments.length?(u=t,l()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,r){return t=n,e=r,l()}}function Iv(){return Lv()(Mv,Mv)}function Dv(t,e,n,r){var i,o=Qt(t,e,n);switch((r=tf(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=df(o,a))||(r.precision=i),uf(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=yf(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=pf(o))||(r.precision=i-2*("%"===r.type))}return sf(r)}function Rv(t){var e=t.domain;return t.ticks=function(t){var n=e();return Jt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Dv(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,u=o[a],c=o[s],l=10;for(c<u&&(i=u,u=c,c=i,i=a,a=s,s=i);l-- >0;){if((i=Xt(u,c,n))===r)return o[a]=u,o[s]=c,e(o);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Bv(){var t=Iv();return t.copy=function(){return Pv(t,Bv())},_v.apply(t,arguments),Rv(t)}function Fv(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Av),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return Fv(t).unknown(e)},t=arguments.length?Array.from(t,Av):[0,1],Rv(n)}function $v(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Uv(t){return Math.log(t)}function qv(t){return Math.exp(t)}function Kv(t){return-Math.log(-t)}function zv(t){return-Math.exp(-t)}function Vv(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Yv(t){return(e,n)=>-t(-e,n)}function Hv(t){const e=t(Uv,qv),n=e.domain;let r,i,o=10;function a(){return r=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(o),i=function(t){return 10===t?Vv:t===Math.E?Math.exp:e=>Math.pow(t,e)}(o),n()[0]<0?(r=Yv(r),i=Yv(i),t(Kv,zv)):t(Uv,qv),e}return e.base=function(t){return arguments.length?(o=+t,a()):o},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],s=e[e.length-1];const u=s<a;u&&([a,s]=[s,a]);let c,l,f=r(a),h=r(s);const p=null==t?10:+t;let d=[];if(!(o%1)&&h-f<p){if(f=Math.floor(f),h=Math.ceil(h),a>0){for(;f<=h;++f)for(c=1;c<o;++c)if(l=f<0?c/i(-f):c*i(f),!(l<a)){if(l>s)break;d.push(l)}}else for(;f<=h;++f)for(c=o-1;c>=1;--c)if(l=f>0?c/i(-f):c*i(f),!(l<a)){if(l>s)break;d.push(l)}2*d.length<p&&(d=Jt(a,s,p))}else d=Jt(f,h,Math.min(h-f,p)).map(i);return u?d.reverse():d},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=tf(n)).precision||(n.trim=!0),n=sf(n)),t===1/0)return n;const a=Math.max(1,o*t/e.ticks().length);return t=>{let e=t/i(Math.round(r(t)));return e*o<o-.5&&(e*=o),e<=a?n(t):""}},e.nice=()=>n($v(n(),{floor:t=>i(Math.floor(r(t))),ceil:t=>i(Math.ceil(r(t)))})),e}function Wv(){const t=Hv(Lv()).domain([1,10]);return t.copy=()=>Pv(t,Wv()).base(t.base()),_v.apply(t,arguments),t}function Gv(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Jv(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Xv(t){var e=1,n=t(Gv(e),Jv(e));return n.constant=function(n){return arguments.length?t(Gv(e=+n),Jv(e)):e},Rv(n)}function Qv(){var t=Xv(Lv());return t.copy=function(){return Pv(t,Qv()).constant(t.constant())},_v.apply(t,arguments)}function Zv(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function tb(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function eb(t){return t<0?-t*t:t*t}function nb(t){var e=t(Mv,Mv),n=1;return e.exponent=function(e){return arguments.length?1==(n=+e)?t(Mv,Mv):.5===n?t(tb,eb):t(Zv(n),Zv(1/n)):n},Rv(e)}function rb(){var t=nb(Lv());return t.copy=function(){return Pv(t,rb()).exponent(t.exponent())},_v.apply(t,arguments),t}function ib(){return rb.apply(null,arguments).exponent(.5)}function ob(t){return Math.sign(t)*t*t}function ab(){var t,e=Iv(),n=[0,1],r=!1;function i(n){var i=function(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}(e(n));return isNaN(i)?t:r?Math.round(i):i}return i.invert=function(t){return e.invert(ob(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain()},i.range=function(t){return arguments.length?(e.range((n=Array.from(t,Av)).map(ob)),i):n.slice()},i.rangeRound=function(t){return i.range(t).round(!0)},i.round=function(t){return arguments.length?(r=!!t,i):r},i.clamp=function(t){return arguments.length?(e.clamp(t),i):e.clamp()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ab(e.domain(),n).round(r).clamp(e.clamp()).unknown(t)},_v.apply(i,arguments),Rv(i)}function sb(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=le(e,t/i);return o}function o(e){return null==e||isNaN(e=+e)?t:n[tt(r,e)]}return o.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(V),i()},o.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return r.slice()},o.copy=function(){return sb().domain(e).range(n).unknown(t)},_v.apply(o,arguments)}function ub(){var t,e=0,n=1,r=1,i=[.5],o=[0,1];function a(e){return null!=e&&e<=e?o[tt(i,e,0,r)]:t}function s(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return a}return a.domain=function(t){return arguments.length?([e,n]=t,e=+e,n=+n,s()):[e,n]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,s()):o.slice()},a.invertExtent=function(t){var a=o.indexOf(t);return a<0?[NaN,NaN]:a<1?[e,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(e){return arguments.length?(t=e,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return ub().domain([e,n]).range(o).unknown(t)},_v.apply(Rv(a),arguments)}function cb(){var t,e=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[tt(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Array.from(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Array.from(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return cb().domain(e).range(n).unknown(t)},_v.apply(i,arguments)}const lb=1e3,fb=6e4,hb=36e5,pb=864e5,db=6048e5,yb=31536e6,mb=new Date,gb=new Date;function vb(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>vb((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(mb.setTime(+e),gb.setTime(+r),t(mb),t(gb),Math.floor(n(mb,gb))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const bb=vb((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));bb.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?vb((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):bb:null);const _b=bb.range,wb=vb((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*lb)}),((t,e)=>(e-t)/lb),(t=>t.getUTCSeconds())),xb=wb.range,kb=vb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*lb)}),((t,e)=>{t.setTime(+t+e*fb)}),((t,e)=>(e-t)/fb),(t=>t.getMinutes())),Ob=kb.range,Sb=vb((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*fb)}),((t,e)=>(e-t)/fb),(t=>t.getUTCMinutes())),Eb=Sb.range,Ab=vb((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*lb-t.getMinutes()*fb)}),((t,e)=>{t.setTime(+t+e*hb)}),((t,e)=>(e-t)/hb),(t=>t.getHours())),Tb=Ab.range,Mb=vb((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*hb)}),((t,e)=>(e-t)/hb),(t=>t.getUTCHours())),Nb=Mb.range,Cb=vb((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fb)/pb),(t=>t.getDate()-1)),jb=Cb.range,Pb=vb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/pb),(t=>t.getUTCDate()-1)),Lb=Pb.range,Ib=vb((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/pb),(t=>Math.floor(t/pb))),Db=Ib.range;function Rb(t){return vb((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fb)/db))}const Bb=Rb(0),Fb=Rb(1),$b=Rb(2),Ub=Rb(3),qb=Rb(4),Kb=Rb(5),zb=Rb(6),Vb=Bb.range,Yb=Fb.range,Hb=$b.range,Wb=Ub.range,Gb=qb.range,Jb=Kb.range,Xb=zb.range;function Qb(t){return vb((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/db))}const Zb=Qb(0),t_=Qb(1),e_=Qb(2),n_=Qb(3),r_=Qb(4),i_=Qb(5),o_=Qb(6),a_=Zb.range,s_=t_.range,u_=e_.range,c_=n_.range,l_=r_.range,f_=i_.range,h_=o_.range,p_=vb((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),d_=p_.range,y_=vb((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),m_=y_.range,g_=vb((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));g_.every=t=>isFinite(t=Math.floor(t))&&t>0?vb((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null;const v_=g_.range,b_=vb((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));b_.every=t=>isFinite(t=Math.floor(t))&&t>0?vb((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null;const __=b_.range;function w_(t,e,n,r,i,o){const a=[[wb,1,lb],[wb,5,5e3],[wb,15,15e3],[wb,30,3e4],[o,1,fb],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,hb],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,pb],[r,2,1728e5],[n,1,db],[e,1,2592e6],[e,3,7776e6],[t,1,yb]];function s(e,n,r){const i=Math.abs(n-e)/r,o=H((([,,t])=>t)).right(a,i);if(o===a.length)return t.every(Qt(e/yb,n/yb,r));if(0===o)return bb.every(Math.max(Qt(e,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}const[x_,k_]=w_(b_,y_,Zb,Ib,Mb,Sb),[O_,S_]=w_(g_,p_,Bb,Cb,Ab,kb);function E_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function A_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function T_(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function M_(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,u=t.shortMonths,c=U_(i),l=q_(i),f=U_(o),h=q_(o),p=U_(a),d=q_(a),y=U_(s),m=q_(s),g=U_(u),v=q_(u),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:cw,e:cw,f:dw,g:Sw,G:Aw,H:lw,I:fw,j:hw,L:pw,m:yw,M:mw,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Jw,s:Xw,S:gw,u:vw,U:bw,V:ww,w:xw,W:kw,x:null,X:null,y:Ow,Y:Ew,Z:Tw,"%":Gw},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Mw,e:Mw,f:Lw,g:Vw,G:Hw,H:Nw,I:Cw,j:jw,L:Pw,m:Iw,M:Dw,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Jw,s:Xw,S:Rw,u:Bw,U:Fw,V:Uw,w:qw,W:Kw,x:null,X:null,y:zw,Y:Yw,Z:Ww,"%":Gw},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return O(t,e,n,r)},d:Z_,e:Z_,f:ow,g:G_,G:W_,H:ew,I:ew,j:tw,L:iw,m:Q_,M:nw,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l.get(r[0].toLowerCase()),n+r[0].length):-1},q:X_,Q:sw,s:uw,S:rw,u:z_,U:V_,V:Y_,w:K_,W:H_,x:function(t,e,r){return O(t,n,e,r)},X:function(t,e,n){return O(t,r,e,n)},y:G_,Y:W_,Z:J_,"%":aw};function x(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=I_[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=T_(1900,void 0,1);if(O(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=A_(T_(o.y,0,1))).getUTCDay(),r=i>4||0===i?t_.ceil(r):t_(r),r=Pb.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=E_(T_(o.y,0,1))).getDay(),r=i>4||0===i?Fb.ceil(r):Fb(r),r=Cb.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?A_(T_(o.y,0,1)).getUTCDay():E_(T_(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,A_(o)):E_(o)}}function O(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=w[i in I_?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(e,b),_.x=x(n,_),_.X=x(r,_),_.c=x(e,_),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var N_,C_,j_,P_,L_,I_={"-":"",_:" ",0:"0"},D_=/^\s*\d+/,R_=/^%/,B_=/[\\^$*+?|[\]().{}]/g;function F_(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function $_(t){return t.replace(B_,"\\$&")}function U_(t){return new RegExp("^(?:"+t.map($_).join("|")+")","i")}function q_(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function K_(t,e,n){var r=D_.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function z_(t,e,n){var r=D_.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function V_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Y_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function H_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function W_(t,e,n){var r=D_.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function G_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function J_(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function X_(t,e,n){var r=D_.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Q_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Z_(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function tw(t,e,n){var r=D_.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ew(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nw(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rw(t,e,n){var r=D_.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iw(t,e,n){var r=D_.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ow(t,e,n){var r=D_.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function aw(t,e,n){var r=R_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sw(t,e,n){var r=D_.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function uw(t,e,n){var r=D_.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function cw(t,e){return F_(t.getDate(),e,2)}function lw(t,e){return F_(t.getHours(),e,2)}function fw(t,e){return F_(t.getHours()%12||12,e,2)}function hw(t,e){return F_(1+Cb.count(g_(t),t),e,3)}function pw(t,e){return F_(t.getMilliseconds(),e,3)}function dw(t,e){return pw(t,e)+"000"}function yw(t,e){return F_(t.getMonth()+1,e,2)}function mw(t,e){return F_(t.getMinutes(),e,2)}function gw(t,e){return F_(t.getSeconds(),e,2)}function vw(t){var e=t.getDay();return 0===e?7:e}function bw(t,e){return F_(Bb.count(g_(t)-1,t),e,2)}function _w(t){var e=t.getDay();return e>=4||0===e?qb(t):qb.ceil(t)}function ww(t,e){return t=_w(t),F_(qb.count(g_(t),t)+(4===g_(t).getDay()),e,2)}function xw(t){return t.getDay()}function kw(t,e){return F_(Fb.count(g_(t)-1,t),e,2)}function Ow(t,e){return F_(t.getFullYear()%100,e,2)}function Sw(t,e){return F_((t=_w(t)).getFullYear()%100,e,2)}function Ew(t,e){return F_(t.getFullYear()%1e4,e,4)}function Aw(t,e){var n=t.getDay();return F_((t=n>=4||0===n?qb(t):qb.ceil(t)).getFullYear()%1e4,e,4)}function Tw(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+F_(e/60|0,"0",2)+F_(e%60,"0",2)}function Mw(t,e){return F_(t.getUTCDate(),e,2)}function Nw(t,e){return F_(t.getUTCHours(),e,2)}function Cw(t,e){return F_(t.getUTCHours()%12||12,e,2)}function jw(t,e){return F_(1+Pb.count(b_(t),t),e,3)}function Pw(t,e){return F_(t.getUTCMilliseconds(),e,3)}function Lw(t,e){return Pw(t,e)+"000"}function Iw(t,e){return F_(t.getUTCMonth()+1,e,2)}function Dw(t,e){return F_(t.getUTCMinutes(),e,2)}function Rw(t,e){return F_(t.getUTCSeconds(),e,2)}function Bw(t){var e=t.getUTCDay();return 0===e?7:e}function Fw(t,e){return F_(Zb.count(b_(t)-1,t),e,2)}function $w(t){var e=t.getUTCDay();return e>=4||0===e?r_(t):r_.ceil(t)}function Uw(t,e){return t=$w(t),F_(r_.count(b_(t),t)+(4===b_(t).getUTCDay()),e,2)}function qw(t){return t.getUTCDay()}function Kw(t,e){return F_(t_.count(b_(t)-1,t),e,2)}function zw(t,e){return F_(t.getUTCFullYear()%100,e,2)}function Vw(t,e){return F_((t=$w(t)).getUTCFullYear()%100,e,2)}function Yw(t,e){return F_(t.getUTCFullYear()%1e4,e,4)}function Hw(t,e){var n=t.getUTCDay();return F_((t=n>=4||0===n?r_(t):r_.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ww(){return"+0000"}function Gw(){return"%"}function Jw(t){return+t}function Xw(t){return Math.floor(+t/1e3)}function Qw(t){return N_=M_(t),C_=N_.format,j_=N_.parse,P_=N_.utcFormat,L_=N_.utcParse,N_}function Zw(t){return new Date(t)}function tx(t){return t instanceof Date?+t:+new Date(+t)}function ex(t,e,n,r,i,o,a,s,u,c){var l=Iv(),f=l.invert,h=l.domain,p=c(".%L"),d=c(":%S"),y=c("%I:%M"),m=c("%I %p"),g=c("%a %d"),v=c("%b %d"),b=c("%B"),_=c("%Y");function w(t){return(u(t)<t?p:s(t)<t?d:a(t)<t?y:o(t)<t?m:r(t)<t?i(t)<t?g:v:n(t)<t?b:_)(t)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Array.from(t,tx)):h().map(Zw)},l.ticks=function(e){var n=h();return t(n[0],n[n.length-1],null==e?10:e)},l.tickFormat=function(t,e){return null==e?w:c(e)},l.nice=function(t){var n=h();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?h($v(n,t)):l},l.copy=function(){return Pv(l,ex(t,e,n,r,i,o,a,s,u,c))},l}function nx(){return _v.apply(ex(O_,S_,g_,p_,Bb,Cb,Ab,kb,wb,C_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rx(){return _v.apply(ex(x_,k_,b_,y_,Zb,Pb,Mb,Sb,wb,P_).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ix(){var t,e,n,r,i,o=0,a=1,s=Mv,u=!1;function c(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,u?Math.max(0,Math.min(1,e)):e))}function l(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,t=r(o=+o),e=r(a=+a),n=t===e?0:1/(e-t),c):[o,a]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=l(Fi),c.rangeRound=l(Mg),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(o),e=i(a),n=t===e?0:1/(e-t),c}}function ox(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ax(){var t=Rv(ix()(Mv));return t.copy=function(){return ox(t,ax())},wv.apply(t,arguments)}function sx(){var t=Hv(ix()).domain([1,10]);return t.copy=function(){return ox(t,sx()).base(t.base())},wv.apply(t,arguments)}function ux(){var t=Xv(ix());return t.copy=function(){return ox(t,ux()).constant(t.constant())},wv.apply(t,arguments)}function cx(){var t=nb(ix());return t.copy=function(){return ox(t,cx()).exponent(t.exponent())},wv.apply(t,arguments)}function lx(){return cx.apply(null,arguments).exponent(.5)}function fx(){var t=[],e=Mv;function n(n){if(null!=n&&!isNaN(n=+n))return e((tt(t,n,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(V),n},n.interpolator=function(t){return arguments.length?(e=t,n):e},n.range=function(){return t.map(((n,r)=>e(r/(t.length-1))))},n.quantiles=function(e){return Array.from({length:e+1},((n,r)=>ce(t,r/e)))},n.copy=function(){return fx(e).domain(t)},wv.apply(n,arguments)}function hx(){var t,e,n,r,i,o,a,s=0,u=.5,c=1,l=1,f=Mv,h=!1;function p(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-e)*(l*t<l*e?r:i),f(h?Math.max(0,Math.min(1,t)):t))}function d(t){return function(e){var n,r,i;return arguments.length?([n,r,i]=e,f=qg(t,[n,r,i]),p):[f(0),f(.5),f(1)]}}return p.domain=function(a){return arguments.length?([s,u,c]=a,t=o(s=+s),e=o(u=+u),n=o(c=+c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,p):[s,u,c]},p.clamp=function(t){return arguments.length?(h=!!t,p):h},p.interpolator=function(t){return arguments.length?(f=t,p):f},p.range=d(Fi),p.rangeRound=d(Mg),p.unknown=function(t){return arguments.length?(a=t,p):a},function(a){return o=a,t=a(s),e=a(u),n=a(c),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),l=e<t?-1:1,p}}function px(){var t=Rv(hx()(Mv));return t.copy=function(){return ox(t,px())},wv.apply(t,arguments)}function dx(){var t=Hv(hx()).domain([.1,1,10]);return t.copy=function(){return ox(t,dx()).base(t.base())},wv.apply(t,arguments)}function yx(){var t=Xv(hx());return t.copy=function(){return ox(t,yx()).constant(t.constant())},wv.apply(t,arguments)}function mx(){var t=nb(hx());return t.copy=function(){return ox(t,mx()).exponent(t.exponent())},wv.apply(t,arguments)}function gx(){return mx.apply(null,arguments).exponent(.5)}function vx(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}Qw({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const bx=vx("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),_x=vx("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),wx=vx("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),xx=vx("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),kx=vx("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Ox=vx("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Sx=vx("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ex=vx("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ax=vx("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tx=vx("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Mx=t=>Ai(t[t.length-1]);var Nx=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(vx);const Cx=Mx(Nx);var jx=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(vx);const Px=Mx(jx);var Lx=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(vx);const Ix=Mx(Lx);var Dx=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(vx);const Rx=Mx(Dx);var Bx=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(vx);const Fx=Mx(Bx);var $x=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(vx);const Ux=Mx($x);var qx=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(vx);const Kx=Mx(qx);var zx=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(vx);const Vx=Mx(zx);var Yx=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(vx);const Hx=Mx(Yx);var Wx=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(vx);const Gx=Mx(Wx);var Jx=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(vx);const Xx=Mx(Jx);var Qx=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(vx);const Zx=Mx(Qx);var tk=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(vx);const ek=Mx(tk);var nk=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(vx);const rk=Mx(nk);var ik=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(vx);const ok=Mx(ik);var ak=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(vx);const sk=Mx(ak);var uk=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(vx);const ck=Mx(uk);var lk=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(vx);const fk=Mx(lk);var hk=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(vx);const pk=Mx(hk);var dk=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(vx);const yk=Mx(dk);var mk=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(vx);const gk=Mx(mk);var vk=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(vx);const bk=Mx(vk);var _k=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(vx);const wk=Mx(_k);var xk=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(vx);const kk=Mx(xk);var Ok=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(vx);const Sk=Mx(Ok);var Ek=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(vx);const Ak=Mx(Ek);var Tk=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(vx);const Mk=Mx(Tk);function Nk(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}const Ck=Ug(zs(300,.5,0),zs(-240,.5,1));var jk=Ug(zs(-100,.75,.35),zs(80,1.5,.8)),Pk=Ug(zs(260,.75,.35),zs(80,1.5,.8)),Lk=zs();function Ik(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Lk.h=360*t-100,Lk.s=1.5-1.5*e,Lk.l=.8-.9*e,Lk+""}var Dk=ii(),Rk=Math.PI/3,Bk=2*Math.PI/3;function Fk(t){var e;return t=(.5-t)*Math.PI,Dk.r=255*(e=Math.sin(t))*e,Dk.g=255*(e=Math.sin(t+Rk))*e,Dk.b=255*(e=Math.sin(t+Bk))*e,Dk+""}function $k(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function Uk(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const qk=Uk(vx("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Kk=Uk(vx("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),zk=Uk(vx("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Vk=Uk(vx("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Yk(t){return Mr(yr(t).call(document.documentElement))}var Hk=0;function Wk(){return new Gk}function Gk(){this._="@"+(++Hk).toString(36)}function Jk(t,e){return t.target&&(t=$i(t),void 0===e&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Ui(t,e)))}function Xk(t){return"string"==typeof t?new Er([document.querySelectorAll(t)],[document.documentElement]):new Er([vn(t)],Sr)}function Qk(t){return function(){return t}}Gk.prototype=Wk.prototype={constructor:Gk,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};const Zk=Math.abs,tO=Math.atan2,eO=Math.cos,nO=Math.max,rO=Math.min,iO=Math.sin,oO=Math.sqrt,aO=1e-12,sO=Math.PI,uO=sO/2,cO=2*sO;function lO(t){return t>=1?uO:t<=-1?-uO:Math.asin(t)}function fO(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Za(e)}function hO(t){return t.innerRadius}function pO(t){return t.outerRadius}function dO(t){return t.startAngle}function yO(t){return t.endAngle}function mO(t){return t&&t.padAngle}function gO(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/oO(s*s+u*u),l=c*u,f=-c*s,h=t+l,p=e+f,d=n+l,y=r+f,m=(h+d)/2,g=(p+y)/2,v=d-h,b=y-p,_=v*v+b*b,w=i-o,x=h*y-d*p,k=(b<0?-1:1)*oO(nO(0,w*w*_-x*x)),O=(x*b-v*k)/_,S=(-x*v-b*k)/_,E=(x*b+v*k)/_,A=(-x*v+b*k)/_,T=O-m,M=S-g,N=E-m,C=A-g;return T*T+M*M>N*N+C*C&&(O=E,S=A),{cx:O,cy:S,x01:-l,y01:-f,x11:O*(i/w-1),y11:S*(i/w-1)}}function vO(){var t=hO,e=pO,n=Qk(0),r=null,i=dO,o=yO,a=mO,s=null,u=fO(c);function c(){var c,l,f,h=+t.apply(this,arguments),p=+e.apply(this,arguments),d=i.apply(this,arguments)-uO,y=o.apply(this,arguments)-uO,m=Zk(y-d),g=y>d;if(s||(s=c=u()),p<h&&(l=p,p=h,h=l),p>aO)if(m>cO-aO)s.moveTo(p*eO(d),p*iO(d)),s.arc(0,0,p,d,y,!g),h>aO&&(s.moveTo(h*eO(y),h*iO(y)),s.arc(0,0,h,y,d,g));else{var v,b,_=d,w=y,x=d,k=y,O=m,S=m,E=a.apply(this,arguments)/2,A=E>aO&&(r?+r.apply(this,arguments):oO(h*h+p*p)),T=rO(Zk(p-h)/2,+n.apply(this,arguments)),M=T,N=T;if(A>aO){var C=lO(A/h*iO(E)),j=lO(A/p*iO(E));(O-=2*C)>aO?(x+=C*=g?1:-1,k-=C):(O=0,x=k=(d+y)/2),(S-=2*j)>aO?(_+=j*=g?1:-1,w-=j):(S=0,_=w=(d+y)/2)}var P=p*eO(_),L=p*iO(_),I=h*eO(k),D=h*iO(k);if(T>aO){var R,B=p*eO(w),F=p*iO(w),$=h*eO(x),U=h*iO(x);if(m<sO)if(R=function(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,f=s-o,h=f*u-l*c;if(!(h*h<aO))return[t+(h=(l*(e-o)-f*(t-i))/h)*u,e+h*c]}(P,L,$,U,B,F,I,D)){var q=P-R[0],K=L-R[1],z=B-R[0],V=F-R[1],Y=1/iO(((f=(q*z+K*V)/(oO(q*q+K*K)*oO(z*z+V*V)))>1?0:f<-1?sO:Math.acos(f))/2),H=oO(R[0]*R[0]+R[1]*R[1]);M=rO(T,(h-H)/(Y-1)),N=rO(T,(p-H)/(Y+1))}else M=N=0}S>aO?N>aO?(v=gO($,U,P,L,p,N,g),b=gO(B,F,I,D,p,N,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),N<T?s.arc(v.cx,v.cy,N,tO(v.y01,v.x01),tO(b.y01,b.x01),!g):(s.arc(v.cx,v.cy,N,tO(v.y01,v.x01),tO(v.y11,v.x11),!g),s.arc(0,0,p,tO(v.cy+v.y11,v.cx+v.x11),tO(b.cy+b.y11,b.cx+b.x11),!g),s.arc(b.cx,b.cy,N,tO(b.y11,b.x11),tO(b.y01,b.x01),!g))):(s.moveTo(P,L),s.arc(0,0,p,_,w,!g)):s.moveTo(P,L),h>aO&&O>aO?M>aO?(v=gO(I,D,B,F,h,-M,g),b=gO(P,L,$,U,h,-M,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),M<T?s.arc(v.cx,v.cy,M,tO(v.y01,v.x01),tO(b.y01,b.x01),!g):(s.arc(v.cx,v.cy,M,tO(v.y01,v.x01),tO(v.y11,v.x11),!g),s.arc(0,0,h,tO(v.cy+v.y11,v.cx+v.x11),tO(b.cy+b.y11,b.cx+b.x11),g),s.arc(b.cx,b.cy,M,tO(b.y11,b.x11),tO(b.y01,b.x01),!g))):s.arc(0,0,h,k,x,g):s.lineTo(I,D)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-sO/2;return[eO(r)*n,iO(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Qk(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Qk(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Qk(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qk(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qk(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qk(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Qk(+t),c):a},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}var bO=Array.prototype.slice;function _O(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function wO(t){this._context=t}function xO(t){return new wO(t)}function kO(t){return t[0]}function OO(t){return t[1]}function SO(t,e){var n=Qk(!0),r=null,i=xO,o=null,a=fO(s);function s(s){var u,c,l,f=(s=_O(s)).length,h=!1;for(null==r&&(o=i(l=a())),u=0;u<=f;++u)!(u<f&&n(c=s[u],u,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,u,s),+e(c,u,s));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?kO:Qk(t),e="function"==typeof e?e:void 0===e?OO:Qk(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:Qk(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:Qk(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:Qk(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function EO(t,e,n){var r=null,i=Qk(!0),o=null,a=xO,s=null,u=fO(c);function c(c){var l,f,h,p,d,y=(c=_O(c)).length,m=!1,g=new Array(y),v=new Array(y);for(null==o&&(s=a(d=u())),l=0;l<=y;++l){if(!(l<y&&i(p=c[l],l,c))===m)if(m=!m)f=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=l-1;h>=f;--h)s.point(g[h],v[h]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+t(p,l,c),v[l]=+e(p,l,c),s.point(r?+r(p,l,c):g[l],n?+n(p,l,c):v[l]))}if(d)return s=null,d+""||null}function l(){return SO().defined(i).curve(a).context(o)}return t="function"==typeof t?t:void 0===t?kO:Qk(+t),e="function"==typeof e?e:Qk(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?OO:Qk(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:Qk(+e),r=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:Qk(+e),c):t},c.x1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qk(+t),c):r},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Qk(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:Qk(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Qk(+t),c):n},c.lineX0=c.lineY0=function(){return l().x(t).y(e)},c.lineY1=function(){return l().x(t).y(n)},c.lineX1=function(){return l().x(r).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Qk(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),c):o},c}function AO(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function TO(t){return t}function MO(){var t=TO,e=AO,n=null,r=Qk(0),i=Qk(cO),o=Qk(0);function a(a){var s,u,c,l,f,h=(a=_O(a)).length,p=0,d=new Array(h),y=new Array(h),m=+r.apply(this,arguments),g=Math.min(cO,Math.max(-cO,i.apply(this,arguments)-m)),v=Math.min(Math.abs(g)/h,o.apply(this,arguments)),b=v*(g<0?-1:1);for(s=0;s<h;++s)(f=y[d[s]=s]=+t(a[s],s,a))>0&&(p+=f);for(null!=e?d.sort((function(t,n){return e(y[t],y[n])})):null!=n&&d.sort((function(t,e){return n(a[t],a[e])})),s=0,c=p?(g-h*b)/p:0;s<h;++s,m=l)u=d[s],l=m+((f=y[u])>0?f*c:0)+b,y[u]={data:a[u],index:s,value:f,startAngle:m,endAngle:l,padAngle:v};return y}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:Qk(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Qk(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qk(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qk(+t),a):o},a}wO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var NO=jO(xO);function CO(t){this._curve=t}function jO(t){function e(e){return new CO(t(e))}return e._curve=t,e}function PO(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(jO(t)):e()._curve},t}function LO(){return PO(SO().curve(NO))}function IO(){var t=EO().curve(NO),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return PO(n())},delete t.lineX0,t.lineEndAngle=function(){return PO(r())},delete t.lineX1,t.lineInnerRadius=function(){return PO(i())},delete t.lineY0,t.lineOuterRadius=function(){return PO(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(jO(t)):e()._curve},t}function DO(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}CO.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};class RO{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}class BO{constructor(t){this._context=t}lineStart(){this._point=0}lineEnd(){}point(t,e){if(t=+t,e=+e,0===this._point)this._point=1;else{const n=DO(this._x0,this._y0),r=DO(this._x0,this._y0=(this._y0+e)/2),i=DO(t,this._y0),o=DO(t,e);this._context.moveTo(...n),this._context.bezierCurveTo(...r,...i,...o)}this._x0=t,this._y0=e}}function FO(t){return new RO(t,!0)}function $O(t){return new RO(t,!1)}function UO(t){return new BO(t)}function qO(t){return t.source}function KO(t){return t.target}function zO(t){let e=qO,n=KO,r=kO,i=OO,o=null,a=null,s=fO(u);function u(){let u;const c=bO.call(arguments),l=e.apply(this,c),f=n.apply(this,c);if(null==o&&(a=t(u=s())),a.lineStart(),c[0]=l,a.point(+r.apply(this,c),+i.apply(this,c)),c[0]=f,a.point(+r.apply(this,c),+i.apply(this,c)),a.lineEnd(),u)return a=null,u+""||null}return u.source=function(t){return arguments.length?(e=t,u):e},u.target=function(t){return arguments.length?(n=t,u):n},u.x=function(t){return arguments.length?(r="function"==typeof t?t:Qk(+t),u):r},u.y=function(t){return arguments.length?(i="function"==typeof t?t:Qk(+t),u):i},u.context=function(e){return arguments.length?(null==e?o=a=null:a=t(o=e),u):o},u}function VO(){return zO(FO)}function YO(){return zO($O)}function HO(){const t=zO(UO);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const WO=oO(3),GO={draw(t,e){const n=.59436*oO(e+rO(e/28,.75)),r=n/2,i=r*WO;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-i,-r),t.lineTo(i,r),t.moveTo(-i,r),t.lineTo(i,-r)}},JO={draw(t,e){const n=oO(e/sO);t.moveTo(n,0),t.arc(0,0,n,0,cO)}},XO={draw(t,e){const n=oO(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},QO=oO(1/3),ZO=2*QO,tS={draw(t,e){const n=oO(e/ZO),r=n*QO;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},eS={draw(t,e){const n=.62625*oO(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},nS={draw(t,e){const n=.87559*oO(e-rO(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},rS={draw(t,e){const n=oO(e),r=-n/2;t.rect(r,r,n,n)}},iS={draw(t,e){const n=.4431*oO(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},oS=iO(sO/10)/iO(7*sO/10),aS=iO(cO/10)*oS,sS=-eO(cO/10)*oS,uS={draw(t,e){const n=oO(.8908130915292852*e),r=aS*n,i=sS*n;t.moveTo(0,-n),t.lineTo(r,i);for(let e=1;e<5;++e){const o=cO*e/5,a=eO(o),s=iO(o);t.lineTo(s*n,-a*n),t.lineTo(a*r-s*i,s*r+a*i)}t.closePath()}},cS=oO(3),lS={draw(t,e){const n=-oO(e/(3*cS));t.moveTo(0,2*n),t.lineTo(-cS*n,-n),t.lineTo(cS*n,-n),t.closePath()}},fS=oO(3),hS={draw(t,e){const n=.6824*oO(e),r=n/2,i=n*fS/2;t.moveTo(0,-n),t.lineTo(i,r),t.lineTo(-i,r),t.closePath()}},pS=-.5,dS=oO(3)/2,yS=1/oO(12),mS=3*(yS/2+1),gS={draw(t,e){const n=oO(e/mS),r=n/2,i=n*yS,o=r,a=n*yS+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(pS*r-dS*i,dS*r+pS*i),t.lineTo(pS*o-dS*a,dS*o+pS*a),t.lineTo(pS*s-dS*u,dS*s+pS*u),t.lineTo(pS*r+dS*i,pS*i-dS*r),t.lineTo(pS*o+dS*a,pS*a-dS*o),t.lineTo(pS*s+dS*u,pS*u-dS*s),t.closePath()}},vS={draw(t,e){const n=.6189*oO(e-rO(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},bS=[JO,XO,tS,rS,uS,lS,gS],_S=[JO,nS,vS,hS,GO,iS,eS];function wS(t,e){let n=null,r=fO(i);function i(){let i;if(n||(n=i=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:Qk(t||JO),e="function"==typeof e?e:Qk(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:Qk(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Qk(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}function xS(){}function kS(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function OS(t){this._context=t}function SS(t){return new OS(t)}function ES(t){this._context=t}function AS(t){return new ES(t)}function TS(t){this._context=t}function MS(t){return new TS(t)}function NS(t,e){this._basis=new OS(t),this._beta=e}OS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:kS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:kS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ES.prototype={areaStart:xS,areaEnd:xS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:kS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},TS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:kS(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},NS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const CS=function t(e){function n(t){return 1===e?new OS(t):new NS(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function jS(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function PS(t,e){this._context=t,this._k=(1-e)/6}PS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jS(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:jS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const LS=function t(e){function n(t){return new PS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function IS(t,e){this._context=t,this._k=(1-e)/6}IS.prototype={areaStart:xS,areaEnd:xS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:jS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const DS=function t(e){function n(t){return new IS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function RS(t,e){this._context=t,this._k=(1-e)/6}RS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jS(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const BS=function t(e){function n(t){return new RS(t,e)}return n.tension=function(e){return t(+e)},n}(0);function FS(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>aO){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>aO){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function $S(t,e){this._context=t,this._alpha=e}$S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:FS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const US=function t(e){function n(t){return e?new $S(t,e):new PS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qS(t,e){this._context=t,this._alpha=e}qS.prototype={areaStart:xS,areaEnd:xS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:FS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const KS=function t(e){function n(t){return e?new qS(t,e):new IS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zS(t,e){this._context=t,this._alpha=e}zS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:FS(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const VS=function t(e){function n(t){return e?new zS(t,e):new RS(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function YS(t){this._context=t}function HS(t){return new YS(t)}function WS(t){return t<0?-1:1}function GS(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(WS(o)+WS(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function JS(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function XS(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function QS(t){this._context=t}function ZS(t){this._context=new tE(t)}function tE(t){this._context=t}function eE(t){return new QS(t)}function nE(t){return new ZS(t)}function rE(t){this._context=t}function iE(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function oE(t){return new rE(t)}function aE(t,e){this._context=t,this._t=e}function sE(t){return new aE(t,.5)}function uE(t){return new aE(t,0)}function cE(t){return new aE(t,1)}function lE(t,e){if((i=t.length)>1)for(var n,r,i,o=1,a=t[e[0]],s=a.length;o<i;++o)for(r=a,a=t[e[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function fE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function hE(t,e){return t[e]}function pE(t){const e=[];return e.key=t,e}function dE(){var t=Qk([]),e=fE,n=lE,r=hE;function i(i){var o,a,s=Array.from(t.apply(this,arguments),pE),u=s.length,c=-1;for(const t of i)for(o=0,++c;o<u;++o)(s[o][c]=[0,+r(t,s[o].key,c,i)]).data=t;for(o=0,a=_O(e(s));o<u;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:Qk(Array.from(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Qk(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?fE:"function"==typeof t?t:Qk(Array.from(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?lE:t,i):n},i}function yE(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}lE(t,e)}}function mE(t,e){if((s=t.length)>0)for(var n,r,i,o,a,s,u=0,c=t[e[0]].length;u<c;++u)for(o=a=0,n=0;n<s;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):(r[0]=0,r[1]=i)}function gE(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}lE(t,e)}}function vE(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],f=l[a][1]||0,h=(f-(l[a-1][1]||0))/2,p=0;p<s;++p){var d=t[e[p]];h+=(d[a][1]||0)-(d[a-1][1]||0)}u+=f,c+=h*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,lE(t,e)}}function bE(t){var e=t.map(_E);return fE(t).sort((function(t,n){return e[t]-e[n]}))}function _E(t){for(var e,n=-1,r=0,i=t.length,o=-1/0;++n<i;)(e=+t[n][1])>o&&(o=e,r=n);return r}function wE(t){var e=t.map(xE);return fE(t).sort((function(t,n){return e[t]-e[n]}))}function xE(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function kE(t){return wE(t).reverse()}function OE(t){var e,n,r=t.length,i=t.map(xE),o=bE(t),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)}function SE(t){return fE(t).reverse()}YS.prototype={areaStart:xS,areaEnd:xS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},QS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:XS(this,this._t0,JS(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,XS(this,JS(this,n=GS(this,t,e)),n);break;default:XS(this,this._t0,n=GS(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(ZS.prototype=Object.create(QS.prototype)).point=function(t,e){QS.prototype.point.call(this,e,t)},tE.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=iE(t),i=iE(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},aE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var EE="%Y-%m-%dT%H:%M:%S.%LZ",AE=Date.prototype.toISOString?function(t){return t.toISOString()}:P_(EE);const TE=AE;var ME=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:L_(EE);const NE=ME;function CE(t,e,n){var r=new eo,i=e;return null==e?(r.restart(t,e,n),r):(r._restart=r.restart,r.restart=function(t,e,n){e=+e,n=null==n?Zi():+n,r._restart((function o(a){a+=i,r._restart(o,i+=e,n),t(a)}),e,n)},r.restart(t,e,n),r)}const jE=t=>()=>t;function PE(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function LE(t,e,n){this.k=t,this.x=e,this.y=n}LE.prototype={constructor:LE,scale:function(t){return 1===t?this:new LE(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new LE(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var IE=new LE(1,0,0);function DE(t){for(;!t.__zoom;)if(!(t=t.parentNode))return IE;return t.__zoom}function RE(t){t.stopImmediatePropagation()}function BE(t){t.preventDefault(),t.stopImmediatePropagation()}function FE(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function $E(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function UE(){return this.__zoom||IE}function qE(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function KE(){return navigator.maxTouchPoints||"ontouchstart"in this}function zE(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function VE(){var t,e,n,r=FE,i=$E,o=zE,a=qE,s=KE,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],l=250,f=Cg,h=yn("start","zoom","end"),p=500,d=150,y=0,m=10;function g(t){t.property("__zoom",UE).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",A).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(t,e){return(e=Math.max(u[0],Math.min(u[1],e)))===t.k?t:new LE(e,t.x,t.y)}function b(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new LE(t.k,r,i)}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n,r){t.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,a=x(t,o).event(r),s=i.apply(t,o),u=null==n?_(s):"function"==typeof n?n.apply(t,o):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,h="function"==typeof e?e.apply(t,o):e,p=f(l.invert(u).concat(c/l.k),h.invert(u).concat(c/h.k));return function(t){if(1===t)t=h;else{var e=p(t),n=c/e[2];t=new LE(n,u[0]-e[0]*n,u[1]-e[1]*n)}a.zoom(null,t)}}))}function x(t,e,n){return!n&&t.__zooming||new k(t,e)}function k(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function O(t,...e){if(r.apply(this,arguments)){var n=x(this,e).event(t),i=this.__zoom,s=Math.max(u[0],Math.min(u[1],i.k*Math.pow(2,a.apply(this,arguments)))),l=Ui(t);if(n.wheel)n.mouse[0][0]===l[0]&&n.mouse[0][1]===l[1]||(n.mouse[1]=i.invert(n.mouse[0]=l)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[l,i.invert(l)],wo(this),n.start()}BE(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),d),n.zoom("mouse",o(b(v(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function S(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,a=x(this,e,!0).event(t),s=Mr(t.view).on("mousemove.zoom",(function(t){if(BE(t),!a.moved){var e=t.clientX-l,n=t.clientY-f;a.moved=e*e+n*n>y}a.event(t).zoom("mouse",o(b(a.that.__zoom,a.mouse[0]=Ui(t,i),a.mouse[1]),a.extent,c))}),!0).on("mouseup.zoom",(function(t){s.on("mousemove.zoom mouseup.zoom",null),Ir(t.view,a.moved),BE(t),a.event(t).end()}),!0),u=Ui(t,i),l=t.clientX,f=t.clientY;Lr(t.view),RE(t),a.mouse=[u,this.__zoom.invert(u)],wo(this),a.start()}}function E(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,a=Ui(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(a),u=n.k*(t.shiftKey?.5:2),f=o(b(v(n,u),a,s),i.apply(this,e),c);BE(t),l>0?Mr(this).transition().duration(l).call(w,f,a,t):Mr(this).call(g.transform,f,a,t)}}function A(n,...i){if(r.apply(this,arguments)){var o,a,s,u,c=n.touches,l=c.length,f=x(this,i,n.changedTouches.length===l).event(n);for(RE(n),a=0;a<l;++a)u=[u=Ui(s=c[a],this),this.__zoom.invert(u),s.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,o=!0,f.taps=1+!!t);t&&(t=clearTimeout(t)),o&&(f.taps<2&&(e=u[0],t=setTimeout((function(){t=null}),p)),wo(this),f.start())}}function T(t,...e){if(this.__zooming){var n,r,i,a,s=x(this,e).event(t),u=t.changedTouches,l=u.length;for(BE(t),n=0;n<l;++n)i=Ui(r=u[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],h=s.touch0[1],p=s.touch1[0],d=s.touch1[1],y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y,m=(m=d[0]-h[0])*m+(m=d[1]-h[1])*m;r=v(r,Math.sqrt(y/m)),i=[(f[0]+p[0])/2,(f[1]+p[1])/2],a=[(h[0]+d[0])/2,(h[1]+d[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(b(r,i,a),s.extent,c))}}function M(t,...r){if(this.__zooming){var i,o,a=x(this,r).event(t),s=t.changedTouches,u=s.length;for(RE(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),p),i=0;i<u;++i)o=s[i],a.touch0&&a.touch0[2]===o.identifier?delete a.touch0:a.touch1&&a.touch1[2]===o.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(o=Ui(o,this),Math.hypot(e[0]-o[0],e[1]-o[1])<m)){var c=Mr(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",UE),t!==i?w(t,e,n,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},g.scaleBy=function(t,e,n,r){g.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},g.scaleTo=function(t,e,n,r){g.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,a=null==n?_(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(a),u="function"==typeof e?e.apply(this,arguments):e;return o(b(v(r,u),a,s),t,c)}),n,r)},g.translateBy=function(t,e,n,r){g.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},g.translateTo=function(t,e,n,r,a){g.transform(t,(function(){var t=i.apply(this,arguments),a=this.__zoom,s=null==r?_(t):"function"==typeof r?r.apply(this,arguments):r;return o(IE.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),r,a)},k.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Mr(this.that).datum();h.call(t,this.that,new PE(t,{sourceEvent:this.sourceEvent,target:g,type:t,transform:this.that.__zoom,dispatch:h}),e)}},g.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:jE(+t),g):a},g.filter=function(t){return arguments.length?(r="function"==typeof t?t:jE(!!t),g):r},g.touchable=function(t){return arguments.length?(s="function"==typeof t?t:jE(!!t),g):s},g.extent=function(t){return arguments.length?(i="function"==typeof t?t:jE([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):i},g.scaleExtent=function(t){return arguments.length?(u[0]=+t[0],u[1]=+t[1],g):[u[0],u[1]]},g.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(t){return arguments.length?(o=t,g):o},g.duration=function(t){return arguments.length?(l=+t,g):l},g.interpolate=function(t){return arguments.length?(f=t,g):f},g.on=function(){var t=h.on.apply(h,arguments);return t===h?g:t},g.clickDistance=function(t){return arguments.length?(y=(t=+t)*t,g):Math.sqrt(y)},g.tapDistance=function(t){return arguments.length?(m=+t,g):m},g}function YE(t){return YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YE(t)}function HE(t){var e=function(t,e){if("object"!=YE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=YE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YE(e)?e:e+""}DE.prototype=LE.prototype;var WE=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e,this.viewport=n,this.layout=r},e=[{key:"execute",value:function(t){return!1}},{key:"finalize",value:function(t){return!1}},{key:"applySceneTransform",value:function(){var t=this.pluginData.scene,e=t.x,n=t.y,r=t.zoom,i="translate(".concat(e," ").concat(n,")"),o="scale(".concat(r,")");this.viewport.selectAll(".scene > g").attr("transform","".concat(i," ").concat(o))}},{key:"getSourcesId",value:function(t){return this.pluginData.scene.selection.includes(t.subject.datum().data.id)?this.pluginData.scene.selection:[t.subject.datum().data.id]}},{key:"getSourcePosition",value:function(t){var e=this.viewport.select(".".concat(t," .model"));return{x:parseFloat(e.attr("x")),y:parseFloat(e.attr("y"))}}},{key:"getTargetsByDepth",value:function(t){var e=this,n=t.subject.datum().data.id,r=t.sourceEvent,i=r.clientX,o=r.clientY,a=[];return this.viewport.selectAll("g.component.container:not(.".concat(n,")")).each((function(t){var n=e.viewport.select(".".concat(t.data.id," .background")).node().getBoundingClientRect(),r=n.x,s=n.y,u=n.width,c=n.height;if(i>=r&&i<=r+u&&o>=s&&o<=s+c){for(var l=parseInt(e.viewport.select(".".concat(t.data.id)).attr("depth"),10)-1;a.length<=l;)a.push([]);a[l].push(t.data.id)}})),a}},{key:"getTargetsId",value:function(t){return this.getTargetsByDepth(t).flat().reverse()}},{key:"getTargetId",value:function(t){return this.getTargetsId(t)[0]}},{key:"getTransform",value:function(t,e){var n=this.viewport.select(t).node().getBoundingClientRect(),r=n.x,i=n.y,o=this.viewport.select(e).node().getBoundingClientRect();return{dx:r-o.x,dy:i-o.y}}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HE(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const GE=WE;function JE(t){return JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JE(t)}function XE(t){var e=function(t,e){if("object"!=JE(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=JE(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JE(e)?e:e+""}function QE(t,e,n){return e=tA(e),function(t,e){if(e&&("object"==JE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ZE()?Reflect.construct(e,n||[],tA(t).constructor):e.apply(t,n))}function ZE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ZE=function(){return!!t})()}function tA(t){return tA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tA(t)}function eA(t,e){return eA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eA(t,e)}var nA=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),QE(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eA(t,e)}(e,t),n=e,r=[{key:"finalize",value:function(){var t=this;return 0!==this.pluginData.scene.selection.length&&(this.pluginData.scene.selection.forEach((function(e){t.pluginData.removeComponentById(e)})),this.pluginData.emitEvent({components:this.pluginData.scene.selection,type:"Drawer",action:"delete",status:"success"}),this.pluginData.scene.selection=[],!0)}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XE(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const rA=nA;function iA(t){return iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iA(t)}function oA(t){var e=function(t,e){if("object"!=iA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=iA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==iA(e)?e:e+""}function aA(t,e,n){return e=uA(e),function(t,e){if(e&&("object"==iA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sA()?Reflect.construct(e,n||[],uA(t).constructor):e.apply(t,n))}function sA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sA=function(){return!!t})()}function uA(t){return uA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uA(t)}function cA(t,e){return cA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cA(t,e)}var lA=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=aA(this,e,[t,n,r])).isInit=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cA(t,e)}(e,t),n=e,r=[{key:"execute",value:function(t){var e=this,n=this.getSourcesId(t);if(!this.isInit){this.isInit=!0;var r=this.getParentTypes(n);this.pluginData.components.filter((function(t){var e=t.id,i=t.definition;return!r.includes(i.type)&&!n.includes(e)})).forEach((function(t){e.viewport.select(".".concat(t.id,".component .canBeHidden")).classed("hide",!0)}))}return n.forEach((function(n){var r=e.viewport.select(".".concat(n," .model"));r.attr("x",(parseFloat(r.attr("x"))||0)+t.dx/e.pluginData.scene.zoom).attr("y",(parseFloat(r.attr("y"))||0)+t.dy/e.pluginData.scene.zoom)})),!1}},{key:"finalize",value:function(t){var e=this;this.isInit=!1;var n=this.getSourcesId(t),r=this.getTargetsId(t)[0]||null,i=n.map((function(t){return e.pluginData.getComponentById(t)}));return null===r?(this.dropOnScene(t,i),!0):this.dropOnTarget(t,i,this.pluginData.getComponentById(r))}},{key:"dropOnScene",value:function(t,e){var n,r=this,i=e[0].getContainerId(),o=null!==i,a=this.pluginData.getComponentById(i);return e.forEach((function(t){var e=r.getSourcePosition(t.id),s=e.x,u=e.y;if(o){t.removeAllReferenceAttributes(a);var c=r.getTransform(".".concat(i," .components-background"),".scene"),l=c.dx,f=c.dy;t.drawOption.x=s+(l-r.pluginData.scene.x)/r.pluginData.scene.zoom,t.drawOption.y=u+(f-r.pluginData.scene.y)/r.pluginData.scene.zoom,n="update"}else t.drawOption.x=s,t.drawOption.y=u,n="move"})),a&&"workflow"===a.definition.displayType&&this.layout.generateComponentsLayout(i),this.pluginData.emitEvent({components:e.map((function(t){return t.id})),type:"Drawer",action:n,status:"success"}),o}},{key:"dropOnTarget",value:function(t,e,n){var r=this;if(!e.every((function(t){return n.canContain(t.definition.type)})))return e.forEach((function(e){var n=r.viewport.select(".".concat(e.id," .model"));n.attr("x",parseFloat(n.attr("x"))+t.dx/r.pluginData.scene.zoom).attr("y",parseFloat(n.attr("y"))+t.dy/r.pluginData.scene.zoom)})),!1;if("workflow"===n.definition.displayType)return this.dropInWorkflow(t,e,n);var i=e[0].getContainerId()!==n.id;return e.forEach((function(t){i&&t.setReferenceAttribute(n);var e=r.getTransform(".".concat(t.id," .background"),".".concat(n.id," .components-background")),o=e.dx,a=e.dy;t.drawOption.x=o<1?1:o/r.pluginData.scene.zoom,t.drawOption.y=a<1?1:a/r.pluginData.scene.zoom})),this.pluginData.emitEvent({components:e.map((function(t){return t.id})),type:"Drawer",action:i?"update":"move",status:"success"}),!0}},{key:"dropInWorkflow",value:function(t,e,n){var r,i=this,o=e[0].getContainerId(),a=this.pluginData.getComponentById(n.id),s=this.pluginData.getChildren(n.id),u="vertical"===n.definition.workflowDirection,c=this.pluginData.components.filter((function(t){var n=t.id;return e.some((function(t){var e=t.id;return n===e}))})).map((function(t){return t.id}));return s.filter((function(t){var e=t.id;return!c.includes(e)})).forEach((function(e){var n=i.viewport.select(".".concat(e.id," .model")).node().getBoundingClientRect(),o=n.x,a=n.y,s=n.width,c=n.height;u&&a+c/2<t.sourceEvent.clientY&&(r=e.id),!u&&o+s/2<t.sourceEvent.clientX&&(r=e.id)})),c.forEach((function(t){i.pluginData.getComponentById(t).setReferenceAttribute(a),r?i.pluginData.insertComponentAfter(t,r):t!==(r=i.pluginData.components.find((function(t){return t.getContainerId()===n.id})).id)&&i.pluginData.insertComponentBefore(t,r),r=t})),o!==n.id&&o&&this.layout.generateComponentsLayout(o,!1),this.layout.generateComponentsLayout(n.id,!1),this.pluginData.emitEvent({components:c,type:"Drawer",action:"update",status:"success"}),!0}},{key:"getParentTypes",value:function(t){var e=this,n=new Map;t.map((function(t){return e.pluginData.getComponentById(t)})).forEach((function(t){var e=t.id;t.definition.parentTypes.forEach((function(t){n.has(t)||n.set(t,[]),n.get(t).push(e)}))}));var r=[];return n.forEach((function(e,n){e.length===t.length&&r.push(n)})),r}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const fA=lA;function hA(t){return hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hA(t)}function pA(t){var e=function(t,e){if("object"!=hA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=hA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hA(e)?e:e+""}function dA(t,e,n){return e=mA(e),function(t,e){if(e&&("object"==hA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yA()?Reflect.construct(e,n||[],mA(t).constructor):e.apply(t,n))}function yA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yA=function(){return!!t})()}function mA(t){return mA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mA(t)}function gA(t,e){return gA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gA(t,e)}var vA=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dA(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gA(t,e)}(e,t),n=e,(r=[{key:"execute",value:function(t){return this.pluginData.scene.x+=t.dx,this.pluginData.scene.y+=t.dy,this.applySceneTransform(),!1}},{key:"finalize",value:function(){return this.pluginData.emitEvent({components:[],type:"Drawer",action:"move",status:"success"}),!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const bA=vA;function _A(t){return _A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_A(t)}function wA(t){var e=function(t,e){if("object"!=_A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=_A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_A(e)?e:e+""}function xA(t,e,n){return e=OA(e),function(t,e){if(e&&("object"==_A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kA()?Reflect.construct(e,n||[],OA(t).constructor):e.apply(t,n))}function kA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kA=function(){return!!t})()}function OA(t){return OA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OA(t)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SA(t,e)}var EA=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=xA(this,e,[t,n,r])).isInit=!1,i.link=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}(e,t),n=e,(r=[{key:"execute",value:function(t){var e=this;if(!this.isInit){this.isInit=!0;var n=t.subject.datum().data.id,r=this.pluginData.getComponentById(n);this.viewport.style("cursor","grabbing");var i=t.sourceEvent.target.closest(".anchor").attributes.name.value;this.pluginData.components.filter((function(t){var n=t.definition;return!e.pluginData.canBeLinked(r.definition.type,n.type)})).forEach((function(t){e.viewport.select(".".concat(t.id,".component .canBeHidden")).classed("hide",!0)})),this.pluginData.createTemporaryLink(n,i),this.link=new I({source:n})}return this.pluginData.temporaryLink.endX=t.sourceEvent.clientX,this.pluginData.temporaryLink.endY=t.sourceEvent.clientY,!1}},{key:"finalize",value:function(t){this.isInit=!1,this.pluginData.temporaryLink=null,this.viewport.style("cursor",null);var e=this.pluginData.getComponentById(t.subject.datum().data.id),n=this.pluginData.getComponentById(this.getTargetId(t)),r=this.pluginData.definitions.links.find((function(t){var r=t.sourceRef,i=t.targetRef;return e.definition.type===r&&(null==n?void 0:n.definition.type)===i}));return n&&r&&(e.setLinkAttribute(new I({source:e.id,target:n.id,definition:r})),this.pluginData.emitEvent({components:[e.id],type:"Drawer",action:"update",status:"success"})),!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const AA=EA;function TA(t){return TA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TA(t)}function MA(t){var e=function(t,e){if("object"!=TA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=TA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==TA(e)?e:e+""}function NA(t,e,n){return e=jA(e),function(t,e){if(e&&("object"==TA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CA()?Reflect.construct(e,n||[],jA(t).constructor):e.apply(t,n))}function CA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CA=function(){return!!t})()}function jA(t){return jA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jA(t)}function PA(t,e){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PA(t,e)}var LA=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),NA(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PA(t,e)}(e,t),n=e,(r=[{key:"finalize",value:function(t){return this.pluginData.emitEvent({components:[t.subject.datum().data.id],type:"Drawer",action:"openMenu",data:t.sourceEvent,status:"success"}),!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const IA=LA;function DA(t){return DA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DA(t)}function RA(t){var e=function(t,e){if("object"!=DA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=DA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==DA(e)?e:e+""}function BA(t,e,n){return e=$A(e),function(t,e){if(e&&("object"==DA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FA()?Reflect.construct(e,n||[],$A(t).constructor):e.apply(t,n))}function FA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FA=function(){return!!t})()}function $A(t){return $A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$A(t)}function UA(t,e){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UA(t,e)}var qA=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),BA(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UA(t,e)}(e,t),n=e,r=[{key:"execute",value:function(t){var e=t.subject.datum(),n=this.pluginData.scene.zoom,r=this.viewport.select(".".concat(e.data.id," .model")),i=r.node().getBoundingClientRect(),o=this.getMaxPosition(e.data.id),a=o.x,s=o.y,u=t.sourceEvent,c=u.clientX,l=u.clientY,f=Math.max((a-i.x)/n,e.data.definition.minWidth),h=Math.max((s-i.y)/n,e.data.definition.minHeight),p=(c-i.x)/n,d=(l-i.y)/n;r.attr("width",p>f?p:f),r.attr("height",d>h?d:h);var y=this.viewport.select(".".concat(e.data.id," .components-background")),m=y.node().getBoundingClientRect();return f=Math.max((a-m.x)/n,e.data.definition.minWidth-e.data.definition.reservedWidth),h=Math.max((s-m.y)/n,e.data.definition.minHeight-e.data.definition.reservedHeight),p=(c-m.x)/n,d=(l-m.y)/n,y.attr("width",p>f?p:f),y.attr("height",d>h?d:h),!1}},{key:"finalize",value:function(t){var e=t.subject.datum().data.id,n=this.viewport.select(".".concat(e," .model")),r=this.pluginData.getComponentById(e);return r.drawOption.width=parseFloat(n.attr("width")),r.drawOption.height=parseFloat(n.attr("height")),this.pluginData.emitEvent({components:[e],type:"Drawer",action:"resize",status:"success"}),!0}},{key:"getMaxPosition",value:function(t){var e=this,n=this.pluginData.getComponentById(t),r=0,i=0;return this.pluginData.getChildren(t).forEach((function(t){var o=e.viewport.select(".".concat(t.id," .model")).node().getBoundingClientRect(),a=o.x,s=o.y,u=o.width,c=o.height;r=Math.max(r,a+u+n.definition.margin),i=Math.max(i,s+c+n.definition.margin)})),{x:r,y:i}}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const KA=qA;function zA(t){return zA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zA(t)}function VA(t){return function(t){if(Array.isArray(t))return YA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return YA(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YA(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function HA(t){var e=function(t,e){if("object"!=zA(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=zA(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zA(e)?e:e+""}function WA(t,e,n){return e=JA(e),function(t,e){if(e&&("object"==zA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GA()?Reflect.construct(e,n||[],JA(t).constructor):e.apply(t,n))}function GA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GA=function(){return!!t})()}function JA(t){return JA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JA(t)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XA(t,e)}var QA=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),WA(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}(e,t),n=e,r=[{key:"finalize",value:function(t){var e=t.subject.datum().data,n=e.getContainerId();return this.pluginData.scene.selection.includes(e.id)?this.pluginData.scene.selection=this.pluginData.scene.selection.filter((function(t){return t!==e.id})):(0===this.pluginData.scene.selection.length&&(this.pluginData.scene.selectionRef=n),n===this.pluginData.scene.selectionRef?this.pluginData.scene.selection.push(e.id):(this.pluginData.scene.selectionRef=n,this.pluginData.scene.selection=[e.id])),this.pluginData.emitEvent({components:VA(this.pluginData.scene.selection),type:"Drawer",action:"select",status:"success"}),!0}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HA(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const ZA=QA;function tT(t){return tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tT(t)}function eT(t){var e=function(t,e){if("object"!=tT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=tT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tT(e)?e:e+""}function nT(t,e,n){return e=iT(e),function(t,e){if(e&&("object"==tT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rT()?Reflect.construct(e,n||[],iT(t).constructor):e.apply(t,n))}function rT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rT=function(){return!!t})()}function iT(t){return iT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iT(t)}function oT(t,e){return oT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oT(t,e)}var aT=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nT(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oT(t,e)}(e,t),n=e,(r=[{key:"execute",value:function(){return this.pluginData.scene.selection=[],this.pluginData.emitEvent({components:[],type:"Drawer",action:"select",status:"success"}),!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eT(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const sT=aT;function uT(t){return uT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uT(t)}function cT(t){return function(t){if(Array.isArray(t))return lT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return lT(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lT(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function fT(t){var e=function(t,e){if("object"!=uT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=uT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uT(e)?e:e+""}function hT(t,e,n){return e=dT(e),function(t,e){if(e&&("object"==uT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pT()?Reflect.construct(e,n||[],dT(t).constructor):e.apply(t,n))}function pT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pT=function(){return!!t})()}function dT(t){return dT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dT(t)}function yT(t,e){return yT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yT(t,e)}var mT=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),hT(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yT(t,e)}(e,t),n=e,(r=[{key:"execute",value:function(){return this.pluginData.scene.selection=this.pluginData.components.filter((function(t){return null===t.getContainerId()})).map((function(t){return t.id})),this.pluginData.emitEvent({components:cT(this.pluginData.scene.selection),type:"Drawer",action:"select",status:"success"}),!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fT(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const gT=mT;function vT(t){return vT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vT(t)}function bT(t){var e=function(t,e){if("object"!=vT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=vT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vT(e)?e:e+""}function _T(t,e,n){return e=xT(e),function(t,e){if(e&&("object"==vT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wT()?Reflect.construct(e,n||[],xT(t).constructor):e.apply(t,n))}function wT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wT=function(){return!!t})()}function xT(t){return xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xT(t)}function kT(t,e){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kT(t,e)}var OT=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),_T(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}(e,t),n=e,(r=[{key:"execute",value:function(t){var e=t.deltaY<0?1.1:.9,n=this.viewport.node().getBoundingClientRect(),r=n.x,i=n.y,o=t.clientX-r,a=t.clientY-i,s=this.pluginData.scene.x,u=this.pluginData.scene.y;this.pluginData.scene.zoom*=e;var c=o-(o-s)*e,l=a-(a-u)*e;return this.pluginData.scene.x=c,this.pluginData.scene.y=l,this.applySceneTransform(),this.pluginData.emitEvent({type:"Drawer",action:"zoom",status:"success"}),!1}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bT(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(GE);const ST=OT;var ET=r(326);function AT(t){return AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AT(t)}function TT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function MT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?TT(Object(n),!0).forEach((function(e){NT(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function NT(t,e,n){return(e=CT(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CT(t){var e=function(t,e){if("object"!=AT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=AT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==AT(e)?e:e+""}var jT=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null,this.viewport=n||null,this.readOnly=!!r},e=[{key:"renderModel",value:function(t){return(0,ET.renderString)(this.pluginData.resources.models[t.definition.model],this.getTemplateData(t))}},{key:"render",value:function(t){var e=this,n=this.viewport.select(".".concat(t));n.select(".components").selectAll('.component[depth="'.concat(n.datum().depth+1,'"]')).data((function(t){return t.children||[]})).join("g").attr("class",(function(t){var e=t.data;return"".concat(e.id," component ").concat(e.definition.isContainer?"container":"")})).attr("depth",(function(t){var n=t.data;return e.pluginData.getComponentDepth(n.id)+1})).html((function(t){var n=t.data;return e.renderModel(n)})).filter((function(t){var e=t.data,n=t.children;return e.definition.isContainer&&!!n})).each((function(t){var n=t.data;return e.render(n.id)}))}},{key:"getTemplateData",value:function(t){var e=this;return MT(MT({},t),{},{drawOption:MT(MT({},t.drawOption),{},{x:t.drawOption.x||0,y:t.drawOption.y||0,width:t.drawOption.width||t.definition.width,height:t.drawOption.height||t.definition.height}),isReadOnly:this.readOnly,icon:this.pluginData.resources.icons[t.definition.icon],hasError:t.hasError(),hasX:!!t.drawOption.x,hasY:!!t.drawOption.y,isSelected:this.pluginData.scene.selection.includes(t.id),getIcon:function(t){return e.pluginData.resources.icons[t]},canHaveLink:this.pluginData.canHaveLink(t.definition.type),getAttribute:function(e){return t.attributes.find((function(t){return t.name===e}))}})}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CT(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const PT=jT;function LT(t){return LT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LT(t)}function IT(t){var e=function(t,e){if("object"!=LT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=LT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LT(e)?e:e+""}var DT=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null,this.viewport=n||null,this.readOnly=!!r,this.scenePosition=null},e=[{key:"render",value:function(){var t=this;this.scenePosition=this.viewport.select(".scene").node().getBoundingClientRect(),this.viewport.select(".scene .links").selectAll(".link").data((function(){return t.pluginData.getLinks()})).join("g").attr("class",(function(t){return"".concat(t.source,"_to_").concat(t.target," link")})).attr("from",(function(t){return t.source})).attr("to",(function(t){return t.target})).html((function(e){return(0,ET.renderString)(t.pluginData.resources.links[e.definition.model]||"",t.getTemplateData(e))}))}},{key:"getLinkPoints",value:function(t,e){var n=this.getReducedPointPositionOnSegment(t.x,t.y,e.x,e.y,10),r=this.getReducedPointPositionOnSegment(t.x,t.y,e.x,e.y,5),i=(t.x-this.scenePosition.x-this.pluginData.scene.x)/this.pluginData.scene.zoom,o=(t.y-this.scenePosition.y-this.pluginData.scene.y)/this.pluginData.scene.zoom,a=(n.x-this.scenePosition.x-this.pluginData.scene.x)/this.pluginData.scene.zoom,s=(n.y-this.scenePosition.y-this.pluginData.scene.y)/this.pluginData.scene.zoom,u=(r.x-this.scenePosition.x-this.pluginData.scene.x)/this.pluginData.scene.zoom,c=(r.y-this.scenePosition.y-this.pluginData.scene.y)/this.pluginData.scene.zoom;return SO().curve(SS)([[i,o],[i+.2*(a-i),o+.8*(s-o)],[a,s],[u,c]])}},{key:"getClosestAnchor",value:function(t,e){var n=this.viewport.select(".".concat(e," .background")).node().getBoundingClientRect(),r=n.x+n.width/2,i=n.y+n.height/2,o=null,a=null;return this.viewport.selectAll(".".concat(t,".anchors .anchor")).each((function(t,e,n){var s=n[e],u=s.attributes.name.value,c=s.getBoundingClientRect(),l=r-c.x,f=i-c.y,h=Math.sqrt(l*l+f*f);(null===a||h<o)&&(o=h,a={name:u,x:c.x+c.width/2,y:c.y+c.height/2,width:c.width})})),a}},{key:"getReducedPointPositionOnSegment",value:function(t,e,n,r,i){if(t===n&&e===r)return{x:0,y:0};var o=n-t,a=r-e,s=Math.sqrt(o*o+a*a),u=(s-i)/s;return{x:t+o*u,y:e+a*u}}},{key:"getTemplateData",value:function(t){var e,n;if(t.isTemporary)e=this.viewport.select(".".concat(t.source,' .anchors .anchor[name="').concat(t.anchorName,'"]')).node().getBoundingClientRect(),e={name:t.anchorName,x:e.x+e.width/2,y:e.y+e.height/2,width:e.width},n={x:t.endX,y:t.endY};else{var r=t.isReverse?t.target:t.source,i=t.isReverse?t.source:t.target;e=this.getClosestAnchor(r,i),n=this.getClosestAnchor(i,r)}return{d:this.getLinkPoints(e,n)}}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IT(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const RT=DT;function BT(t){return BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BT(t)}function FT(t){var e=function(t,e){if("object"!=BT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=BT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==BT(e)?e:e+""}var $T=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null,this.viewport=n||null},(e=[{key:"generateComponentsLayout",value:function(t,e){return!0}},{key:"resize",value:function(t){return!0}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FT(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function UT(t){return UT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UT(t)}function qT(t){var e=function(t,e){if("object"!=UT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=UT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==UT(e)?e:e+""}function KT(t,e,n){return e=VT(e),function(t,e){if(e&&("object"==UT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zT()?Reflect.construct(e,n||[],VT(t).constructor):e.apply(t,n))}function zT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zT=function(){return!!t})()}function VT(t){return VT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VT(t)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},YT(t,e)}var HT=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),KT(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}(e,t),n=e,r=[{key:"generateComponentsLayout",value:function(t,e){var n=this,r=this.getNodes(),i=r.get(t||"root"),o=[],a=[];return this.generateLayout(r,i,e),r.forEach((function(e){if("root"!==e.id&&(null===t||t===e.parent.id||t===e.id)){var r=n.pluginData.getComponentById(e.id),i=r.drawOption.x!==e.x||r.drawOption.y!==e.y,s=r.drawOption.width!==e.width||r.drawOption.height!==e.height;r.drawOption.x=e.x,r.drawOption.y=e.y,r.drawOption.width=e.width,r.drawOption.height=e.height,i?o.push(r.id):s&&a.push(r.id)}})),o.length>0&&this.pluginData.emitEvent({components:o,type:"Drawer",action:"move",status:"success"}),a.length>0&&this.pluginData.emitEvent({components:a,type:"Drawer",action:"resize",status:"success"}),!0}},{key:"getNodes",value:function(){var t=this,e={id:"root",parent:null,children:[],depth:0,type:"default",isContainer:!0,margin:this.pluginData.configuration.rootContainer.margin,gap:this.pluginData.configuration.rootContainer.gap},n=new Map(this.pluginData.components.map((function(e){return[e.id,t.createNode(e)]})));return n.set("root",e),n.forEach((function(t){if(t.parent){var e=n.get(t.parent);t.parent=e,e.children.push(t)}})),n}},{key:"createNode",value:function(t){return{id:t.id,parent:t.getContainerId()||"root",type:t.definition.displayType||"default",direction:t.definition.workflowDirection,children:[],depth:this.pluginData.getComponentDepth(t.id)+1,isContainer:t.definition.isContainer,width:t.definition.defaultWidth,height:t.definition.defaultHeight,minWidth:t.definition.minWidth,minHeight:t.definition.minHeight,reservedWidth:t.definition.reservedWidth,reservedHeight:t.definition.reservedHeight,margin:t.definition.margin,gap:t.definition.gap,x:t.drawOption.x,y:t.drawOption.y}}},{key:"generateLayout",value:function(t,e,n){var r=this;e.children.forEach((function(e){r.generateLayout(t,e,n)})),e.isContainer&&"default"===e.type?this.generateDefaultLayout(e,n):e.isContainer&&this.generateWorkflowLayout(t,e)}},{key:"generateDefaultLayout",value:function(t,e){this.text=0;var n=[],r=[],i=t.margin,o=t.gap,a=t.minWidth,s=t.minHeight,u=t.reservedWidth,c=t.reservedHeight,l=0,f=0;t.children.forEach((function(t){t.x&&t.y&&e?(n.push(t),l=Math.max(t.x+t.width,l),f=Math.max(t.y+t.height,f)):r.push(t)}));for(var h,p=0,d=0,y=this.getPoints(p,i,o);r.length>0;)h||(h=r[0]),0===y.length&&(d=0,p+=1,y=this.getPoints(p,i,o)),y.length>0&&this.canBePlaced(n,h,y[d])&&(h.x=y[d].x,h.y=y[d].y,l=Math.max(h.x+h.width,l),f=Math.max(h.y+h.height,f),n.push(h),r.shift(),h=null),(d+=1)>=y.length&&(d=0,p+=1,y=this.getPoints(p,i,o));t.width=Math.max(l+i+u,a),t.height=Math.max(f+i+c,s)}},{key:"canBePlaced",value:function(t,e,n){return t.every((function(t){var r=t.x,i=t.y,o=t.width,a=t.height,s=n.x+e.width<r,u=n.x>r+o,c=n.y+e.height<i,l=n.y>i+a;return s||u||c||l}))}},{key:"getPoints",value:function(t,e,n){if(0===t)return[{x:e,y:e}];for(var r=e+n*t,i=e+n*t,o=[],a=e,s=e;s<=r&&(s!==r||i!==a);)o.push({x:s,y:i}),s+=n,o.push({x:r,y:a}),a+=n;return o.push({x:r,y:i}),o}},{key:"generateWorkflowLayout",value:function(t,e){"vertical"===e.direction?this.generateVerticalWorkflowLayout(t,e):this.generateHorizontalWorkflowLayout(t,e)}},{key:"generateHorizontalWorkflowLayout",value:function(t,e){var n=e.margin,r=e.gap,i=e.minWidth,o=e.minHeight,a=e.reservedWidth,s=e.reservedHeight,u=n,c=0;e.children.forEach((function(t){t.x=u,t.y=n,u=t.x+t.width+r,t.height>c&&(c=t.height)})),e.width=Math.max(u-r+n+a,i),e.height=Math.max(c+2*n+s,o)}},{key:"generateVerticalWorkflowLayout",value:function(t,e){var n=e.margin,r=e.gap,i=e.minWidth,o=e.minHeight,a=e.reservedWidth,s=e.reservedHeight,u=n,c=0;e.children.forEach((function(t){t.x=n,t.y=u,u=t.y+t.height+r,t.width>c&&(c=t.width)})),e.width=Math.max(c+2*n+a,i),e.height=Math.max(u-r+n+s,o)}},{key:"resize",value:function(t){var e=this.pluginData.getComponentById(t);if(!e.definition.isContainer)return!1;var n=0,r=0;this.pluginData.getChildren(t).forEach((function(t){var e=t.drawOption.x+t.drawOption.width,i=t.drawOption.y+t.drawOption.height;e>n&&(n=e),i>r&&(r=i)}));var i=e.definition,o=i.minWidth,a=i.minHeight,s=i.reservedWidth,u=i.reservedHeight,c=i.margin,l=Math.max(n+2*c+s,o),f=Math.max(r+2*c+u,a);return l===e.drawOption.width&&f===e.drawOption.height||(e.drawOption.width=l,e.drawOption.height=f,this.pluginData.emitEvent({components:[t],type:"Drawer",action:"resize",status:"success"})),!0}}],r&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qT(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}($T);const WT=HT;function GT(t){return GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GT(t)}function JT(t){return function(t){if(Array.isArray(t))return XT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return XT(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XT(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function QT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ZT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?QT(Object(n),!0).forEach((function(e){tM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tM(t,e,n){return(e=rM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eM(){eM=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new N(r||[]);return i(a,"_invoke",{value:E(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",m={};function g(){}function v(){}function b(){}var _={};c(_,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(C([])));x&&x!==n&&r.call(x,a)&&(_=x);var k=b.prototype=g.prototype=Object.create(_);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=f(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==GT(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function E(e,n,r){var i=h;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===y){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=A(s,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=d;var c=f(e,n,r);if("normal"===c.type){if(i=r.done?y:p,c.arg===m)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=y,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=f(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(GT(e)+" is not iterable")}return v.prototype=b,i(k,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},O(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function nM(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function rM(t){var e=function(t,e){if("object"!=GT(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=GT(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==GT(e)?e:e+""}var iM=function(){return e=function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.pluginData=n,this.componentRenderer=null,this.linkRenderer=null,this.layout=null,this.viewport=null,this.scene=null,this.d3=t,this.actions={deleteAction:null,dragComponent:null,dragScene:null,linkAction:null,menuAction:null,resizeComponent:null,toggleSelection:null,selectionAll:null,deselectionAll:null,zoom:null},this.states={linking:!1,menuOpening:!1,moving:!1,resizing:!1,selection:!1},this.readOnly=!1},n=[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.d3.select("#".concat(t)).selectAll(null).remove(),this.d3.select("#".concat(t)).html(""),this.viewport=this.d3.select("#".concat(t)),this.componentRenderer=this.initComponentRenderer(e),this.linkRenderer=this.initLinkRenderer(e),this.layout=new WT(this.pluginData,this.viewport),this.readOnly=e,this.clearActions(),this.readOnly&&(this.pluginData.scene.x=0,this.pluginData.scene.y=0,this.pluginData.scene.zoom=1),this.initActions(),this.initScene()}},{key:"initComponentRenderer",value:function(t){return new PT(this.pluginData,this.viewport,t)}},{key:"initLinkRenderer",value:function(t){return new RT(this.pluginData,this.viewport,t)}},{key:"clearActions",value:function(){this.actions.deleteAction=null,this.actions.dragComponent=null,this.actions.dragScene=null,this.actions.menuAction=null,this.actions.resizeComponent=null,this.actions.toggleSelection=null,this.actions.selectionAll=null,this.actions.deselectionAll=null,this.actions.zoom=null,this.viewport.on("wheel",null),this.d3.select("body").on("keydown",null).on("keyup",null),this.viewport.on(".drag",null)}},{key:"initActions",value:function(){var t=this;this.actions.selectionAll=new gT(this.pluginData,this.viewport,this.layout),this.actions.deleteAction=new rA(this.pluginData,this.viewport,this.layout),this.actions.dragScene=new bA(this.pluginData,this.viewport,this.layout),this.actions.menuAction=new IA(this.pluginData,this.viewport,this.layout),this.actions.link=new AA(this.pluginData,this.viewport,this.layout),this.actions.zoom=new ST(this.pluginData,this.viewport,this.layout),this.actions.dragComponent=new fA(this.pluginData,this.viewport,this.layout),this.actions.resizeComponent=new KA(this.pluginData,this.viewport,this.layout),this.actions.toggleSelection=new ZA(this.pluginData,this.viewport,this.layout),this.actions.deselectionAll=new sT(this.pluginData,this.viewport,this.layout),this.viewport.on("wheel",(function(e){t.actions.zoom.execute(e)&&t.draw()})),this.readOnly||this.d3.select("body").on("keydown",(function(e){var n=!1;t.pluginData.configuration.keysBinding.selection.includes(e.key)&&(t.states.selection=!0),t.pluginData.configuration.keysBinding.deleteObject.includes(e.key)&&(n=t.actions.deleteAction.execute(e)),t.pluginData.configuration.keysBinding.selectAll.includes(e.key)&&(n=t.actions.selectionAll.execute(e)),t.pluginData.configuration.keysBinding.deselectAll.includes(e.key)&&(n=t.actions.deselectionAll.execute(e)),n&&t.draw()})).on("keyup",(function(e){var n=!1;t.pluginData.configuration.keysBinding.selection.includes(e.key)&&(t.states.selection=!1),t.pluginData.configuration.keysBinding.deleteObject.includes(e.key)&&(n=t.actions.deleteAction.finalize(e)),t.pluginData.configuration.keysBinding.selectAll.includes(e.key)&&(n=t.actions.selectionAll.finalize(e)),t.pluginData.configuration.keysBinding.deselectAll.includes(e.key)&&(n=t.actions.deselectionAll.finalize(e)),n&&t.draw()}));var e=this.d3.drag().subject((function(e){var n=e.sourceEvent.target.closest(".component");if(t.states.resizing=!!e.sourceEvent.target.closest(".resize-button"),t.states.menuOpening=!!e.sourceEvent.target.closest(".menu-button"),!n)return t.scene;var r=t.viewport.select(Array.from(n.classList).map((function(t){return".".concat(t)})).join(""));return t.states.linking=!!e.sourceEvent.target.closest(".anchor")&&t.pluginData.canHaveLink(r.datum().data.definition.type),r})).on("drag",(function(e){t.states.moving=!0;var n="scene"===e.subject.datum().data.id,r=!1;t.readOnly?t.actions.dragScene.execute(e):(n?r=t.actions.dragScene.execute(e):t.states.linking?(r=t.actions.link.execute(e),t.linkRenderer.render()):t.states.resizing?(r=t.actions.resizeComponent.execute(e),t.linkRenderer.render()):(r=t.actions.dragComponent.execute(e),t.linkRenderer.render()),r&&t.draw())})).on("end",function(){var e,n=(e=eM().mark((function e(n){var r,i,o,a,s,u,c;return eM().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.states.moving,i=t.states.selection,o=t.states.menuOpening,a=t.states.resizing,s=t.states.linking,u="scene"===n.subject.datum().data.id,c=!1,!t.readOnly){e.next=10;break}return u&&r&&t.actions.dragScene.finalize(n),e.abrupt("return");case 10:s?c=t.actions.link.finalize(n):r&&u?c=t.actions.dragScene.finalize(n):a?c=t.actions.resizeComponent.finalize(n):r&&!u?c=t.actions.dragComponent.finalize(n):!r&&o?c=t.actions.menuAction.finalize(n):r||u||!i||(c=t.actions.toggleSelection.finalize(n)),c&&t.draw(),t.states.moving=!1;case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(t){nM(o,r,i,a,s,"next",t)}function s(t){nM(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}());this.viewport.call(e)}},{key:"getScene",value:function(){return this.viewport.selectAll(".scene").data(this.getSceneData()).join("svg").attr("class","scene").attr("width","100%").attr("height","100%")}},{key:"initScene",value:function(){var t=this;this.viewport.append("style").text(this.pluginData.resources.style),this.scene=this.getScene(),this.scene.attr("version","1.1"),this.scene.attr("xmlns","http://www.w3.org/2000/svg"),this.scene.append("defs").html(Object.keys(this.pluginData.resources.markers).map((function(e){return t.pluginData.resources.markers[e]})).join(""));var e=this.pluginData.scene,n=e.x,r=e.y,i=e.zoom,o="translate(".concat(n," ").concat(r,") scale(").concat(i,")");this.scene.append("g").attr("class","components").attr("transform",o),this.scene.append("g").attr("class","links").attr("transform",o)}},{key:"draw",value:function(){if(this.scene=this.getScene(),this.componentRenderer.render("scene"),this.linkRenderer.render("scene"),this.readOnly){for(var t=this.viewport.node().getBoundingClientRect(),e=t.width,n=t.height,r=this.viewport.select(".scene .components").node().getBBox(),i=r.width,o=r.height,a=r.x,s=r.y,u=e/i<n/o?e/i:n/o,c=1;c>u;)c*=.9;this.scene.attr("viewBox","".concat(a-15," ").concat(s-15," ").concat(i+a+15," ").concat(o+s+15)),this.pluginData.scene.zoom=c}}},{key:"arrangeComponentsPosition",value:function(t,e){this.layout.generateComponentsLayout(t,e)}},{key:"resize",value:function(t){this.layout.resize(t)}},{key:"getSceneData",value:function(){var t=this;return[this.d3.hierarchy(ZT({id:"scene",name:"",children:JT(this.pluginData.components.filter((function(t){return null===t.getContainerId()})))},this.pluginData.scene),(function(e){return"scene"===e.id?e.children:t.pluginData.getChildren(e.id)}))]}},{key:"dropComponent",value:function(t,e){var n=e.target.closest(".component");if(t.drawOption.width=t.definition.width,t.drawOption.height=t.definition.height,!n){var r=this.viewport.select(".scene").node().getBoundingClientRect(),i=r.x,o=r.y;return t.drawOption.x=(e.clientX-i-this.pluginData.scene.x)/this.pluginData.scene.zoom-t.definition.defaultWidth/2,void(t.drawOption.y=(e.clientY-o-this.pluginData.scene.y)/this.pluginData.scene.zoom-t.definition.defaultHeight/2)}if(n.canContain(t.definition.type)){var a=this.viewport.select(".".concat(t.id,".container")).node().getBoundingClientRect(),s=a.x,u=a.y;t.drawOption.x=(e.clientX-s-this.pluginData.scene.x)/this.pluginData.scene.zoom-t.definition.defaultWidth/2,t.drawOption.y=(e.clientY-u-this.pluginData.scene.y)/this.pluginData.scene.zoom-t.definition.defaultHeight/2}}},{key:"exportSvg",value:function(){return this.viewport.selectAll(".scene > g").attr("transform",""),document.querySelector("#view-port .scene").outerHTML}}],n&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rM(r.key),r)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();const oM=iM;function aM(t){return aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aM(t)}function sM(t){var e=function(t,e){if("object"!=aM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=aM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aM(e)?e:e+""}var uM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null},(e=[{key:"validate",value:function(){return!0}},{key:"parse",value:function(t){this.pluginData.definitions={components:[],links:[]}}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sM(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const cM=uM;function lM(t){return lM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lM(t)}function fM(t){var e=function(t,e){if("object"!=lM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=lM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lM(e)?e:e+""}var hM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null},e=[{key:"parse",value:function(t){this.pluginData.components=[],this.pluginData.parseErrors=[]}},{key:"getModels",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return t.path}))}},{key:"parseConfiguration",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.pluginData.emitEvent({parent:r,type:"Parser",action:"read",status:"running",files:[e.path],data:{global:!1}});if(null!=e.content){var o=JSON.parse(e.content);o[t.path]?o[t.path][this.pluginData.name]?(Object.keys(o[t.path][this.pluginData.name]).forEach((function(e){var r=n.pluginData.getComponentByConfigurationKey(e);r&&o[t.path][n.pluginData.name][e]&&(r.drawOption=new h(o[t.path][n.pluginData.name][e]))})),this.pluginData.emitEvent({id:i,status:"success"})):this.pluginData.emitEvent({id:i,status:"warning",data:{code:"no_plugin_content",global:!1}}):this.pluginData.emitEvent({id:i,status:"warning",data:{code:"no_diagram_content",global:!1}})}else this.pluginData.emitEvent({id:i,status:"warning",data:{code:"no_content",global:!1}})}},{key:"isParsable",value:function(t){return null!=t}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fM(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const pM=hM;function dM(t){return dM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dM(t)}function yM(t){var e=function(t,e){if("object"!=dM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=dM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dM(e)?e:e+""}var mM=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e||null},e=[{key:"render",value:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,e){return t[e.path]="",t}),{});return this.renderFiles(t).forEach((function(t){e[t.path]=t.content})),Object.keys(e).map((function(t){return new z({path:t,content:e[t]})}))}},{key:"renderFiles",value:function(){return[]}},{key:"renderConfiguration",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.pluginData.emitEvent({parent:r,type:"Render",action:"write",status:"running",files:[e.path],data:{global:!1}}),o=JSON.parse(e.content)||{};o[t.path]||(o[t.path]={}),o[t.path][this.pluginData.name]={},this.pluginData.components.filter((function(t){return t.drawOption})).forEach((function(e){var r=e.getConfigurationKey();o[t.path][n.pluginData.name][r]=e.drawOption})),e.content=JSON.stringify(o,(function(t,e){return null===e?void 0:e}),2),this.pluginData.emitEvent({id:i,status:"success"})}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yM(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const gM=mM;function vM(t){return vM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vM(t)}function bM(t){var e="function"==typeof Map?new Map:void 0;return bM=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(_M())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&wM(i,n.prototype),i}(t,arguments,xM(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),wM(n,t)},bM(t)}function _M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_M=function(){return!!t})()}function wM(t,e){return wM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wM(t,e)}function xM(t){return xM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xM(t)}var kM=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error happened when trying to parse.",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Error";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=xM(e),function(t,e){if(e&&("object"==vM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_M()?Reflect.construct(e,n||[],xM(t).constructor):e.apply(t,n))}(this,e,[n||"Error happened when trying to parse."])).name="ParseError",t.startLine=r||0,t.startColumn=i||0,t.endLine=o||0,t.endColumn=a||0,t.severity=s||"Error",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wM(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(bM(Error));const OM=kM;var SM=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,parentId:null,files:null,components:null,links:null,type:null,action:null,status:null,data:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.id,r=e.parentId,i=e.files,o=e.components,a=e.links,s=e.type,u=e.action,c=e.status,l=e.data;this.id=n||null,this.parentId=r||null,this.startDate=null,this.endDate=null,this.files=i||null,this.components=o||null,this.links=a||null,this.type=s||null,this.action=u||null,this.status=c||null,this.data=l||null}));const EM=SM;function AM(t){return AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AM(t)}function TM(t,e,n){return e=NM(e),function(t,e){if(e&&("object"==AM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,MM()?Reflect.construct(e,n||[],NM(t).constructor):e.apply(t,n))}function MM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(MM=function(){return!!t})()}function NM(t){return NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NM(t)}function CM(t,e){return CM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CM(t,e)}var jM=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorName:null};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=TM(this,e,[n])).anchorName=n.anchorName||null,t.endX=null,t.endY=null,t.isTemporary=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CM(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(I);const PM=jM;function LM(t){return LM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LM(t)}function IM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function DM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?DM(Object(n),!0).forEach((function(e){BM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function BM(t,e,n){return(e=FM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FM(t){var e=function(t,e){if("object"!=LM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=LM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LM(e)?e:e+""}var $M=function(){return t=function t(e){var n,r,i,o,a,s,u,c,l,f,h,p,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:null,version:null,components:[],variables:[],definitions:{components:[],links:[]},parseErrors:[],resources:{},scene:{x:0,y:0,zoom:1,selection:[],selectionRef:null}},y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=d.name||null,this.version=d.version||null,this.components=d.components||[],this.scene={x:(null===(n=d.scene)||void 0===n?void 0:n.x)||0,y:(null===(r=d.scene)||void 0===r?void 0:r.y)||0,zoom:(null===(i=d.scene)||void 0===i?void 0:i.zoom)||1,selection:(null===(o=d.scene)||void 0===o?void 0:o.selection)||[],selectionRef:(null===(a=d.scene)||void 0===a?void 0:a.selectionRef)||null},this.variables=d.variables||[],this.definitions={components:(null===(s=d.definitions)||void 0===s?void 0:s.components)||[],links:(null===(u=d.definitions)||void 0===u?void 0:u.links)||[]},this.parseErrors=d.parseErrors||[],this.__eventIndex=0,this.eventManager=y,this.eventLogs=[],this.configuration=e,this.resources={icons:RM({},null===(c=d.resources)||void 0===c?void 0:c.icons),markers:RM({},null===(l=d.resources)||void 0===l?void 0:l.markers),links:RM({},null===(f=d.resources)||void 0===f?void 0:f.links),models:RM({},null===(h=d.resources)||void 0===h?void 0:h.models),style:(null===(p=d.resources)||void 0===p?void 0:p.style)||""},this.temporaryLink=null},e=[{key:"coreVersion",get:function(){return"0.25.0"}},{key:"getComponentById",value:function(t){return this.components.find((function(e){return e.id===t}))||null}},{key:"getComponentDepth",value:function(t){var e=this.getComponentById(t).getContainerId();return e?this.getComponentDepth(e)+1:0}},{key:"getComponentByConfigurationKey",value:function(t){return this.getComponentById(t)}},{key:"renameComponentExternalId",value:function(t,e){this.getComponentById(t).setExternalId(e)}},{key:"getComponentsByType",value:function(t){return this.components.filter((function(e){var n=e.definition;return n&&n.type===t}))}},{key:"addComponent",value:function(t,e){var n=this.generateComponentId();return this.components.push(new _({id:n,name:n,definition:t,path:e})),n}},{key:"generateComponentId",value:function(){var t=this.components.map((function(t){return t.id})).filter((function(t){return new RegExp("".concat("id_","\\d+")).test(t)})).map((function(t){return parseInt(t.substring(3),10)})),e=0===t.length?1:Math.max.apply(Math,function(t){return function(t){if(Array.isArray(t))return IM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return IM(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?IM(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))+1;return"".concat("id_").concat(e)}},{key:"removeComponentById",value:function(t){var e=this;this.getChildren(t).forEach((function(t){return e.removeComponentById(t.id)})),this.components=this.components.filter((function(e){return e.id!==t})),this.components.forEach((function(e){e.removeLinkAttribute(t)}))}},{key:"removeLink",value:function(t){var e=t.source,n=t.target,r=t.definition.attributeRef;this.getComponentById(e).removeLinkAttribute(n,r)}},{key:"getLinks",value:function(){var t=this,e=[];return this.definitions.links.forEach((function(n){t.getComponentsByType(n.sourceRef).forEach((function(r){var i=r.getAttributeByName(n.attributeRef);i&&t.getLinkedComponentsIds(i).forEach((function(t){return e.push(new I({definition:n,source:r.id,target:t,isReverse:"Reverse"===i.definition.linkType}))}))}))})),this.temporaryLink&&e.push(this.temporaryLink),e.concat(this.getWorkflowLinks())}},{key:"getAttributeValue",value:function(t){return t.isVariable?this.getVariableValue(t.value):t.value}},{key:"getLinkedComponentsIds",value:function(t){var e=this.getAttributeValue(t);return null===e?[]:Array.isArray(e)?e:[e]}},{key:"getVariableValue",value:function(t){var e;return(null===(e=this.variables.find((function(e){return e.name===t})))||void 0===e?void 0:e.value)||null}},{key:"setVariableValue",value:function(t,e){var n=this.variables.find((function(e){return e.name===t}));n&&(n.value=e)}},{key:"getComponentIdFromValue",value:function(t){return t}},{key:"canHaveLink",value:function(t){return this.definitions.links.some((function(e){return e.sourceRef===t}))}},{key:"canBeLinked",value:function(t,e){return this.definitions.links.some((function(n){var r=n.sourceRef,i=n.targetRef;return r===t&&i===e}))}},{key:"createTemporaryLink",value:function(t,e){this.temporaryLink=new PM({anchorName:e,source:t,definition:this.definitions.links.find((function(t){return t.isTemporary}))})}},{key:"getWorkflowLinks",value:function(){var t=this;return this.components.filter((function(t){var e;return null===(e=t.definition.displayType)||void 0===e?void 0:e.match("workflow")})).reduce((function(e,n){var r=t.getChildren(n.id);if(r.length>1)for(var i=0;i<r.length-1;i+=1)e.push(new I({definition:new R({sourceRef:"__workflow",attributeRef:"__next",model:n.definition.linkModel}),source:r[i].id,target:r[i+1].id}));return e}),[])}},{key:"getUsedLinkDefinitions",value:function(){return this.getLinks().map((function(t){return t.definition})).reduce((function(t,e){return t.some((function(t){return t.attributeRef===e.attributeRef&&t.sourceRef===e.sourceRef&&t.targetRef===e.targetRef}))||t.push(e),t}),[])}},{key:"initLinkDefinitions",value:function(t){var e=this,n=this.emitEvent({parent:t,type:"Data",action:"init",status:"running"});this.definitions.links=[],this.definitions.components.forEach((function(t){var n=t.type,r=t.definedAttributes;e.__setLinkDefinitions(n,r)})),this.definitions.links.push(new R({isTemporary:!0,model:"temporaryLink"})),this.emitEvent({id:n,status:"success"})}},{key:"__setLinkDefinitions",value:function(t,e){var n=this;e.forEach((function(e){if("Link"===e.type){var r=new R({type:e.linkType,attributeRef:e.name,sourceRef:t,targetRef:e.linkRef,model:e.linkModel});n.definitions.links.push(r)}else"Object"===e.type&&n.__setLinkDefinitions(t,e.definedAttributes)}))}},{key:"getChildren",value:function(t){return this.components.filter((function(e){return e.getContainerId()===t}))}},{key:"__moveComponentToIndex",value:function(t,e){var n=this.components.findIndex((function(e){return e.id===t}));if(n!==e){var r=this.getComponentById(t),i=Math.max(0,e);i+=i>n,this.components.splice(i,0,r),this.components.splice(n+(i<n),1)}}},{key:"insertComponentBefore",value:function(t,e){var n=this.components.findIndex((function(t){return t.id===e}));-1!==n&&this.__moveComponentToIndex(t,Math.max(0,n-1))}},{key:"insertComponentAfter",value:function(t,e){var n=this.components.findIndex((function(e){return e.id===t})),r=this.components.findIndex((function(t){return t.id===e}));-1!==r&&this.__moveComponentToIndex(t,Math.min(this.components.length-1,r+(r<n)))}},{key:"getEventLogById",value:function(t){return this.eventLogs.findLast((function(e){return t===e.id}))}},{key:"deleteAllEventLogsBefore",value:function(t){this.eventLogs=this.eventLogs.filter((function(e){return e.endDate>t}))}},{key:"emitEvent",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.id;return r?(e=this.getEventLogById(r),Object.keys(n).forEach((function(t){e[t]=n[t]}))):(this.__eventIndex+=1,r=this.__eventIndex,(e=new EM(RM(RM({},n),{},{id:r}))).startDate=Date.now(),this.eventLogs.push(e)),["success","warning","error"].includes(e.status)&&(e.endDate=Date.now()),null!==(t=this.eventManager)&&void 0!==t&&t.next&&this.eventManager.next({plugin:this.name,event:RM({},e)}),r}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,FM(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const UM=$M;function qM(t){return qM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qM(t)}function KM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function zM(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?KM(Object(n),!0).forEach((function(e){VM(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VM(t,e,n){return(e=YM(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YM(t){var e=function(t,e){if("object"!=qM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=qM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qM(e)?e:e+""}var HM=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e,n,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{editor:{syntax:null},restrictiveFolder:null,defaultFileName:null,defaultFileExtension:null,tags:[],isFolderTypeDiagram:!0,extraResources:[],rootContainer:{margin:30,gap:50},container:{margin:30,gap:50},keysBinding:{}};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=zM({syntax:null},a.editor),this.restrictiveFolder=a.restrictiveFolder||null,this.defaultFileName=a.defaultFileName||null,this.defaultFileExtension=a.defaultFileExtension||null,this.tags=a.tags||[],this.isFolderTypeDiagram=null===(e=a.isFolderTypeDiagram)||void 0===e||e,this.extraResources=a.extraResources||[],this.rootContainer={margin:(null===(n=a.rootContainer)||void 0===n?void 0:n.margin)||30,gap:(null===(r=a.rootContainer)||void 0===r?void 0:r.gap)||50},this.container={margin:(null===(i=a.container)||void 0===i?void 0:i.margin)||30,gap:(null===(o=a.container)||void 0===o?void 0:o.gap)||50},this.keysBinding=zM({moveSceneUp:["ArrowUp"],moveSceneDown:["ArrowDown"],moveSceneLeft:["ArrowLeft"],moveSceneRight:["ArrowRight"],moveComponentUp:[],moveComponentDown:[],moveComponentLeft:[],moveComponentRight:[],zoomIn:["+"],zoomOut:["-"],deleteObject:["Delete"],editComponent:[",","?"],selection:["Shift"],selectAll:["A"],deselectAll:["D"]},a.keysBinding)}));const WM=HM;function GM(t){return GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GM(t)}function JM(t){var e=function(t,e){if("object"!=GM(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=GM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==GM(e)?e:e+""}var XM=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{event:null,configuration:null,pluginData:null,pluginDrawer:null,pluginMetadata:null,pluginParser:null,pluginRenderer:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.configuration=e.configuration||new WM,this.data=e.pluginData||new UM(this.configuration,{},e.event),this.__drawer=e.pluginDrawer||new oM(this.data),this.__metadata=e.pluginMetadata||new cM(this.data),this.__parser=e.pluginParser||new pM(this.data),this.__renderer=e.pluginRenderer||new gM(this.data)},e=[{key:"init",value:function(){var t=this.data.emitEvent({type:"Plugin",action:"init",status:"running"});this.__metadata.parse(t),this.data.initLinkDefinitions(t),this.data.emitEvent({id:t,status:"success"})}},{key:"initResources",value:function(t){this.data.resources=t}},{key:"initDrawer",value:function(t,e){this.__drawer.init(t,e)}},{key:"draw",value:function(){this.__drawer.draw()}},{key:"parse",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.data.emitEvent({type:"Parser",action:"read",status:"running",files:n.map((function(t){return t.path})).concat(null==e?void 0:e.path),data:{global:!0}});this.__parser.parse(t,n,r),this.__parser.parseConfiguration(t,e,r),this.data.emitEvent({id:r,status:"success"})}},{key:"isParsable",value:function(t){return this.__parser.isParsable(t)}},{key:"getModels",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.__parser.getModels(e.filter((function(e){return t.isParsable(e)})))}},{key:"render",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.data.emitEvent({type:"Render",action:"write",status:"running",files:n.map((function(t){return t.path})).concat(e.path),data:{global:!0}});this.__renderer.renderConfiguration(t,e,r);var i=this.__renderer.render(n,r).concat(e);return this.data.emitEvent({id:r,status:"success"}),i}},{key:"arrangeComponentsPosition",value:function(t,e){this.__drawer.arrangeComponentsPosition(t,e)}},{key:"resize",value:function(t){this.__drawer.resize(t)}},{key:"exportSvg",value:function(t){this.__drawer.init(t,!0),this.draw();var e=this.__drawer.exportSvg();return this.__drawer.init(t,!1),this.draw(),e}},{key:"getComponentPosition",value:function(t,e){var n=e.x,r=e.y,i=this.__drawer.actions.zoom,o=i.scale,a=i.translate,s=document.querySelector("#".concat(t)).getBoundingClientRect(),u=s.left,c=s.top;return{x:(n-u-a.x)/o,y:(r-c-a.y)/o}}},{key:"addComponent",value:function(t,e,n,r){var i=this.data.addComponent(e,n),o=this.data.getComponentById(i);if(t){var a=this.data.getComponentById(t);o.setReferenceAttribute(a)}return r&&this.__drawer.dropComponent(o,r),i}}],e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JM(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const QM=XM;var ZM=function(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:null,value:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.type,r=e.value;this.type=n||null,this.value=r||null}));const tN=ZM;function eN(t){return eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eN(t)}function nN(t,e,n){return e=iN(e),function(t,e){if(e&&("object"==eN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rN()?Reflect.construct(e,n||[],iN(t).constructor):e.apply(t,n))}function rN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rN=function(){return!!t})()}function iN(t){return iN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iN(t)}function oN(t,e){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oN(t,e)}var aN=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null,type:null,value:null,category:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=nN(this,e,[n]);var r=n.name,i=n.type,o=n.value,a=n.category;return t.__class="Variable",t.name=r||null,t.type=i||null,t.value=o||null,t.category=a||null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oN(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(l);const sN=aN})();var o=e;for(var a in i)o[a]=i[a];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})()}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{default:()=>Za});var t=n(916);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return(e=s(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function u(t,n,r){return n=l(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(n,r||[],l(t).constructor):n.apply(t,r))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}const h=function(e){function n(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),u(this,n,[o(o({},e),{},{defaultFileName:"manifest.yaml",defaultFileExtension:"yaml",tags:[new t.Tag({type:"language",value:"Kubernetes"}),new t.Tag({type:"category",value:"Infrastructure"}),new t.Tag({type:"category",value:"Containers"})],isFolderTypeDiagram:!0,extraResources:[{type:"markers",name:"startLinkMarker"},{type:"markers",name:"endLinkMarker"},{type:"links",name:"defaultLink"},{type:"links",name:"temporaryLink"},{type:"icons",name:"error"},{type:"icons",name:"menu"},{type:"icons",name:"resize"}],container:{margin:15,gap:50}})])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(n,e),r=n,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(t.DefaultConfiguration);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}function m(t,e,n){return e=v(e),function(t,e){if(e&&("object"==p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,g()?Reflect.construct(e,n||[],v(t).constructor):e.apply(t,n))}function g(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(g=function(){return!!t})()}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}const _=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),m(this,n,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(n,e),r=n,(i=[{key:"addComponent",value:function(e,n){var r=this.generateComponentId(e),i=new t.Component({id:r,name:r,definition:e,path:n?"".concat(n,"/").concat(r,".yaml"):"".concat(r,".yaml")});return"Container"===e.type&&(i.attributes=[this.__createAttribute("isInitContainer",!1,e)]),this.components.push(i),r}},{key:"__createAttribute",value:function(e,n,r){var i=r.definedAttributes.find((function(t){return t.name===e}));return new t.ComponentAttribute({name:e,value:n,type:i.type,definition:i})}}])&&d(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(t.DefaultData);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return(e=S(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}function E(t,e,n){return e=T(e),function(t,e){if(e&&("object"==w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}function T(t){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},T(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}const N=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{apiVersion:null,childrenIndex:[],ignoredAttributes:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=E(this,e,[k(k({},n),{},{defaultWidth:n.isContainer?186:96,defaultHeight:n.isContainer?160:80,minWidth:n.isContainer?186:96,minHeight:n.isContainer?140:80,reservedWidth:n.isContainer?12:0,reservedHeight:n.isContainer?80:0,margin:15,gap:50,categories:["Kubernetes"]})])).apiVersion=n.apiVersion||null,t.childrenIndex=n.childrenIndex||[],t.ignoredAttributes=n.ignoredAttributes||[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(t.ComponentDefinition);function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function j(t,e,n){return e=L(e),function(t,e){if(e&&("object"==C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P()?Reflect.construct(e,n||[],L(t).constructor):e.apply(t,n))}function P(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P=function(){return!!t})()}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}const D=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignoredAttributes:[]};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=j(this,e,[n])).ignoredAttributes=n.ignoredAttributes||[],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(t.ComponentAttributeDefinition),R={commonAttributes:JSON.parse('[{"name":"metadata","type":"Object","expanded":true,"ignoredAttributes":["creationTimestamp","deletionGracePeriodSeconds","deletionTimestamp","generation","name","resourceVersion","selfLink","uid"],"attributes":[{"name":"namespace","type":"String","description":"Namespace defines the space within which each name must be unique.<br/>An empty namespace is equivalent to the \\"default\\" namespace, but \\"default\\" is the canonical representation.<br/>Not all objects are required to be scoped to a namespace - the value of this field for those objects will be empty.<br/><br/>Must be a DNS_LABEL. Cannot be updated.","url":"http://kubernetes.io/docs/user-guide/namespaces"},{"name":"labels","type":"Object","attributes":[{"name":"app.kubernetes.io/name","type":"String","description":"The name of the application."},{"name":"app.kubernetes.io/instance","type":"String","description":"A unique name identifying the instance of an application."},{"name":"app.kubernetes.io/version","type":"String","description":"The current version of the application (e.g., a <a href=\\"https://semver.org/spec/v1.0.0.html\\">SemVer 1.0</a>, revision hash, etc.)."},{"name":"app.kubernetes.io/component","type":"String","description":"The component within the architecture."},{"name":"app.kubernetes.io/part-of","type":"String","description":"The name of a higher level application this one is part of."},{"name":"app.kubernetes.io/managed-by","type":"String","description":"The tool being used to manage the operation of an application."}]},{"name":"annotations","type":"Object"}]}]'),apiVersions:{"apps/v1":JSON.parse('[{"type":"Deployment","model":"DefaultContainer","icon":"resources/unlabeled/deploy","description":"A Deployment provides declarative updates for Pods and ReplicaSets.<br/><br/>You describe a desired state in a Deployment, and the Deployment Controller changes the actual state to the desired state at a controlled rate.<br/>You can define Deployments to create new ReplicaSets, or to remove existing Deployments and adopt all their resources with new Deployments.","url":"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/","isContainer":true,"childrenIndex":[{"attributeName":"template","componentType":"Pod"}],"attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"ignoredAttributes":["selector"],"attributes":[{"name":"replicas","type":"Number","description":"Number of desired pods.<br/>This is a pointer to distinguish between explicit zero and not specified.<br/>Defaults to 1."},{"name":"strategy","type":"Object","description":"The deployment strategy to use to replace existing pods with new ones.","attributes":[{"name":"type","type":"String","description":"Type of deployment.<br/>Can be \\"Recreate\\" or \\"RollingUpdate\\".<br/>Default is RollingUpdate.","rules":{"values":["RollingUpdate","Recreate"]}},{"name":"rollingUpdate","type":"Object","description":"Rolling update config params.<br/>Present only if DeploymentStrategyType = RollingUpdate.","expanded":true,"attributes":[{"name":"maxSurge","type":"String","description":"The maximum number of pods that can be scheduled above the desired number of pods.<br/>Value can be an absolute number (ex: 5) or a percentage of desired pods (ex: 10%).<br/>This can not be 0 if MaxUnavailable is 0.<br/>Absolute number is calculated from percentage by rounding up.<br/>Defaults to 25%.<br/>Example: when this is set to 30%, the new ReplicaSet can be scaled up immediately when the rolling update starts, such that the total number of old and new pods do not exceed 130% of desired pods.<br/>Once old pods have been killed, new ReplicaSet can be scaled up further, ensuring that total number of pods running at any time during the update is at most 130% of desired pods."},{"name":"maxUnavailable","type":"String","description":"The maximum number of pods that can be unavailable during the update.<br/>Value can be an absolute number (ex: 5) or a percentage of desired pods (ex: 10%).<br/>Absolute number is calculated from percentage by rounding down.<br/>This can not be 0 if MaxSurge is 0.<br/>Defaults to 25%.<br/>Example: when this is set to 30%, the old ReplicaSet can be scaled down to 70% of desired pods immediately when the rolling update starts.<br/>Once new pods are ready, old ReplicaSet can be scaled down further, followed by scaling up the new ReplicaSet, ensuring that the total number of pods available at all times during the update is at least 70% of desired pods."}]}]},{"name":"revisionHistoryLimit","type":"Number","description":"The number of old ReplicaSets to retain to allow rollback.<br/>This is a pointer to distinguish between explicit zero and not specified.<br/>Defaults to 10."}]}]},{"type":"StatefulSet","model":"DefaultContainer","icon":"resources/unlabeled/sts","description":"StatefulSet is the workload API object used to manage stateful applications.<br/><br/>Manages the deployment and scaling of a set of Pods, and provides guarantees about the ordering and uniqueness of these Pods.<br/><br/>Like a Deployment, a StatefulSet manages Pods that are based on an identical container spec.<br/>Unlike a Deployment, a StatefulSet maintains a sticky identity for each of their Pods.<br/>These pods are created from the same spec, but are not interchangeable: each has a persistent identifier that it maintains across any rescheduling.<br/><br/>If you want to use storage volumes to provide persistence for your workload, you can use a StatefulSet as part of the solution.<br/>Although individual Pods in a StatefulSet are susceptible to failure, the persistent Pod identifiers make it easier to match existing volumes to the new Pods that replace any that have failed.","url":"https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/","isContainer":true,"childrenIndex":[{"attributeName":"template","componentType":"Pod"}],"attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"ignoredAttributes":["selector"],"attributes":[]}]}]'),"batch/v1":JSON.parse('[{"type":"CronJob","model":"DefaultContainer","icon":"resources/unlabeled/cronjob","description":"A CronJob creates Jobs on a repeating schedule.<br/><br/>CronJob is meant for performing regular scheduled actions such as backups, report generation, and so on.<br/>One CronJob object is like one line of a crontab (cron table) file on a Unix system.<br/>It runs a job periodically on a given schedule, written in Cron format.<br/><br/>CronJobs have limitations and idiosyncrasies.<br/>For example, in certain circumstances, a single CronJob can create multiple concurrent Jobs.<br/>See the limitations below.<br/><br/>When the control plane creates new Jobs and (indirectly) Pods for a CronJob, the .metadata.name of the CronJob is part of the basis for naming those Pods.<br/>The name of a CronJob must be a valid DNS subdomain value, but this can produce unexpected results for the Pod hostnames.<br/>For best compatibility, the name should follow the more restrictive rules for a DNS label.<br/>Even when the name is a DNS subdomain, the name must be no longer than 52 characters.<br/>This is because the CronJob controller will automatically append 11 characters to the name you provide and there is a constraint that the length of a Job name is no more than 63 characters.","url":"https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/","isContainer":true,"childrenIndex":[{"attributeName":"jobTemplate","componentType":"Job"}],"attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[]}]},{"type":"Job","model":"DefaultContainer","icon":"resources/unlabeled/job","isContainer":true,"parentTypes":["CronJob"],"childrenIndex":[{"attributeName":"template","componentType":"Pod"}],"attributes":[{"name":"parent","type":"Reference","containerRef":"CronJob"},{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"ignoredAttributes":["selector"],"attributes":[]}]}]'),v1:JSON.parse('[{"type":"Pod","model":"DefaultContainer","icon":"resources/unlabeled/pod","parentTypes":["Deployment","StatefulSet","Job"],"isContainer":true,"childrenPerLine":3,"childrenIndex":[{"attributeName":"containers","componentType":"Container"},{"attributeName":"initContainers","componentType":"Container"}],"attributes":[{"name":"parentDeployment","type":"Reference","containerRef":"Deployment"},{"name":"parentStatefulSet","type":"Reference","containerRef":"StatefulSet"},{"name":"parentJob","type":"Reference","containerRef":"Job"},{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[{"name":"volumes","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String","required":true},{"name":"configMap","type":"Object","attributes":[{"name":"name","type":"Link","linkRef":"ConfigMap","linkModel":"defaultLink","required":true},{"name":"defaultMode","type":"Number"},{"name":"items","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"key","type":"String","required":true},{"name":"path","type":"String","required":true},{"name":"mode","type":"Number"}]}]},{"name":"optional","type":"Boolean"}]},{"name":"secret","type":"Object","attributes":[{"name":"secretName","type":"Link","linkRef":"Secret","linkModel":"defaultLink","required":true},{"name":"defaultMode","type":"Number"},{"name":"items","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"key","type":"String","required":true},{"name":"path","type":"String","required":true},{"name":"mode","type":"Number"}]}]},{"name":"optional","type":"Boolean"}]},{"name":"persistentVolumeClaim","type":"Object","attributes":[{"name":"claimName","type":"Link","linkRef":"PersistentVolumeClaim","linkModel":"defaultLink","required":true},{"name":"readOnly","type":"Boolean"}]}]}]},{"name":"topologySpreadConstraints","type":"Array","description":"TopologySpreadConstraints describes how a group of pods ought to spread across topology domains.<br/>Scheduler will schedule pods in a way which abides by the constraints.<br/>All topologySpreadConstraints are ANDed.","attributes":[{"name":null,"type":"Object","attributes":[{"name":"maxSkew","type":"Number","required":true},{"name":"minDomains","type":"Number"},{"name":"topologyKey","type":"String","required":true},{"name":"whenUnsatisfiable","type":"String","required":true,"rules":{"values":["DoNotSchedule","ScheduleAnyway"]}},{"name":"labelSelector","type":"Object","attributes":[{"name":"matchLabels","type":"Object","expanded":true},{"name":"matchExpressions","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"key","type":"String","required":true},{"name":"operator","type":"String","required":true},{"name":"values","type":"Array"}]}]}]}]}]}]}]},{"type":"Service","model":"DefaultModel","icon":"resources/unlabeled/svc","attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[{"name":"type","type":"String","description":"type determines how the Service is exposed.<br/>Defaults to ClusterIP.<br/>Valid options are ExternalName, ClusterIP, NodePort, and LoadBalancer.<br/>\\"ClusterIP\\" allocates a cluster-internal IP address for load-balancing to endpoints.<br/>Endpoints are determined by the selector or if that is not specified, by manual construction of an Endpoints object or EndpointSlice objects.<br/>If clusterIP is \\"None\\", no virtual IP is allocated and the endpoints are published as a set of endpoints rather than a virtual IP.<br/>\\"NodePort\\" builds on ClusterIP and allocates a port on every node which routes to the same endpoints as the clusterIP.<br/>\\"LoadBalancer\\" builds on NodePort and creates an external load-balancer (if supported in the current cloud) which routes to the same endpoints as the clusterIP.<br/>\\"ExternalName\\" aliases this service to the specified externalName.<br/>Several other fields do not apply to ExternalName services.","url":"https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types","rules":{"values":["ClusterIP","NodePort","LoadBalancer","ExternalName"]}},{"name":"selector","type":"Link","linkRef":"Pod","linkModel":"defaultLink"},{"name":"ports","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String"},{"name":"protocol","type":"String","rules":{"values":["TCP","UDP","SCTP"]}},{"name":"port","type":"Number","required":true},{"name":"targetPort","type":"String"}]}]}]}]},{"type":"ConfigMap","model":"DefaultModel","icon":"resources/unlabeled/cm","attributes":[{"name":"data","type":"Object","expanded":true},{"name":"binaryData","type":"Object"},{"name":"immutable","type":"Boolean"}]},{"type":"Secret","model":"DefaultModel","icon":"resources/unlabeled/secret","attributes":[{"name":"type","type":"String","rules":{"values":["Opaque","kubernetes.io/service-account-token","kubernetes.io/dockercfg","kubernetes.io/dockerconfigjson","kubernetes.io/basic-auth","kubernetes.io/ssh-auth","kubernetes.io/tls","bootstrap.kubernetes.io/token"]}},{"name":"stringData","type":"Object","expanded":true},{"name":"data","type":"Object"},{"name":"immutable","type":"Boolean"}]},{"type":"PersistentVolumeClaim","model":"DefaultModel","icon":"resources/unlabeled/pvc","attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[{"name":"storageClassName","type":"String"},{"name":"accessModes","type":"Array"},{"name":"volumeMode","type":"String","rules":{"values":["Filesystem","Block"]}},{"name":"resources","type":"Object","attributes":[{"name":"requests","type":"Object","expanded":true,"attributes":[{"name":"storage","type":"String"}]},{"name":"limits","type":"Object","expanded":true,"attributes":[{"name":"storage","type":"String"}]}]},{"name":"volumeName","type":"String"},{"name":"selector","type":"Object","attributes":[{"name":"matchLabels","type":"Object","expanded":true}]}]}]}]'),"networking.k8s.io/v1":JSON.parse('[{"type":"Ingress","model":"DefaultModel","icon":"resources/unlabeled/ing","attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[{"name":"ingressClassName","type":"String","description":"ingressClassName is the name of an IngressClass cluster resource.<br/>Ingress controller implementations use this field to know whether they should be serving this Ingress resource, by a transitive connection (controller -> IngressClass -> Ingress resource).<br/>Although the `kubernetes.io/ingress.class` annotation (simple constant name) was never formally defined, it was widely supported by Ingress controllers to create a direct binding between Ingress controller and Ingress resources.<br/>Newly created Ingress resources should prefer using the field.<br/>However, even though the annotation is officially deprecated, for backwards compatibility reasons, ingress controllers should still honor that annotation if present."},{"name":"defaultBackend","type":"Object","description":"DefaultBackend is the backend that should handle requests that don\'t match any rule.<br/>If Rules are not specified, DefaultBackend must be specified.<br/>If DefaultBackend is not set, the handling of requests that do not match any of the rules will be up to the Ingress controller.","expanded":true,"attributes":[{"name":"service","type":"Object","expanded":true,"attributes":[{"name":"name","type":"Link","linkRef":"Service","linkModel":"defaultLink","required":true},{"name":"port","type":"Object","expanded":true,"attributes":[{"name":"name","type":"String","description":"Name is the name of the port on the Service.<br/>This is a mutually exclusive setting with \\"Number\\"."},{"name":"number","type":"Number","description":"Number is the numerical port number (e.g. 80) on the Service.<br/>This is a mutually exclusive setting with \\"Name\\"."}]}]}]},{"name":"rules","type":"Array","description":"A list of host rules used to configure the Ingress.<br/>If unspecified, or no rule matches, all traffic is sent to the default backend.","attributes":[{"name":null,"type":"Object","attributes":[{"name":"host","type":"String"},{"name":"http","type":"Object","expanded":true,"attributes":[{"name":"paths","type":"Array","required":true,"attributes":[{"name":null,"type":"Object","attributes":[{"name":"pathType","type":"String","required":true,"rules":{"values":["Exact","Prefix","ImplementationSpecific"]}},{"name":"path","type":"String"},{"name":"backend","type":"Object","required":true,"expanded":true,"attributes":[{"name":"service","type":"Object","expanded":true,"attributes":[{"name":"name","type":"Link","description":"Name is the referenced service.<br/>The service must exist in the same namespace as the Ingress object.","linkRef":"Service","linkModel":"defaultLink","required":true},{"name":"port","type":"Object","expanded":true,"attributes":[{"name":"name","type":"String","description":"Name is the name of the port on the Service.<br/>This is a mutually exclusive setting with \\"Number\\"."},{"name":"number","type":"Number","description":"Number is the numerical port number (e.g. 80) on the Service.<br/>This is a mutually exclusive setting with \\"Name\\"."}]}]}]}]}]}]}]}]},{"name":"tls","type":"Array","description":"TLS configuration.<br/>Currently the Ingress only supports a single TLS port, 443.<br/>If multiple members of this list specify different hosts, they will be multiplexed on the same port according to the hostname specified through the SNI TLS extension, if the ingress controller fulfilling the ingress supports SNI.","attributes":[{"name":null,"type":"Object","attributes":[{"name":"hosts","type":"Array"},{"name":"secretName","type":"String"}]}]}]}]}]'),"autoscaling/v2":JSON.parse('[{"type":"HorizontalPodAutoscaler","model":"DefaultModel","icon":"resources/unlabeled/hpa","attributes":[{"name":"spec","type":"Object","displayName":"Specification","expanded":true,"attributes":[]}]}]'),others:JSON.parse('[{"type":"Container","model":"DefaultContainer","icon":"resources/unlabeled/container","parentTypes":["Pod"],"attributes":[{"name":"parent","type":"Reference","containerRef":"Pod","required":true},{"name":"isInitContainer","type":"Boolean"},{"name":"image","type":"String"},{"name":"imagePullPolicy","type":"String","rules":{"values":["Always","IfNotPresent","Never"]}},{"name":"workingDir","type":"String"},{"name":"command","type":"Array","description":"Entrypoint array.<br/>Not executed within a shell.<br/>The container image\'s ENTRYPOINT is used if this is not provided.<br/>Variable references $(VAR_NAME) are expanded using the container\'s environment.<br/>If a variable cannot be resolved, the reference in the input string will be unchanged.<br/>Double $$ are reduced to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. \\"$$(VAR_NAME)\\" will produce the string literal \\"$(VAR_NAME)\\".<br/>Escaped references will never be expanded, regardless of whether the variable exists or not.<br/>Cannot be updated.","url":"https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell"},{"name":"args","type":"Array","description":"Arguments to the entrypoint.<br/>The container image\'s CMD is used if this is not provided.<br/>Variable references $(VAR_NAME) are expanded using the container\'s environment.<br/>If a variable cannot be resolved, the reference in the input string will be unchanged.<br/>Double $$ are reduced to a single $, which allows for escaping the $(VAR_NAME) syntax: i.e. \\"$$(VAR_NAME)\\" will produce the string literal \\"$(VAR_NAME)\\".<br/>Escaped references will never be expanded, regardless of whether the variable exists or not.<br/>Cannot be updated.","url":"https://kubernetes.io/docs/tasks/inject-data-application/define-command-argument-container/#running-a-command-in-a-shell"},{"name":"volumeMounts","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String","required":true},{"name":"mountPath","type":"String","required":true},{"name":"subPath","type":"String"},{"name":"subPathExpr","type":"String"},{"name":"mountPropagation","type":"String","rules":{"values":["None","HostToContainer","Bidirectional"]}},{"name":"readOnly","type":"Boolean"}]}]},{"name":"env","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String","required":true},{"name":"value","type":"String"}]}]},{"name":"envFrom","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"configMapRef","type":"Object","attributes":[{"name":"name","type":"String"},{"name":"optional","type":"Boolean"}]},{"name":"secretRef","type":"Object","attributes":[{"name":"name","type":"String"},{"name":"optional","type":"Boolean"}]},{"name":"prefix","type":"String"}]}]},{"name":"ports","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String"},{"name":"containerPort","type":"String","required":true},{"name":"protocol","type":"String","rules":{"values":["TCP","IDP","SCTP"]}}]}]},{"name":"resources","type":"Object","attributes":[{"name":"requests","type":"Object","expanded":true,"attributes":[{"name":"memory","type":"String"},{"name":"cpu","type":"String"},{"name":"ephemeral-storage","type":"String"}]},{"name":"limits","type":"Object","expanded":true,"attributes":[{"name":"memory","type":"String"},{"name":"cpu","type":"String"},{"name":"ephemeral-storage","type":"String"}]}]},{"name":"readinessProbe","type":"Object","attributes":[{"name":"initialDelaySeconds","type":"Number"},{"name":"periodSeconds","type":"Number"},{"name":"timeoutSeconds","type":"Number"},{"name":"successThreshold","type":"Number"},{"name":"failureThreshold","type":"Number"},{"name":"terminationGracePeriodSeconds","type":"Number"},{"name":"httpGet","type":"Object","attributes":[{"name":"host","type":"String"},{"name":"port","type":"String","required":false},{"name":"scheme","type":"String","rules":{"values":["HTTP","HTTPS"]}},{"name":"path","type":"String"},{"name":"httpHeaders","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String","required":true},{"name":"value","type":"String","required":true}]}]}]},{"name":"exec","type":"Object","attributes":[{"name":"command","type":"Array"}]},{"name":"tcpSocket","type":"Object","attributes":[{"name":"host","type":"String"},{"name":"port","type":"String","required":false}]},{"name":"grpc","type":"Object","attributes":[{"name":"port","type":"String","required":false},{"name":"service","type":"String"}]}]},{"name":"livenessProbe","type":"Object","attributes":[{"name":"initialDelaySeconds","type":"Number"},{"name":"periodSeconds","type":"Number"},{"name":"timeoutSeconds","type":"Number"},{"name":"successThreshold","type":"Number"},{"name":"failureThreshold","type":"Number"},{"name":"terminationGracePeriodSeconds","type":"Number"},{"name":"httpGet","type":"Object","attributes":[{"name":"host","type":"String"},{"name":"port","type":"String","required":false},{"name":"scheme","type":"String","rules":{"values":["HTTP","HTTPS"]}},{"name":"path","type":"String"},{"name":"httpHeaders","type":"Array","attributes":[{"name":null,"type":"Object","attributes":[{"name":"name","type":"String","required":true},{"name":"value","type":"String","required":true}]}]}]},{"name":"exec","type":"Object","attributes":[{"name":"command","type":"Array"}]},{"name":"tcpSocket","type":"Object","attributes":[{"name":"host","type":"String"},{"name":"port","type":"String","required":false}]},{"name":"grpc","type":"Object","attributes":[{"name":"port","type":"String","required":false},{"name":"service","type":"String"}]}]}]},{"type":"UnknownResource","model":"DefaultModel","icon":"question-mark"}]')}};function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return(e=z(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z(r.key),r)}}function z(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}function V(t,e,n){return e=H(e),function(t,e){if(e&&("object"==B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Y()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Y=function(){return!!t})()}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}var G=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),V(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(e,t),n=e,r=[{key:"parse",value:function(){var t=this,e=R.commonAttributes.map(this.__createAttributeDefinition,this);this.pluginData.definitions.components=Object.keys(R.apiVersions).flatMap((function(n){return R.apiVersions[n].map((function(r){return t.__createComponentDefinition(n,r,e)}))})),this.__setChildrenTypes()}},{key:"__createComponentDefinition",value:function(t,e,n){var r,i=(null===(r=e.attributes)||void 0===r?void 0:r.map(this.__createAttributeDefinition,this))||[];return"others"!==t&&i.unshift.apply(i,function(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n)),new N($($({},e),{},{definedAttributes:i,apiVersion:t,ignoredAttributes:["apiVersion","kind","name","status"]}))}},{key:"__createAttributeDefinition",value:function(t){var e;return new D($($({},t),{},{displayName:t.displayName||this.__getDefaultDisplayName(t.name),definedAttributes:(null===(e=t.attributes)||void 0===e?void 0:e.map(this.__createAttributeDefinition,this))||[]}))}},{key:"__getDefaultDisplayName",value:function(t){if(!t||t.includes("."))return t;var e=t.replace(/[A-Z]/g," $&");return e.charAt(0).toUpperCase()+e.slice(1)}},{key:"__setChildrenTypes",value:function(){var t=this.pluginData.definitions.components.reduce((function(t,e){var n=e.type;return e.parentTypes.forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)})),t}),{});this.pluginData.definitions.components.forEach((function(e){e.childrenTypes=t[e.type]||[]}))}}],r&&K(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(t.DefaultMetadata);const J=G,X=Symbol.for("yaml.alias"),Q=Symbol.for("yaml.document"),Z=Symbol.for("yaml.map"),tt=Symbol.for("yaml.pair"),et=Symbol.for("yaml.scalar"),nt=Symbol.for("yaml.seq"),rt=Symbol.for("yaml.node.type"),it=t=>!!t&&"object"==typeof t&&t[rt]===X,ot=t=>!!t&&"object"==typeof t&&t[rt]===Q,at=t=>!!t&&"object"==typeof t&&t[rt]===Z,st=t=>!!t&&"object"==typeof t&&t[rt]===tt,ut=t=>!!t&&"object"==typeof t&&t[rt]===et,ct=t=>!!t&&"object"==typeof t&&t[rt]===nt;function lt(t){if(t&&"object"==typeof t)switch(t[rt]){case Z:case nt:return!0}return!1}function ft(t){if(t&&"object"==typeof t)switch(t[rt]){case X:case Z:case et:case nt:return!0}return!1}const ht=t=>(ut(t)||lt(t))&&!!t.anchor,pt=Symbol("break visit"),dt=Symbol("skip children"),yt=Symbol("remove node");function mt(t,e){const n=_t(e);ot(t)?gt(null,t.contents,n,Object.freeze([t]))===yt&&(t.contents=null):gt(null,t,n,Object.freeze([]))}function gt(t,e,n,r){const i=wt(t,e,n,r);if(ft(i)||st(i))return xt(t,r,i),gt(t,i,n,r);if("symbol"!=typeof i)if(lt(e)){r=Object.freeze(r.concat(e));for(let t=0;t<e.items.length;++t){const i=gt(t,e.items[t],n,r);if("number"==typeof i)t=i-1;else{if(i===pt)return pt;i===yt&&(e.items.splice(t,1),t-=1)}}}else if(st(e)){r=Object.freeze(r.concat(e));const t=gt("key",e.key,n,r);if(t===pt)return pt;t===yt&&(e.key=null);const i=gt("value",e.value,n,r);if(i===pt)return pt;i===yt&&(e.value=null)}return i}async function vt(t,e){const n=_t(e);ot(t)?await bt(null,t.contents,n,Object.freeze([t]))===yt&&(t.contents=null):await bt(null,t,n,Object.freeze([]))}async function bt(t,e,n,r){const i=await wt(t,e,n,r);if(ft(i)||st(i))return xt(t,r,i),bt(t,i,n,r);if("symbol"!=typeof i)if(lt(e)){r=Object.freeze(r.concat(e));for(let t=0;t<e.items.length;++t){const i=await bt(t,e.items[t],n,r);if("number"==typeof i)t=i-1;else{if(i===pt)return pt;i===yt&&(e.items.splice(t,1),t-=1)}}}else if(st(e)){r=Object.freeze(r.concat(e));const t=await bt("key",e.key,n,r);if(t===pt)return pt;t===yt&&(e.key=null);const i=await bt("value",e.value,n,r);if(i===pt)return pt;i===yt&&(e.value=null)}return i}function _t(t){return"object"==typeof t&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function wt(t,e,n,r){return"function"==typeof n?n(t,e,r):at(e)?n.Map?.(t,e,r):ct(e)?n.Seq?.(t,e,r):st(e)?n.Pair?.(t,e,r):ut(e)?n.Scalar?.(t,e,r):it(e)?n.Alias?.(t,e,r):void 0}function xt(t,e,n){const r=e[e.length-1];if(lt(r))r.items[t]=n;else if(st(r))"key"===t?r.key=n:r.value=n;else{if(!ot(r)){const t=it(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}r.contents=n}}mt.BREAK=pt,mt.SKIP=dt,mt.REMOVE=yt,vt.BREAK=pt,vt.SKIP=dt,vt.REMOVE=yt;const kt={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Ot{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Ot.defaultYaml,t),this.tags=Object.assign({},Ot.defaultTags,e)}clone(){const t=new Ot(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Ot(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ot.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ot.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:Ot.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ot.defaultTags),this.atNextDocument=!1);const n=t.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(e(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[t,r]=n;return this.tags[t]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=n;return"1.1"===t||"1.2"===t?(this.yaml.version=t,!0):(e(6,`Unsupported YAML version ${t}`,/^\d+\.\d+$/.test(t)),!1)}default:return e(0,`Unknown directive ${r}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const n=t.slice(2,-1);return"!"===n||"!!"===n?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),n)}const[,n,r]=t.match(/^(.*!)([^!]*)$/s);r||e(`The ${t} tag has no suffix`);const i=this.tags[n];if(i)try{return i+decodeURIComponent(r)}catch(t){return e(String(t)),null}return"!"===n?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,n]of Object.entries(this.tags))if(t.startsWith(n))return e+t.substring(n.length).replace(/[!,[\]{}]/g,(t=>kt[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(t&&n.length>0&&ft(t.contents)){const e={};mt(t.contents,((t,n)=>{ft(n)&&n.tag&&(e[n.tag]=!0)})),r=Object.keys(e)}else r=[];for(const[i,o]of n)"!!"===i&&"tag:yaml.org,2002:"===o||t&&!r.some((t=>t.startsWith(o)))||e.push(`%TAG ${i} ${o}`);return e.join("\n")}}function St(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=JSON.stringify(t);throw new Error(`Anchor must not contain whitespace or control characters: ${e}`)}return!0}function Et(t){const e=new Set;return mt(t,{Value(t,n){n.anchor&&e.add(n.anchor)}}),e}function At(t,e){for(let n=1;;++n){const r=`${t}${n}`;if(!e.has(r))return r}}function Tt(t,e,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let e=0,n=r.length;e<n;++e){const n=r[e],i=Tt(t,r,String(e),n);void 0===i?delete r[e]:i!==n&&(r[e]=i)}else if(r instanceof Map)for(const e of Array.from(r.keys())){const n=r.get(e),i=Tt(t,r,e,n);void 0===i?r.delete(e):i!==n&&r.set(e,i)}else if(r instanceof Set)for(const e of Array.from(r)){const n=Tt(t,r,e,e);void 0===n?r.delete(e):n!==e&&(r.delete(e),r.add(n))}else for(const[e,n]of Object.entries(r)){const i=Tt(t,r,e,n);void 0===i?delete r[e]:i!==n&&(r[e]=i)}return t.call(e,n,r)}function Mt(t,e,n){if(Array.isArray(t))return t.map(((t,e)=>Mt(t,String(e),n)));if(t&&"function"==typeof t.toJSON){if(!n||!ht(t))return t.toJSON(e,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(t,r),n.onCreate=t=>{r.res=t,delete n.onCreate};const i=t.toJSON(e,n);return n.onCreate&&n.onCreate(i),i}return"bigint"!=typeof t||n?.keep?t:Number(t)}Ot.defaultYaml={explicit:!1,version:"1.2"},Ot.defaultTags={"!!":"tag:yaml.org,2002:"};class Nt{constructor(t){Object.defineProperty(this,rt,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:n,onAnchor:r,reviver:i}={}){if(!ot(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:!0===e,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=Mt(this,"",o);if("function"==typeof r)for(const{count:t,res:e}of o.anchors.values())r(e,t);return"function"==typeof i?Tt(i,{"":a},"",a):a}}class Ct extends Nt{constructor(t){super(X),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t){let e;return mt(t,{Node:(t,n)=>{if(n===this)return mt.BREAK;n.anchor===this.source&&(e=n)}}),e}toJSON(t,e){if(!e)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=e,o=this.resolve(r);if(!o){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(t)}let a=n.get(o);if(a||(Mt(o,null,e),a=n.get(o)),!a||void 0===a.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(i>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=jt(r,o,n)),a.count*a.aliasCount>i))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return a.res}toString(t,e,n){const r=`*${this.source}`;if(t){if(St(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(t)}if(t.implicitKey)return`${r} `}return r}}function jt(t,e,n){if(it(e)){const r=e.resolve(t),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}if(lt(e)){let r=0;for(const i of e.items){const e=jt(t,i,n);e>r&&(r=e)}return r}if(st(e)){const r=jt(t,e.key,n),i=jt(t,e.value,n);return Math.max(r,i)}return 1}const Pt=t=>!t||"function"!=typeof t&&"object"!=typeof t;class Lt extends Nt{constructor(t){super(et),this.value=t}toJSON(t,e){return e?.keep?this.value:Mt(this.value,t,e)}toString(){return String(this.value)}}Lt.BLOCK_FOLDED="BLOCK_FOLDED",Lt.BLOCK_LITERAL="BLOCK_LITERAL",Lt.PLAIN="PLAIN",Lt.QUOTE_DOUBLE="QUOTE_DOUBLE",Lt.QUOTE_SINGLE="QUOTE_SINGLE";const It="tag:yaml.org,2002:";function Dt(t,e,n){if(ot(t)&&(t=t.contents),ft(t))return t;if(st(t)){const e=n.schema[Z].createNode?.(n.schema,null,n);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"undefined"!=typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:a,sourceObjects:s}=n;let u;if(r&&t&&"object"==typeof t){if(u=s.get(t),u)return u.anchor||(u.anchor=i(t)),new Ct(u.anchor);u={anchor:null,node:null},s.set(t,u)}e?.startsWith("!!")&&(e=It+e.slice(2));let c=function(t,e,n){if(e){const t=n.filter((t=>t.tag===e)),r=t.find((t=>!t.format))??t[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find((e=>e.identify?.(t)&&!e.format))}(t,e,a.tags);if(!c){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t){const e=new Lt(t);return u&&(u.node=e),e}c=t instanceof Map?a[Z]:Symbol.iterator in Object(t)?a[nt]:a[Z]}o&&(o(c),delete n.onTagObj);const l=c?.createNode?c.createNode(n.schema,t,n):"function"==typeof c?.nodeClass?.from?c.nodeClass.from(n.schema,t,n):new Lt(t);return e?l.tag=e:c.default||(l.tag=c.tag),u&&(u.node=l),l}function Rt(t,e,n){let r=n;for(let t=e.length-1;t>=0;--t){const n=e[t];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const t=[];t[n]=r,r=t}else r=new Map([[n,r]])}return Dt(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const Bt=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class Ft extends Nt{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map((e=>ft(e)||st(e)?e.clone(t):e)),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(Bt(t))this.add(e);else{const[n,...r]=t,i=this.get(n,!0);if(lt(i))i.addIn(r,e);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Rt(this.schema,r,e))}}}deleteIn(t){const[e,...n]=t;if(0===n.length)return this.delete(e);const r=this.get(e,!0);if(lt(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${n}`)}getIn(t,e){const[n,...r]=t,i=this.get(n,!0);return 0===r.length?!e&&ut(i)?i.value:i:lt(i)?i.getIn(r,e):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!st(e))return!1;const n=e.value;return null==n||t&&ut(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(t){const[e,...n]=t;if(0===n.length)return this.has(e);const r=this.get(e,!0);return!!lt(r)&&r.hasIn(n)}setIn(t,e){const[n,...r]=t;if(0===r.length)this.set(n,e);else{const t=this.get(n,!0);if(lt(t))t.setIn(r,e);else{if(void 0!==t||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,Rt(this.schema,r,e))}}}}Ft.maxFlowStringSingleLineLength=60;const $t=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Ut(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const qt=(t,e,n)=>t.endsWith("\n")?Ut(n,e):n.includes("\n")?"\n"+Ut(n,e):(t.endsWith(" ")?"":" ")+n,Kt="flow",zt="block",Vt="quoted";function Yt(t,e,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!i||i<0)return t;const u=Math.max(1+o,1+i-e.length);if(t.length<=u)return t;const c=[],l={};let f,h,p=i-e.length;"number"==typeof r&&(r>i-Math.max(2,o)?c.push(0):p=i-r);let d=!1,y=-1,m=-1,g=-1;n===zt&&(y=Ht(t,y,e.length),-1!==y&&(p=y+u));for(let r;r=t[y+=1];){if(n===Vt&&"\\"===r){switch(m=y,t[y+1]){case"x":y+=3;break;case"u":y+=5;break;case"U":y+=9;break;default:y+=1}g=y}if("\n"===r)n===zt&&(y=Ht(t,y,e.length)),p=y+e.length+u,f=void 0;else{if(" "===r&&h&&" "!==h&&"\n"!==h&&"\t"!==h){const e=t[y+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(f=y)}if(y>=p)if(f)c.push(f),p=f+u,f=void 0;else if(n===Vt){for(;" "===h||"\t"===h;)h=r,r=t[y+=1],d=!0;const e=y>g+1?y-2:m-1;if(l[e])return t;c.push(e),l[e]=!0,p=e+u,f=void 0}else d=!0}h=r}if(d&&s&&s(),0===c.length)return t;a&&a();let v=t.slice(0,c[0]);for(let r=0;r<c.length;++r){const i=c[r],o=c[r+1]||t.length;0===i?v=`\n${e}${t.slice(0,o)}`:(n===Vt&&l[i]&&(v+=`${t[i]}\\`),v+=`\n${e}${t.slice(i+1,o)}`)}return v}function Ht(t,e,n){let r=e,i=e+1,o=t[i];for(;" "===o||"\t"===o;)if(e<i+n)o=t[++e];else{do{o=t[++e]}while(o&&"\n"!==o);r=e,i=e+1,o=t[i]}return r}const Wt=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Gt=t=>/^(%|---|\.\.\.)/m.test(t);function Jt(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=e,i=e.options.doubleQuotedMinMultiLineLength,o=e.indent||(Gt(t)?"  ":"");let a="",s=0;for(let t=0,e=n[t];e;e=n[++t])if(" "===e&&"\\"===n[t+1]&&"n"===n[t+2]&&(a+=n.slice(s,t)+"\\ ",t+=1,s=t,e="\\"),"\\"===e)switch(n[t+1]){case"u":{a+=n.slice(s,t);const e=n.substr(t+2,4);switch(e){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===e.substr(0,2)?a+="\\x"+e.substr(2):a+=n.substr(t,6)}t+=5,s=t+1}break;case"n":if(r||'"'===n[t+2]||n.length<i)t+=1;else{for(a+=n.slice(s,t)+"\n\n";"\\"===n[t+2]&&"n"===n[t+3]&&'"'!==n[t+4];)a+="\n",t+=2;a+=o," "===n[t+2]&&(a+="\\"),t+=1,s=t+1}break;default:t+=1}return a=s?a+n.slice(s):n,r?a:Yt(a,o,Vt,Wt(e,!1))}function Xt(t,e){if(!1===e.options.singleQuote||e.implicitKey&&t.includes("\n")||/[ \t]\n|\n[ \t]/.test(t))return Jt(t,e);const n=e.indent||(Gt(t)?"  ":""),r="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return e.implicitKey?r:Yt(r,n,Kt,Wt(e,!1))}function Qt(t,e){const{singleQuote:n}=e.options;let r;if(!1===n)r=Jt;else{const e=t.includes('"'),i=t.includes("'");r=e&&!i?Xt:i&&!e?Jt:n?Xt:Jt}return r(t,e)}let Zt;try{Zt=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{Zt=/\n+(?!\n|$)/g}function te({comment:t,type:e,value:n},r,i,o){const{blockQuote:a,commentString:s,lineWidth:u}=r.options;if(!a||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Qt(n,r);const c=r.indent||(r.forceBlockIndent||Gt(n)?"  ":""),l="literal"===a||"folded"!==a&&e!==Lt.BLOCK_FOLDED&&(e===Lt.BLOCK_LITERAL||!function(t,e,n){if(!e||e<0)return!1;const r=e-n,i=t.length;if(i<=r)return!1;for(let e=0,n=0;e<i;++e)if("\n"===t[e]){if(e-n>r)return!0;if(n=e+1,i-n<=r)return!1}return!0}(n,u,c.length));if(!n)return l?"|\n":">\n";let f,h;for(h=n.length;h>0;--h){const t=n[h-1];if("\n"!==t&&"\t"!==t&&" "!==t)break}let p=n.substring(h);const d=p.indexOf("\n");-1===d?f="-":n===p||d!==p.length-1?(f="+",o&&o()):f="",p&&(n=n.slice(0,-p.length),"\n"===p[p.length-1]&&(p=p.slice(0,-1)),p=p.replace(Zt,`$&${c}`));let y,m=!1,g=-1;for(y=0;y<n.length;++y){const t=n[y];if(" "===t)m=!0;else{if("\n"!==t)break;g=y}}let v=n.substring(0,g<y?g+1:y);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${c}`));let b=(l?"|":">")+(m?c?"2":"1":"")+f;return t&&(b+=" "+s(t.replace(/ ?[\r\n]+/g," ")),i&&i()),l?`${b}\n${c}${v}${n=n.replace(/\n+/g,`$&${c}`)}${p}`:`${b}\n${c}${Yt(`${v}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`)}${p}`,c,zt,Wt(r,!0))}`}function ee(t,e,n,r){const{implicitKey:i,inFlow:o}=e,a="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:s}=t;s!==Lt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=Lt.QUOTE_DOUBLE);const u=t=>{switch(t){case Lt.BLOCK_FOLDED:case Lt.BLOCK_LITERAL:return i||o?Qt(a.value,e):te(a,e,n,r);case Lt.QUOTE_DOUBLE:return Jt(a.value,e);case Lt.QUOTE_SINGLE:return Xt(a.value,e);case Lt.PLAIN:return function(t,e,n,r){const{type:i,value:o}=t,{actualString:a,implicitKey:s,indent:u,indentStep:c,inFlow:l}=e;if(s&&o.includes("\n")||l&&/[[\]{},]/.test(o))return Qt(o,e);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return s||l||!o.includes("\n")?Qt(o,e):te(t,e,n,r);if(!s&&!l&&i!==Lt.PLAIN&&o.includes("\n"))return te(t,e,n,r);if(Gt(o)){if(""===u)return e.forceBlockIndent=!0,te(t,e,n,r);if(s&&u===c)return Qt(o,e)}const f=o.replace(/\n+/g,`$&\n${u}`);if(a){const t=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(f),{compat:n,tags:r}=e.doc.schema;if(r.some(t)||n?.some(t))return Qt(o,e)}return s?f:Yt(f,u,Kt,Wt(e,!1))}(a,e,n,r);default:return null}};let c=u(s);if(null===c){const{defaultKeyType:t,defaultStringType:n}=e.options,r=i&&t||n;if(c=u(r),null===c)throw new Error(`Unsupported default string type ${r}`)}return c}function ne(t,e){const n=Object.assign({blockQuote:!0,commentString:$t,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function re(t,e,n,r){if(st(t))return t.toString(e,n,r);if(it(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const o=ft(t)?t:e.doc.createNode(t,{onTagObj:t=>i=t});i||(i=function(t,e){if(e.tag){const n=t.filter((t=>t.tag===e.tag));if(n.length>0)return n.find((t=>t.format===e.format))??n[0]}let n,r;if(ut(e)){r=e.value;const i=t.filter((t=>t.identify?.(r)));n=i.find((t=>t.format===e.format))??i.find((t=>!t.format))}else r=e,n=t.find((t=>t.nodeClass&&r instanceof t.nodeClass));if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??typeof r} value`);return n}(e.doc.schema.tags,o));const a=function(t,e,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],o=(ut(t)||lt(t))&&t.anchor;o&&St(o)&&(n.add(o),i.push(`&${o}`));const a=t.tag?t.tag:e.default?null:e.tag;return a&&i.push(r.directives.tagString(a)),i.join(" ")}(o,i,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);const s="function"==typeof i.stringify?i.stringify(o,e,n,r):ut(o)?ee(o,e,n,r):o.toString(e,n,r);return a?ut(o)||"{"===s[0]||"["===s[0]?`${a} ${s}`:`${a}\n${e.indent}${s}`:s}function ie(t,e){"debug"!==t&&"warn"!==t||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(e):console.warn(e))}function oe(t,e,{key:n,value:r}){if(t?.doc.schema.merge&&ae(n))if(r=it(r)?r.resolve(t.doc):r,ct(r))for(const n of r.items)se(t,e,n);else if(Array.isArray(r))for(const n of r)se(t,e,n);else se(t,e,r);else{const i=Mt(n,"",t);if(e instanceof Map)e.set(i,Mt(r,i,t));else if(e instanceof Set)e.add(i);else{const o=function(t,e,n){if(null===e)return"";if("object"!=typeof e)return String(e);if(ft(t)&&n?.doc){const e=ne(n.doc,{});e.anchors=new Set;for(const t of n.anchors.keys())e.anchors.add(t.anchor);e.inFlow=!0,e.inStringifyKey=!0;const r=t.toString(e);if(!n.mapKeyWarned){let t=JSON.stringify(r);t.length>40&&(t=t.substring(0,36)+'..."'),ie(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}(n,i,t),a=Mt(r,o,t);o in e?Object.defineProperty(e,o,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[o]=a}}return e}const ae=t=>"<<"===t||ut(t)&&"<<"===t.value&&(!t.type||t.type===Lt.PLAIN);function se(t,e,n){const r=t&&it(n)?n.resolve(t.doc):n;if(!at(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,t,Map);for(const[t,n]of i)e instanceof Map?e.has(t)||e.set(t,n):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0});return e}function ue(t,e,n){const r=Dt(t,void 0,n),i=Dt(e,void 0,n);return new ce(r,i)}class ce{constructor(t,e=null){Object.defineProperty(this,rt,{value:tt}),this.key=t,this.value=e}clone(t){let{key:e,value:n}=this;return ft(e)&&(e=e.clone(t)),ft(n)&&(n=n.clone(t)),new ce(e,n)}toJSON(t,e){return oe(e,e?.mapAsMap?new Map:{},this)}toString(t,e,n){return t?.doc?function({key:t,value:e},n,r,i){const{allNullValues:o,doc:a,indent:s,indentStep:u,options:{commentString:c,indentSeq:l,simpleKeys:f}}=n;let h=ft(t)&&t.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(lt(t)||!ft(t)&&"object"==typeof t)throw new Error("With simple keys, collection cannot be used as a key value")}let p=!f&&(!t||h&&null==e&&!n.inFlow||lt(t)||(ut(t)?t.type===Lt.BLOCK_FOLDED||t.type===Lt.BLOCK_LITERAL:"object"==typeof t));n=Object.assign({},n,{allNullValues:!1,implicitKey:!p&&(f||!o),indent:s+u});let d,y,m,g=!1,v=!1,b=re(t,n,(()=>g=!0),(()=>v=!0));if(!p&&!n.inFlow&&b.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");p=!0}if(n.inFlow){if(o||null==e)return g&&r&&r(),""===b?"?":p?`? ${b}`:b}else if(o&&!f||null==e&&p)return b=`? ${b}`,h&&!g?b+=qt(b,n.indent,c(h)):v&&i&&i(),b;g&&(h=null),p?(h&&(b+=qt(b,n.indent,c(h))),b=`? ${b}\n${s}:`):(b=`${b}:`,h&&(b+=qt(b,n.indent,c(h)))),ft(e)?(d=!!e.spaceBefore,y=e.commentBefore,m=e.comment):(d=!1,y=null,m=null,e&&"object"==typeof e&&(e=a.createNode(e))),n.implicitKey=!1,p||h||!ut(e)||(n.indentAtStart=b.length+1),v=!1,l||!(u.length>=2)||n.inFlow||p||!ct(e)||e.flow||e.tag||e.anchor||(n.indent=n.indent.substring(2));let _=!1;const w=re(e,n,(()=>_=!0),(()=>v=!0));let x=" ";if(h||d||y)x=d?"\n":"",y&&(x+=`\n${Ut(c(y),n.indent)}`),""!==w||n.inFlow?x+=`\n${n.indent}`:"\n"===x&&(x="\n\n");else if(!p&&lt(e)){const t=w[0],r=w.indexOf("\n"),i=-1!==r,o=n.inFlow??e.flow??0===e.items.length;if(i||!o){let e=!1;if(i&&("&"===t||"!"===t)){let n=w.indexOf(" ");"&"===t&&-1!==n&&n<r&&"!"===w[n+1]&&(n=w.indexOf(" ",n+1)),(-1===n||r<n)&&(e=!0)}e||(x=`\n${n.indent}`)}}else""!==w&&"\n"!==w[0]||(x="");return b+=x+w,n.inFlow?_&&r&&r():m&&!_?b+=qt(b,n.indent,c(m)):v&&i&&i(),b}(this,t,e,n):JSON.stringify(this)}}function le(t,e,n){return(e.inFlow??t.flow?he:fe)(t,e,n)}function fe({comment:t,items:e},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:a,onComment:s}){const{indent:u,options:{commentString:c}}=n,l=Object.assign({},n,{indent:o,type:null});let f=!1;const h=[];for(let t=0;t<e.length;++t){const i=e[t];let a=null;if(ft(i))!f&&i.spaceBefore&&h.push(""),pe(n,h,i.commentBefore,f),i.comment&&(a=i.comment);else if(st(i)){const t=ft(i.key)?i.key:null;t&&(!f&&t.spaceBefore&&h.push(""),pe(n,h,t.commentBefore,f))}f=!1;let s=re(i,l,(()=>a=null),(()=>f=!0));a&&(s+=qt(s,o,c(a))),f&&a&&(f=!1),h.push(r+s)}let p;if(0===h.length)p=i.start+i.end;else{p=h[0];for(let t=1;t<h.length;++t){const e=h[t];p+=e?`\n${u}${e}`:"\n"}}return t?(p+="\n"+Ut(c(t),u),s&&s()):f&&a&&a(),p}function he({items:t},e,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:o,flowCollectionPadding:a,options:{commentString:s}}=e;r+=o;const u=Object.assign({},e,{indent:r,inFlow:!0,type:null});let c=!1,l=0;const f=[];for(let n=0;n<t.length;++n){const i=t[n];let o=null;if(ft(i))i.spaceBefore&&f.push(""),pe(e,f,i.commentBefore,!1),i.comment&&(o=i.comment);else if(st(i)){const t=ft(i.key)?i.key:null;t&&(t.spaceBefore&&f.push(""),pe(e,f,t.commentBefore,!1),t.comment&&(c=!0));const n=ft(i.value)?i.value:null;n?(n.comment&&(o=n.comment),n.commentBefore&&(c=!0)):null==i.value&&t?.comment&&(o=t.comment)}o&&(c=!0);let a=re(i,u,(()=>o=null));n<t.length-1&&(a+=","),o&&(a+=qt(a,r,s(o))),!c&&(f.length>l||a.includes("\n"))&&(c=!0),f.push(a),l=f.length}const{start:h,end:p}=n;if(0===f.length)return h+p;if(!c){const t=f.reduce(((t,e)=>t+e.length+2),2);c=e.options.lineWidth>0&&t>e.options.lineWidth}if(c){let t=h;for(const e of f)t+=e?`\n${o}${i}${e}`:"\n";return`${t}\n${i}${p}`}return`${h}${a}${f.join(" ")}${a}${p}`}function pe({indent:t,options:{commentString:e}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const i=Ut(e(r),t);n.push(i.trimStart())}}function de(t,e){const n=ut(e)?e.value:e;for(const r of t)if(st(r)){if(r.key===e||r.key===n)return r;if(ut(r.key)&&r.key.value===n)return r}}class ye extends Ft{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(Z,t),this.items=[]}static from(t,e,n){const{keepUndefined:r,replacer:i}=n,o=new this(t),a=(t,a)=>{if("function"==typeof i)a=i.call(e,t,a);else if(Array.isArray(i)&&!i.includes(t))return;(void 0!==a||r)&&o.items.push(ue(t,a,n))};if(e instanceof Map)for(const[t,n]of e)a(t,n);else if(e&&"object"==typeof e)for(const t of Object.keys(e))a(t,e[t]);return"function"==typeof t.sortMapEntries&&o.items.sort(t.sortMapEntries),o}add(t,e){let n;n=st(t)?t:t&&"object"==typeof t&&"key"in t?new ce(t.key,t.value):new ce(t,t?.value);const r=de(this.items,n.key),i=this.schema?.sortMapEntries;if(r){if(!e)throw new Error(`Key ${n.key} already set`);ut(r.value)&&Pt(n.value)?r.value.value=n.value:r.value=n.value}else if(i){const t=this.items.findIndex((t=>i(n,t)<0));-1===t?this.items.push(n):this.items.splice(t,0,n)}else this.items.push(n)}delete(t){const e=de(this.items,t);return!!e&&this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const n=de(this.items,t),r=n?.value;return(!e&&ut(r)?r.value:r)??void 0}has(t){return!!de(this.items,t)}set(t,e){this.add(new ce(t,e),!0)}toJSON(t,e,n){const r=n?new n:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(r);for(const t of this.items)oe(e,r,t);return r}toString(t,e,n){if(!t)return JSON.stringify(this);for(const t of this.items)if(!st(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),le(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:n,onComment:e})}}const me={collection:"map",default:!0,nodeClass:ye,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(at(t)||e("Expected a mapping for this tag"),t),createNode:(t,e,n)=>ye.from(t,e,n)};class ge extends Ft{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(nt,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=ve(t);return"number"==typeof e&&this.items.splice(e,1).length>0}get(t,e){const n=ve(t);if("number"!=typeof n)return;const r=this.items[n];return!e&&ut(r)?r.value:r}has(t){const e=ve(t);return"number"==typeof e&&e<this.items.length}set(t,e){const n=ve(t);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${t}.`);const r=this.items[n];ut(r)&&Pt(e)?r.value=e:this.items[n]=e}toJSON(t,e){const n=[];e?.onCreate&&e.onCreate(n);let r=0;for(const t of this.items)n.push(Mt(t,String(r++),e));return n}toString(t,e,n){return t?le(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:n,onComment:e}):JSON.stringify(this)}static from(t,e,n){const{replacer:r}=n,i=new this(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let o of e){if("function"==typeof r){const n=e instanceof Set?o:String(t++);o=r.call(e,n,o)}i.items.push(Dt(o,void 0,n))}}return i}}function ve(t){let e=ut(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}const be={collection:"seq",default:!0,nodeClass:ge,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(ct(t)||e("Expected a sequence for this tag"),t),createNode:(t,e,n)=>ge.from(t,e,n)},_e={identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,n,r)=>ee(t,e=Object.assign({actualString:!0},e),n,r)},we={identify:t=>null==t,createNode:()=>new Lt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Lt(null),stringify:({source:t},e)=>"string"==typeof t&&we.test.test(t)?t:e.options.nullStr},xe={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new Lt("t"===t[0]||"T"===t[0]),stringify:({source:t,value:e},n)=>t&&xe.test.test(t)&&e===("t"===t[0]||"T"===t[0])?t:e?n.options.trueStr:n.options.falseStr};function ke({format:t,minFractionDigits:e,tag:n,value:r}){if("bigint"==typeof r)return String(r);const i="number"==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!t&&e&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let t=o.indexOf(".");t<0&&(t=o.length,o+=".");let n=e-(o.length-t-1);for(;n-- >0;)o+="0"}return o}const Oe={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ke},Se={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ke(t)}},Ee={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new Lt(parseFloat(t)),n=t.indexOf(".");return-1!==n&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-n-1),e},stringify:ke},Ae=t=>"bigint"==typeof t||Number.isInteger(t),Te=(t,e,n,{intAsBigInt:r})=>r?BigInt(t):parseInt(t.substring(e),n);function Me(t,e,n){const{value:r}=t;return Ae(r)&&r>=0?n+r.toString(e):ke(t)}const Ne={identify:t=>Ae(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>Te(t,2,8,n),stringify:t=>Me(t,8,"0o")},Ce={identify:Ae,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>Te(t,0,10,n),stringify:ke},je={identify:t=>Ae(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>Te(t,2,16,n),stringify:t=>Me(t,16,"0x")},Pe=[me,be,_e,we,xe,Ne,Ce,je,Oe,Se,Ee];function Le(t){return"bigint"==typeof t||Number.isInteger(t)}const Ie=({value:t})=>JSON.stringify(t),De=[{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Ie},{identify:t=>null==t,createNode:()=>new Lt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ie},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:t=>"true"===t,stringify:Ie},{identify:Le,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Le(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Ie}],Re={default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)},Be=[me,be].concat(De,Re),Fe={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof Buffer)return Buffer.from(t,"base64");if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t);return n}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},r,i,o){const a=n;let s;if("function"==typeof Buffer)s=a instanceof Buffer?a.toString("base64"):Buffer.from(a.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<a.length;++e)t+=String.fromCharCode(a[e]);s=btoa(t)}}if(e||(e=Lt.BLOCK_LITERAL),e!==Lt.QUOTE_DOUBLE){const t=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(s.length/t),i=new Array(n);for(let e=0,r=0;e<n;++e,r+=t)i[e]=s.substr(r,t);s=i.join(e===Lt.BLOCK_LITERAL?"\n":" ")}return ee({comment:t,type:e,value:s},r,i,o)}};function $e(t,e){if(ct(t))for(let n=0;n<t.items.length;++n){let r=t.items[n];if(!st(r)){if(at(r)){r.items.length>1&&e("Each pair must have its own sequence indicator");const t=r.items[0]||new ce(new Lt(null));if(r.commentBefore&&(t.key.commentBefore=t.key.commentBefore?`${r.commentBefore}\n${t.key.commentBefore}`:r.commentBefore),r.comment){const e=t.value??t.key;e.comment=e.comment?`${r.comment}\n${e.comment}`:r.comment}r=t}t.items[n]=st(r)?r:new ce(r)}}else e("Expected a sequence for this tag");return t}function Ue(t,e,n){const{replacer:r}=n,i=new ge(t);i.tag="tag:yaml.org,2002:pairs";let o=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let a,s;if("function"==typeof r&&(t=r.call(e,String(o++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);a=t[0],s=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected tuple with one key, not ${e.length} keys`);a=e[0],s=t[a]}else a=t;i.items.push(ue(a,s,n))}return i}const qe={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:$e,createNode:Ue};class Ke extends ge{constructor(){super(),this.add=ye.prototype.add.bind(this),this.delete=ye.prototype.delete.bind(this),this.get=ye.prototype.get.bind(this),this.has=ye.prototype.has.bind(this),this.set=ye.prototype.set.bind(this),this.tag=Ke.tag}toJSON(t,e){if(!e)return super.toJSON(t);const n=new Map;e?.onCreate&&e.onCreate(n);for(const t of this.items){let r,i;if(st(t)?(r=Mt(t.key,"",e),i=Mt(t.value,r,e)):r=Mt(t,"",e),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,i)}return n}static from(t,e,n){const r=Ue(t,e,n),i=new this;return i.items=r.items,i}}Ke.tag="tag:yaml.org,2002:omap";const ze={collection:"seq",identify:t=>t instanceof Map,nodeClass:Ke,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=$e(t,e),r=[];for(const{key:t}of n.items)ut(t)&&(r.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):r.push(t.value));return Object.assign(new Ke,n)},createNode:(t,e,n)=>Ke.from(t,e,n)};function Ve({value:t,source:e},n){return e&&(t?Ye:He).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const Ye={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Lt(!0),stringify:Ve},He={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Lt(!1),stringify:Ve},We={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ke},Ge={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():ke(t)}},Je={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new Lt(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(-1!==n){const r=t.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(e.minFractionDigits=r.length)}return e},stringify:ke},Xe=t=>"bigint"==typeof t||Number.isInteger(t);function Qe(t,e,n,{intAsBigInt:r}){const i=t[0];if("-"!==i&&"+"!==i||(e+=1),t=t.substring(e).replace(/_/g,""),r){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===i?BigInt(-1)*e:e}const o=parseInt(t,n);return"-"===i?-1*o:o}function Ze(t,e,n){const{value:r}=t;if(Xe(r)){const t=r.toString(e);return r<0?"-"+n+t.substr(1):n+t}return ke(t)}const tn={identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Qe(t,2,2,n),stringify:t=>Ze(t,2,"0b")},en={identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Qe(t,1,8,n),stringify:t=>Ze(t,8,"0")},nn={identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Qe(t,0,10,n),stringify:ke},rn={identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Qe(t,2,16,n),stringify:t=>Ze(t,16,"0x")};class on extends ye{constructor(t){super(t),this.tag=on.tag}add(t){let e;e=st(t)?t:t&&"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new ce(t.key,null):new ce(t,null),de(this.items,e.key)||this.items.push(e)}get(t,e){const n=de(this.items,t);return!e&&st(n)?ut(n.key)?n.key.value:n.key:n}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const n=de(this.items,t);n&&!e?this.items.splice(this.items.indexOf(n),1):!n&&e&&this.items.push(new ce(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,n){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,n);throw new Error("Set items must all have null values")}static from(t,e,n){const{replacer:r}=n,i=new this(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof r&&(t=r.call(e,t,t)),i.items.push(ue(t,null,n));return i}}on.tag="tag:yaml.org,2002:set";const an={collection:"map",identify:t=>t instanceof Set,nodeClass:on,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>on.from(t,e,n),resolve(t,e){if(at(t)){if(t.hasAllNullValues(!0))return Object.assign(new on,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function sn(t,e){const n=t[0],r="-"===n||"+"===n?t.substring(1):t,i=t=>e?BigInt(t):Number(t),o=r.replace(/_/g,"").split(":").reduce(((t,e)=>t*i(60)+i(e)),i(0));return"-"===n?i(-1)*o:o}function un(t){let{value:e}=t,n=t=>t;if("bigint"==typeof e)n=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return ke(t);let r="";e<0&&(r="-",e*=n(-1));const i=n(60),o=[e%i];return e<60?o.unshift(0):(e=(e-o[0])/i,o.unshift(e%i),e>=60&&(e=(e-o[0])/i,o.unshift(e))),r+o.map((t=>String(t).padStart(2,"0"))).join(":").replace(/000000\d*$/,"")}const cn={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>sn(t,n),stringify:un},ln={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>sn(t,!1),stringify:un},fn={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(fn.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,a,s]=e.map(Number),u=e[7]?Number((e[7]+"00").substr(1,3)):0;let c=Date.UTC(n,r-1,i,o||0,a||0,s||0,u);const l=e[8];if(l&&"Z"!==l){let t=sn(l,!1);Math.abs(t)<30&&(t*=60),c-=6e4*t}return new Date(c)},stringify:({value:t})=>t.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},hn=[me,be,_e,we,Ye,He,tn,en,nn,rn,We,Ge,Je,Fe,ze,qe,an,cn,ln,fn],pn=new Map([["core",Pe],["failsafe",[me,be,_e]],["json",Be],["yaml11",hn],["yaml-1.1",hn]]),dn={binary:Fe,bool:xe,float:Ee,floatExp:Se,floatNaN:Oe,floatTime:ln,int:Ce,intHex:je,intOct:Ne,intTime:cn,map:me,null:we,omap:ze,pairs:qe,seq:be,set:an,timestamp:fn},yn={"tag:yaml.org,2002:binary":Fe,"tag:yaml.org,2002:omap":ze,"tag:yaml.org,2002:pairs":qe,"tag:yaml.org,2002:set":an,"tag:yaml.org,2002:timestamp":fn};function mn(t,e){let n=pn.get(e);if(!n){if(!Array.isArray(t)){const t=Array.from(pn.keys()).filter((t=>"yaml11"!==t)).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${t} or define customTags array`)}n=[]}if(Array.isArray(t))for(const e of t)n=n.concat(e);else"function"==typeof t&&(n=t(n.slice()));return n.map((t=>{if("string"!=typeof t)return t;const e=dn[t];if(e)return e;const n=Object.keys(dn).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag "${t}"; use one of ${n}`)}))}const gn=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class vn{constructor({compat:t,customTags:e,merge:n,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(t)?mn(t,"compat"):t?mn(null,t):null,this.merge=!!n,this.name="string"==typeof i&&i||"core",this.knownTags=r?yn:{},this.tags=mn(e,this.name),this.toStringOptions=a??null,Object.defineProperty(this,Z,{value:me}),Object.defineProperty(this,et,{value:_e}),Object.defineProperty(this,nt,{value:be}),this.sortMapEntries="function"==typeof o?o:!0===o?gn:null}clone(){const t=Object.create(vn.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}class bn{constructor(t,e,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,rt,{value:Q});let r=null;"function"==typeof e||Array.isArray(e)?r=e:void 0===n&&e&&(n=e,e=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=i;let{version:o}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Ot({version:o}),this.setSchema(o,n),this.contents=void 0===t?null:this.createNode(t,r,n)}clone(){const t=Object.create(bn.prototype,{[rt]:{value:Q}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=ft(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){_n(this.contents)&&this.contents.add(t)}addIn(t,e){_n(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const n=Et(this);t.anchor=!e||n.has(e)?At(e||"a",n):e}return new Ct(t.anchor)}createNode(t,e,n){let r;if("function"==typeof e)t=e.call({"":t},"",t),r=e;else if(Array.isArray(e)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,n=e.filter(t).map(String);n.length>0&&(e=e.concat(n)),r=e}else void 0===n&&e&&(n=e,e=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:s,onTagObj:u,tag:c}=n??{},{onAnchor:l,setAnchors:f,sourceObjects:h}=function(t,e){const n=[],r=new Map;let i=null;return{onAnchor:r=>{n.push(r),i||(i=Et(t));const o=At(e,i);return i.add(o),o},setAnchors:()=>{for(const t of n){const e=r.get(t);if("object"!=typeof e||!e.anchor||!ut(e.node)&&!lt(e.node)){const e=new Error("Failed to resolve repeated object (this should not happen)");throw e.source=t,e}e.node.anchor=e.anchor}},sourceObjects:r}}(this,o||"a"),p=Dt(t,c,{aliasDuplicateObjects:i??!0,keepUndefined:s??!1,onAnchor:l,onTagObj:u,replacer:r,schema:this.schema,sourceObjects:h});return a&&lt(p)&&(p.flow=!0),f(),p}createPair(t,e,n={}){const r=this.createNode(t,null,n),i=this.createNode(e,null,n);return new ce(r,i)}delete(t){return!!_n(this.contents)&&this.contents.delete(t)}deleteIn(t){return Bt(t)?null!=this.contents&&(this.contents=null,!0):!!_n(this.contents)&&this.contents.deleteIn(t)}get(t,e){return lt(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return Bt(t)?!e&&ut(this.contents)?this.contents.value:this.contents:lt(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!lt(this.contents)&&this.contents.has(t)}hasIn(t){return Bt(t)?void 0!==this.contents:!!lt(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=Rt(this.schema,[t],e):_n(this.contents)&&this.contents.set(t,e)}setIn(t,e){Bt(t)?this.contents=e:null==this.contents?this.contents=Rt(this.schema,Array.from(t),e):_n(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){let n;switch("number"==typeof t&&(t=String(t)),t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Ot({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Ot({version:t}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${e}`)}}if(e.schema instanceof Object)this.schema=e.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new vn(Object.assign(n,e))}}toJS({json:t,jsonArg:e,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!t,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100},s=Mt(this.contents,e??"",a);if("function"==typeof i)for(const{count:t,res:e}of a.anchors.values())i(e,t);return"function"==typeof o?Tt(o,{"":s},"",s):s}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return function(t,e){const n=[];let r=!0===e.directives;if(!1!==e.directives&&t.directives){const e=t.directives.toString(t);e?(n.push(e),r=!0):t.directives.docStart&&(r=!0)}r&&n.push("---");const i=ne(t,e),{commentString:o}=i.options;if(t.commentBefore){1!==n.length&&n.unshift("");const e=o(t.commentBefore);n.unshift(Ut(e,""))}let a=!1,s=null;if(t.contents){if(ft(t.contents)){if(t.contents.spaceBefore&&r&&n.push(""),t.contents.commentBefore){const e=o(t.contents.commentBefore);n.push(Ut(e,""))}i.forceBlockIndent=!!t.comment,s=t.contents.comment}const e=s?void 0:()=>a=!0;let u=re(t.contents,i,(()=>s=null),e);s&&(u+=qt(u,"",o(s))),"|"!==u[0]&&">"!==u[0]||"---"!==n[n.length-1]?n.push(u):n[n.length-1]=`--- ${u}`}else n.push(re(t.contents,i));if(t.directives?.docEnd)if(t.comment){const e=o(t.comment);e.includes("\n")?(n.push("..."),n.push(Ut(e,""))):n.push(`... ${e}`)}else n.push("...");else{let e=t.comment;e&&a&&(e=e.replace(/^\n+/,"")),e&&(a&&!s||""===n[n.length-1]||n.push(""),n.push(Ut(o(e),"")))}return n.join("\n")+"\n"}(this,t)}}function _n(t){if(lt(t))return!0;throw new Error("Expected a YAML collection as document contents")}class wn extends Error{constructor(t,e,n,r){super(),this.name=t,this.code=n,this.message=r,this.pos=e}}class xn extends wn{constructor(t,e,n){super("YAMLParseError",t,e,n)}}class kn extends wn{constructor(t,e,n){super("YAMLWarning",t,e,n)}}const On=(t,e)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((t=>e.linePos(t)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,a=t.substring(e.lineStarts[r-1],e.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&a.length>80){const t=Math.min(o-39,a.length-79);a="…"+a.substring(t),o-=t-1}if(a.length>80&&(a=a.substring(0,79)+"…"),r>1&&/^ *$/.test(a.substring(0,o))){let n=t.substring(e.lineStarts[r-2],e.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),a=n+a}if(/[^ ]/.test(a)){let t=1;const e=n.linePos[1];e&&e.line===r&&e.col>i&&(t=Math.max(1,Math.min(e.col-i,80-o)));const s=" ".repeat(o)+"^".repeat(t);n.message+=`:\n\n${a}\n${s}\n`}};function Sn(t,{flow:e,indicator:n,next:r,offset:i,onError:o,parentIndent:a,startOnNewline:s}){let u=!1,c=s,l=s,f="",h="",p=!1,d=!1,y=!1,m=null,g=null,v=null,b=null,_=null,w=null;for(const i of t)switch(y&&("space"!==i.type&&"newline"!==i.type&&"comma"!==i.type&&o(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),y=!1),m&&(c&&"comment"!==i.type&&"newline"!==i.type&&o(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),i.type){case"space":e||"doc-start"===n&&"flow-collection"===r?.type||!i.source.includes("\t")||(m=i),l=!0;break;case"comment":{l||o(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=i.source.substring(1)||" ";f?f+=h+t:f=t,h="",c=!1;break}case"newline":c?f?f+=i.source:u=!0:h+=i.source,c=!0,p=!0,(g||v)&&(d=!0),l=!0;break;case"anchor":g&&o(i,"MULTIPLE_ANCHORS","A node can have at most one anchor"),i.source.endsWith(":")&&o(i.offset+i.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=i,null===w&&(w=i.offset),c=!1,l=!1,y=!0;break;case"tag":v&&o(i,"MULTIPLE_TAGS","A node can have at most one tag"),v=i,null===w&&(w=i.offset),c=!1,l=!1,y=!0;break;case n:(g||v)&&o(i,"BAD_PROP_ORDER",`Anchors and tags must be after the ${i.source} indicator`),_&&o(i,"UNEXPECTED_TOKEN",`Unexpected ${i.source} in ${e??"collection"}`),_=i,c="seq-item-ind"===n||"explicit-key-ind"===n,l=!1;break;case"comma":if(e){b&&o(i,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),b=i,c=!1,l=!1;break}default:o(i,"UNEXPECTED_TOKEN",`Unexpected ${i.type} token`),c=!1,l=!1}const x=t[t.length-1],k=x?x.offset+x.source.length:i;return y&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=a||"block-map"===r?.type||"block-seq"===r?.type)&&o(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:_,spaceBefore:u,comment:f,hasNewline:p,hasNewlineAfterProp:d,anchor:g,tag:v,end:k,start:w??k}}function En(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end)for(const e of t.end)if("newline"===e.type)return!0;return!1;case"flow-collection":for(const e of t.items){for(const t of e.start)if("newline"===t.type)return!0;if(e.sep)for(const t of e.sep)if("newline"===t.type)return!0;if(En(e.key)||En(e.value))return!0}return!1;default:return!0}}function An(t,e,n){if("flow-collection"===e?.type){const r=e.end[0];r.indent!==t||"]"!==r.source&&"}"!==r.source||!En(e)||n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Tn(t,e,n){const{uniqueKeys:r}=t.options;if(!1===r)return!1;const i="function"==typeof r?r:(e,n)=>e===n||ut(e)&&ut(n)&&e.value===n.value&&!("<<"===e.value&&t.schema.merge);return e.some((t=>i(t.key,n)))}const Mn="All mapping items must start at the same column";function Nn(t,e,n,r){let i="";if(t){let o=!1,a="";for(const s of t){const{source:t,type:u}=s;switch(u){case"space":o=!0;break;case"comment":{n&&!o&&r(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=t.substring(1)||" ";i?i+=a+e:i=e,a="";break}case"newline":i&&(a+=t),o=!0;break;default:r(s,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}e+=t.length}}return{comment:i,offset:e}}const Cn="Block collections are not allowed within flow collections",jn=t=>t&&("block-map"===t.type||"block-seq"===t.type);function Pn(t,e,n,r,i,o){const a="block-map"===n.type?function({composeNode:t,composeEmptyNode:e},n,r,i,o){const a=new(o?.nodeClass??ye)(n.schema);n.atRoot&&(n.atRoot=!1);let s=r.offset,u=null;for(const o of r.items){const{start:c,key:l,sep:f,value:h}=o,p=Sn(c,{indicator:"explicit-key-ind",next:l??f?.[0],offset:s,onError:i,parentIndent:r.indent,startOnNewline:!0}),d=!p.found;if(d){if(l&&("block-seq"===l.type?i(s,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==r.indent&&i(s,"BAD_INDENT",Mn)),!p.anchor&&!p.tag&&!f){u=p.end,p.comment&&(a.comment?a.comment+="\n"+p.comment:a.comment=p.comment);continue}(p.hasNewlineAfterProp||En(l))&&i(l??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else p.found?.indent!==r.indent&&i(s,"BAD_INDENT",Mn);const y=p.end,m=l?t(n,l,p,i):e(n,y,c,null,p,i);n.schema.compat&&An(r.indent,l,i),Tn(n,a.items,m)&&i(y,"DUPLICATE_KEY","Map keys must be unique");const g=Sn(f??[],{indicator:"map-value-ind",next:h,offset:m.range[2],onError:i,parentIndent:r.indent,startOnNewline:!l||"block-scalar"===l.type});if(s=g.end,g.found){d&&("block-map"!==h?.type||g.hasNewline||i(s,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&p.start<g.found.offset-1024&&i(m.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const u=h?t(n,h,g,i):e(n,s,f,null,g,i);n.schema.compat&&An(r.indent,h,i),s=u.range[2];const c=new ce(m,u);n.options.keepSourceTokens&&(c.srcToken=o),a.items.push(c)}else{d&&i(m.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(m.comment?m.comment+="\n"+g.comment:m.comment=g.comment);const t=new ce(m);n.options.keepSourceTokens&&(t.srcToken=o),a.items.push(t)}}return u&&u<s&&i(u,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,s,u??s],a}(t,e,n,r,o):"block-seq"===n.type?function({composeNode:t,composeEmptyNode:e},n,r,i,o){const a=new(o?.nodeClass??ge)(n.schema);n.atRoot&&(n.atRoot=!1);let s=r.offset,u=null;for(const{start:o,value:c}of r.items){const l=Sn(o,{indicator:"seq-item-ind",next:c,offset:s,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!l.found){if(!(l.anchor||l.tag||c)){u=l.end,l.comment&&(a.comment=l.comment);continue}c&&"block-seq"===c.type?i(l.end,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator")}const f=c?t(n,c,l,i):e(n,l.end,o,null,l,i);n.schema.compat&&An(r.indent,c,i),s=f.range[2],a.items.push(f)}return a.range=[r.offset,s,u??s],a}(t,e,n,r,o):function({composeNode:t,composeEmptyNode:e},n,r,i,o){const a="{"===r.start.source,s=a?"flow map":"flow sequence",u=new(o?.nodeClass??(a?ye:ge))(n.schema);u.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1);let l=r.offset+r.start.source.length;for(let o=0;o<r.items.length;++o){const c=r.items[o],{start:f,key:h,sep:p,value:d}=c,y=Sn(f,{flow:s,indicator:"explicit-key-ind",next:h??p?.[0],offset:l,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!y.found){if(!(y.anchor||y.tag||p||d)){0===o&&y.comma?i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):o<r.items.length-1&&i(y.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),y.comment&&(u.comment?u.comment+="\n"+y.comment:u.comment=y.comment),l=y.end;continue}!a&&n.options.strict&&En(h)&&i(h,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===o)y.comma&&i(y.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(y.comma||i(y.start,"MISSING_CHAR",`Missing , between ${s} items`),y.comment){let t="";t:for(const e of f)switch(e.type){case"comma":case"space":break;case"comment":t=e.source.substring(1);break t;default:break t}if(t){let e=u.items[u.items.length-1];st(e)&&(e=e.value??e.key),e.comment?e.comment+="\n"+t:e.comment=t,y.comment=y.comment.substring(t.length+1)}}if(a||p||y.found){const o=y.end,m=h?t(n,h,y,i):e(n,o,f,null,y,i);jn(h)&&i(m.range,"BLOCK_IN_FLOW",Cn);const g=Sn(p??[],{flow:s,indicator:"map-value-ind",next:d,offset:m.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(g.found){if(!a&&!y.found&&n.options.strict){if(p)for(const t of p){if(t===g.found)break;if("newline"===t.type){i(t,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}y.start<g.found.offset-1024&&i(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else d&&("source"in d&&d.source&&":"===d.source[0]?i(d,"MISSING_CHAR",`Missing space after : in ${s}`):i(g.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const v=d?t(n,d,g,i):g.found?e(n,g.end,p,null,g,i):null;v?jn(d)&&i(v.range,"BLOCK_IN_FLOW",Cn):g.comment&&(m.comment?m.comment+="\n"+g.comment:m.comment=g.comment);const b=new ce(m,v);if(n.options.keepSourceTokens&&(b.srcToken=c),a){const t=u;Tn(n,t.items,m)&&i(o,"DUPLICATE_KEY","Map keys must be unique"),t.items.push(b)}else{const t=new ye(n.schema);t.flow=!0,t.items.push(b),u.items.push(t)}l=v?v.range[2]:g.end}else{const r=d?t(n,d,y,i):e(n,y.end,p,null,y,i);u.items.push(r),l=r.range[2],jn(d)&&i(r.range,"BLOCK_IN_FLOW",Cn)}}const f=a?"}":"]",[h,...p]=r.end;let d=l;if(h&&h.source===f)d=h.offset+h.source.length;else{const t=s[0].toUpperCase()+s.substring(1);i(l,c?"MISSING_CHAR":"BAD_INDENT",c?`${t} must end with a ${f}`:`${t} in block collection must be sufficiently indented and end with a ${f}`),h&&1!==h.source.length&&p.unshift(h)}if(p.length>0){const t=Nn(p,d,n.options.strict,i);t.comment&&(u.comment?u.comment+="\n"+t.comment:u.comment=t.comment),u.range=[r.offset,d,t.offset]}else u.range=[r.offset,d,d];return u}(t,e,n,r,o),s=a.constructor;return"!"===i||i===s.tagName?(a.tag=s.tagName,a):(i&&(a.tag=i),a)}function Ln(t){let e,n;try{e=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(t){e=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=e.exec(t);if(!r)return t;let i=r[1],o=" ",a=e.lastIndex;for(n.lastIndex=a;r=n.exec(t);)""===r[1]?"\n"===o?i+=o:o="\n":(i+=o+r[1],o=" "),a=n.lastIndex;const s=/[ \t]*(.*)/sy;return s.lastIndex=a,r=s.exec(t),i+o+(r?.[1]??"")}function In(t,e){let n="",r=t[e+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==t[e+2]);)"\n"===r&&(n+="\n"),r=t[(e+=1)+1];return n||(n=" "),{fold:n,offset:e}}const Dn={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Rn(t,e,n,r){const i=t.substr(e,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const i=t.substr(e-2,n+2);return r(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),i}return String.fromCodePoint(o)}function Bn(t,e,n,r){const{value:i,type:o,comment:a,range:s}="block-scalar"===e.type?function(t,e,n){const r=e.offset,i=function({offset:t,props:e},n,r){if("block-scalar-header"!==e[0].type)return r(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],o=i[0];let a=0,s="",u=-1;for(let e=1;e<i.length;++e){const n=i[e];if(s||"-"!==n&&"+"!==n){const r=Number(n);!a&&r?a=r:-1===u&&(u=t+e)}else s=n}-1!==u&&r(u,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let c=!1,l="",f=i.length;for(let t=1;t<e.length;++t){const i=e[t];switch(i.type){case"space":c=!0;case"newline":f+=i.source.length;break;case"comment":n&&!c&&r(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=i.source.length,l=i.source.substring(1);break;case"error":r(i,"UNEXPECTED_TOKEN",i.message),f+=i.source.length;break;default:{r(i,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${i.type}`);const t=i.source;t&&"string"==typeof t&&(f+=t.length)}}}return{mode:o,indent:a,chomp:s,comment:l,length:f}}(e,t.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=">"===i.mode?Lt.BLOCK_FOLDED:Lt.BLOCK_LITERAL,a=e.source?function(t){const e=t.split(/\n( *)/),n=e[0],r=n.match(/^( *)/),i=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let t=1;t<e.length;t+=2)i.push([e[t],e[t+1]]);return i}(e.source):[];let s=a.length;for(let t=a.length-1;t>=0;--t){const e=a[t][1];if(""!==e&&"\r"!==e)break;s=t}if(0===s){const t="+"===i.chomp&&a.length>0?"\n".repeat(Math.max(1,a.length-1)):"";let n=r+i.length;return e.source&&(n+=e.source.length),{value:t,type:o,comment:i.comment,range:[r,n,n]}}let u=e.indent+i.indent,c=e.offset+i.length,l=0;for(let e=0;e<s;++e){const[r,o]=a[e];if(""!==o&&"\r"!==o){if(r.length<u){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+r.length,"MISSING_CHAR",t)}0===i.indent&&(u=r.length),l=e,0!==u||t.atRoot||n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}0===i.indent&&r.length>u&&(u=r.length),c+=r.length+o.length+1}for(let t=a.length-1;t>=s;--t)a[t][0].length>u&&(s=t+1);let f="",h="",p=!1;for(let t=0;t<l;++t)f+=a[t][0].slice(u)+"\n";for(let t=l;t<s;++t){let[e,r]=a[t];c+=e.length+r.length+1;const s="\r"===r[r.length-1];if(s&&(r=r.slice(0,-1)),r&&e.length<u){const t="Block scalar lines must not be less indented than their "+(i.indent?"explicit indentation indicator":"first line");n(c-r.length-(s?2:1),"BAD_INDENT",t),e=""}o===Lt.BLOCK_LITERAL?(f+=h+e.slice(u)+r,h="\n"):e.length>u||"\t"===r[0]?(" "===h?h="\n":p||"\n"!==h||(h="\n\n"),f+=h+e.slice(u)+r,h="\n",p=!0):""===r?"\n"===h?f+="\n":h="\n":(f+=h+r,h=" ",p=!1)}switch(i.chomp){case"-":break;case"+":for(let t=s;t<a.length;++t)f+="\n"+a[t][0].slice(u);"\n"!==f[f.length-1]&&(f+="\n");break;default:f+="\n"}const d=r+i.length+e.source.length;return{value:f,type:o,comment:i.comment,range:[r,d,d]}}(t,e,r):function(t,e,n){const{offset:r,type:i,source:o,end:a}=t;let s,u;const c=(t,e,i)=>n(r+t,e,i);switch(i){case"scalar":s=Lt.PLAIN,u=function(t,e){let n="";switch(t[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${t[0]}`;break;case"@":case"`":n=`reserved character ${t[0]}`}return n&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Ln(t)}(o,c);break;case"single-quoted-scalar":s=Lt.QUOTE_SINGLE,u=function(t,e){return"'"===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR","Missing closing 'quote"),Ln(t.slice(1,-1)).replace(/''/g,"'")}(o,c);break;case"double-quoted-scalar":s=Lt.QUOTE_DOUBLE,u=function(t,e){let n="";for(let r=1;r<t.length-1;++r){const i=t[r];if("\r"!==i||"\n"!==t[r+1])if("\n"===i){const{fold:e,offset:i}=In(t,r);n+=e,r=i}else if("\\"===i){let i=t[++r];const o=Dn[i];if(o)n+=o;else if("\n"===i)for(i=t[r+1];" "===i||"\t"===i;)i=t[1+ ++r];else if("\r"===i&&"\n"===t[r+1])for(i=t[1+ ++r];" "===i||"\t"===i;)i=t[1+ ++r];else if("x"===i||"u"===i||"U"===i){const o={x:2,u:4,U:8}[i];n+=Rn(t,r+1,o,e),r+=o}else{const i=t.substr(r-1,2);e(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),n+=i}}else if(" "===i||"\t"===i){const e=r;let o=t[r+1];for(;" "===o||"\t"===o;)o=t[1+ ++r];"\n"===o||"\r"===o&&"\n"===t[r+2]||(n+=r>e?t.slice(e,r+1):i)}else n+=i}return'"'===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR",'Missing closing "quote'),n}(o,c);break;default:return n(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const l=r+o.length,f=Nn(a,l,e,n);return{value:u,type:s,comment:f.comment,range:[r,l,f.offset]}}(e,t.options.strict,r),u=n?t.directives.tagName(n.source,(t=>r(n,"TAG_RESOLVE_FAILED",t))):null,c=n&&u?function(t,e,n,r,i){if("!"===n)return t[et];const o=[];for(const e of t.tags)if(!e.collection&&e.tag===n){if(!e.default||!e.test)return e;o.push(e)}for(const t of o)if(t.test?.test(e))return t;const a=t.knownTags[n];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),t[et])}(t.schema,i,u,n,r):"scalar"===e.type?function({directives:t,schema:e},n,r,i){const o=e.tags.find((t=>t.default&&t.test?.test(n)))||e[et];if(e.compat){const a=e.compat.find((t=>t.default&&t.test?.test(n)))??e[et];o.tag!==a.tag&&i(r,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${t.tagString(o.tag)} or ${t.tagString(a.tag)}`,!0)}return o}(t,i,e,r):t.schema[et];let l;try{const o=c.resolve(i,(t=>r(n??e,"TAG_RESOLVE_FAILED",t)),t.options);l=ut(o)?o:new Lt(o)}catch(t){const o=t instanceof Error?t.message:String(t);r(n??e,"TAG_RESOLVE_FAILED",o),l=new Lt(i)}return l.range=s,l.source=i,o&&(l.type=o),u&&(l.tag=u),c.format&&(l.format=c.format),a&&(l.comment=a),l}function Fn(t,e,n){if(e){null===n&&(n=e.length);for(let r=n-1;r>=0;--r){let n=e[r];switch(n.type){case"space":case"comment":case"newline":t-=n.source.length;continue}for(n=e[++r];"space"===n?.type;)t+=n.source.length,n=e[++r];break}}return t}const $n={composeNode:Un,composeEmptyNode:qn};function Un(t,e,n,r){const{spaceBefore:i,comment:o,anchor:a,tag:s}=n;let u,c=!0;switch(e.type){case"alias":u=function({options:t},{offset:e,source:n,end:r},i){const o=new Ct(n.substring(1));""===o.source&&i(e,"BAD_ALIAS","Alias cannot be an empty string"),o.source.endsWith(":")&&i(e+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=e+n.length,s=Nn(r,a,t.strict,i);return o.range=[e,a,s.offset],s.comment&&(o.comment=s.comment),o}(t,e,r),(a||s)&&r(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=Bn(t,e,s,r),a&&(u.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=function(t,e,n,r,i){const o=r?e.directives.tagName(r.source,(t=>i(r,"TAG_RESOLVE_FAILED",t))):null,a="block-map"===n.type?"map":"block-seq"===n.type?"seq":"{"===n.start.source?"map":"seq";if(!r||!o||"!"===o||o===ye.tagName&&"map"===a||o===ge.tagName&&"seq"===a||!a)return Pn(t,e,n,i,o);let s=e.schema.tags.find((t=>t.tag===o&&t.collection===a));if(!s){const u=e.schema.knownTags[o];if(!u||u.collection!==a)return u?.collection?i(r,"BAD_COLLECTION_TYPE",`${u.tag} used for ${a} collection, but expects ${u.collection}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Pn(t,e,n,i,o);e.schema.tags.push(Object.assign({},u,{default:!1})),s=u}const u=Pn(t,e,n,i,o,s),c=s.resolve?.(u,(t=>i(r,"TAG_RESOLVE_FAILED",t)),e.options)??u,l=ft(c)?c:new Lt(c);return l.range=u.range,l.tag=o,s?.format&&(l.format=s.format),l}($n,t,e,s,r),a&&(u.anchor=a.source.substring(1));break;default:r(e,"UNEXPECTED_TOKEN","error"===e.type?e.message:`Unsupported token (type: ${e.type})`),u=qn(t,e.offset,void 0,null,n,r),c=!1}return a&&""===u.anchor&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(u.spaceBefore=!0),o&&("scalar"===e.type&&""===e.source?u.comment=o:u.commentBefore=o),t.options.keepSourceTokens&&c&&(u.srcToken=e),u}function qn(t,e,n,r,{spaceBefore:i,comment:o,anchor:a,tag:s,end:u},c){const l=Bn(t,{type:"scalar",offset:Fn(e,n,r),indent:-1,source:""},s,c);return a&&(l.anchor=a.source.substring(1),""===l.anchor&&c(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(l.spaceBefore=!0),o&&(l.comment=o,l.range[2]=u),l}function Kn(t){if("number"==typeof t)return[t,t+1];if(Array.isArray(t))return 2===t.length?t:[t[0],t[1]];const{offset:e,source:n}=t;return[e,e+("string"==typeof n?n.length:1)]}function zn(t){let e="",n=!1,r=!1;for(let i=0;i<t.length;++i){const o=t[i];switch(o[0]){case"#":e+=(""===e?"":r?"\n\n":"\n")+(o.substring(1)||" "),n=!0,r=!1;break;case"%":"#"!==t[i+1]?.[0]&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:e,afterEmptyLine:r}}class Vn{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,n,r)=>{const i=Kn(t);r?this.warnings.push(new kn(i,e,n)):this.errors.push(new xn(i,e,n))},this.directives=new Ot({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:n,afterEmptyLine:r}=zn(this.prelude);if(n){const i=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${n}`:n;else if(r||t.directives.docStart||!i)t.commentBefore=n;else if(lt(i)&&!i.flow&&i.items.length>0){let t=i.items[0];st(t)&&(t=t.key);const e=t.commentBefore;t.commentBefore=e?`${n}\n${e}`:n}else{const t=i.commentBefore;i.commentBefore=t?`${n}\n${t}`:n}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:zn(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,n=-1){for(const e of t)yield*this.next(e);yield*this.end(e,n)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,((e,n,r)=>{const i=Kn(t);i[0]+=e,this.onError(i,"BAD_DIRECTIVE",n,r)})),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:n,start:r,value:i,end:o},a){const s=Object.assign({_directives:e},t),u=new bn(void 0,s),c={atRoot:!0,directives:u.directives,options:u.options,schema:u.schema},l=Sn(r,{indicator:"doc-start",next:i??o?.[0],offset:n,onError:a,parentIndent:0,startOnNewline:!0});l.found&&(u.directives.docStart=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||l.hasNewline||a(l.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),u.contents=i?Un(c,i,l,a):qn(c,l.end,r,null,l,a);const f=u.contents.range[2],h=Nn(o,f,!1,a);return h.comment&&(u.comment=h.comment),u.range=[n,f,h.offset],u}(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,n=new xn(Kn(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new xn(Kn(t),"UNEXPECTED_TOKEN",e));break}this.doc.directives.docEnd=!0;const e=Nn(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new xn(Kn(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const t=Object.assign({_directives:this.directives},this.options),n=new bn(void 0,t);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,e,e],this.decorate(n,!1),yield n}}}const Yn=Symbol("break visit"),Hn=Symbol("skip children"),Wn=Symbol("remove item");function Gn(t,e){"type"in t&&"document"===t.type&&(t={start:t.start,value:t.value}),Jn(Object.freeze([]),t,e)}function Jn(t,e,n){let r=n(e,t);if("symbol"==typeof r)return r;for(const i of["key","value"]){const o=e[i];if(o&&"items"in o){for(let e=0;e<o.items.length;++e){const r=Jn(Object.freeze(t.concat([[i,e]])),o.items[e],n);if("number"==typeof r)e=r-1;else{if(r===Yn)return Yn;r===Wn&&(o.items.splice(e,1),e-=1)}}"function"==typeof r&&"key"===i&&(r=r(e,t))}}return"function"==typeof r?r(e,t):r}Gn.BREAK=Yn,Gn.SKIP=Hn,Gn.REMOVE=Wn,Gn.itemAtPath=(t,e)=>{let n=t;for(const[t,r]of e){const e=n?.[t];if(!e||!("items"in e))return;n=e.items[r]}return n},Gn.parentCollection=(t,e)=>{const n=Gn.itemAtPath(t,e.slice(0,-1)),r=e[e.length-1][0],i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function Xn(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Qn=new Set("0123456789ABCDEFabcdef"),Zn=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),tr=new Set(",[]{}"),er=new Set(" ,[]{}\n\r\t"),nr=t=>!t||er.has(t);class rr{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){if(t){if("string"!=typeof t)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!e;let n=this.next??"stream";for(;n&&(e||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let n=0;for(;" "===e;)e=this.buffer[++n+t];if("\r"===e){const e=this.buffer[n+t+1];if("\n"===e||!e&&!this.atEnd)return t+n+1}return"\n"===e||n>=this.indentNext||!e&&!this.atEnd?t+n:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&Xn(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return("number"!=typeof t||-1!==t&&t<this.pos)&&(t=this.buffer.indexOf("\n",this.pos),this.lineEndPos=t),-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if("\ufeff"===t[0]&&(yield*this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length,n=t.indexOf("#");for(;-1!==n;){const r=t[n-1];if(" "===r||"\t"===r){e=n-1;break}n=t.indexOf("#",n+1)}for(;;){const n=t[e-1];if(" "!==n&&"\t"!==n)break;e-=1}const r=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if("---"===t&&Xn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===t&&Xn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Xn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&Xn(e)){const t=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=t,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(nr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=(yield*this.parseBlockScalarHeader()),e+=(yield*this.pushSpaces(!0)),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,n=-1;do{t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=n=e):e=0,e+=(yield*this.pushSpaces(!0))}while(t+e>0);const r=this.getLine();if(null===r)return this.setNext("flow");if((-1!==n&&n<this.indentNext&&"#"!==r[0]||0===n&&(r.startsWith("---")||r.startsWith("..."))&&Xn(r[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==r[0]&&"}"!==r[0]))return this.flowLevel=0,yield"",yield*this.parseLineStart();let i=0;for(;","===r[i];)i+=(yield*this.pushCount(1)),i+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(i+=(yield*this.pushIndicators()),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(nr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||Xn(t)||","===t)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}const n=this.buffer.substring(0,e);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const t=this.continueScalar(r+1);if(-1===t)break;r=n.indexOf("\n",t)}-1!==r&&(e=r-("\r"===n[r-1]?2:1))}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return yield*this.pushUntil((t=>Xn(t)||"#"===t))}*parseBlockScalar(){let t,e=this.pos-1,n=0;t:for(let r=this.pos;t=this.buffer[r];++r)switch(t){case" ":n+=1;break;case"\n":e=r,n=0;break;case"\r":{const t=this.buffer[r+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let r=e+1;for(t=this.buffer[r];" "===t;)t=this.buffer[++r];if("\t"===t){for(;"\t"===t||" "===t||"\r"===t||"\n"===t;)t=this.buffer[++r];e=r-1}else if(!this.blockScalarKeep)for(;;){let t=e-1,r=this.buffer[t];"\r"===r&&(r=this.buffer[--t]);const i=t;for(;" "===r;)r=this.buffer[--t];if(!("\n"===r&&t>=this.pos&&t+1+n>i))break;e=t}return yield"",yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e,n=this.pos-1,r=this.pos-1;for(;e=this.buffer[++r];)if(":"===e){const e=this.buffer[r+1];if(Xn(e)||t&&tr.has(e))break;n=r}else if(Xn(e)){let i=this.buffer[r+1];if("\r"===e&&("\n"===i?(r+=1,e="\n",i=this.buffer[r+1]):n=r),"#"===i||t&&tr.has(i))break;if("\n"===e){const t=this.continueScalar(r+1);if(-1===t)break;r=Math.max(r,t-2)}}else{if(t&&tr.has(e))break;n=r}return e||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const n=this.buffer.slice(this.pos,t);return n?(yield n,this.pos+=n.length,n.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(nr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(Xn(e)||t&&tr.has(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let t=this.pos+2,e=this.buffer[t];for(;!Xn(e)&&">"!==e;)e=this.buffer[++t];return yield*this.pushToIndex(">"===e?t+1:t,!1)}{let t=this.pos+1,e=this.buffer[t];for(;e;)if(Zn.has(e))e=this.buffer[++t];else{if("%"!==e||!Qn.has(this.buffer[t+1])||!Qn.has(this.buffer[t+2]))break;e=this.buffer[t+=3]}return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return"\n"===t?yield*this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(t){let e,n=this.pos-1;do{e=this.buffer[++n]}while(" "===e||t&&"\t"===e);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(t){let e=this.pos,n=this.buffer[e];for(;!t(n);)n=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class ir{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,n=this.lineStarts.length;for(;e<n;){const r=e+n>>1;this.lineStarts[r]<t?e=r+1:n=r}return this.lineStarts[e]===t?{line:e+1,col:1}:0===e?{line:0,col:t}:{line:e,col:t-this.lineStarts[e-1]+1}}}}function or(t,e){for(let n=0;n<t.length;++n)if(t[n].type===e)return!0;return!1}function ar(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function sr(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function ur(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function cr(t){if(0===t.length)return[];let e=t.length;t:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===t[++e]?.type;);return t.splice(e,t.length)}function lr(t){if("flow-seq-start"===t.start.type)for(const e of t.items)!e.sep||e.value||or(e.start,"explicit-key-ind")||or(e.sep,"map-value-ind")||(e.key&&(e.value=e.key),delete e.key,sr(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class fr{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new rr,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(t,e))yield*this.next(n);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=t.length);const e=function(t){switch(t){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(0===this.stack.length)yield e;else{const t=this.peek(1);switch("block-scalar"===e.type?e.indent="indent"in t?t.indent:0:"flow-collection"===e.type&&"document"===t.type&&(e.indent=0),"flow-collection"===e.type&&lr(e),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const n=t.items[t.items.length-1];if(n.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:e,sep:[]}),void(this.onKeyLine=!n.explicitKey);n.value=e;break}case"block-seq":{const n=t.items[t.items.length-1];n.value?t.items.push({start:[],value:e}):n.value=e;break}case"flow-collection":{const n=t.items[t.items.length-1];return void(!n||n.value?t.items.push({start:[],key:e,sep:[]}):n.sep?n.value=e:Object.assign(n,{key:e,sep:[]}))}default:yield*this.pop(),yield*this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const n=e.items[e.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===ar(n.start)&&(0===e.indent||n.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=n.start:t.items.push({start:n.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:t}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":return void(-1!==ar(t.start)?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if("map-value-ind"===this.type){const e=cr(ur(this.peek(2)));let n;t.end?(n=t.end,n.push(this.sourceToken),delete t.end):n=[this.sourceToken];const r={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const n="end"in e.value?e.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,e.start),r.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const n=!this.onKeyLine&&this.indent===t.indent,r=n&&(e.sep||e.explicitKey)&&"seq-item-ind"!==this.type;let i=[];if(r&&e.sep&&!e.value){const n=[];for(let r=0;r<e.sep.length;++r){const i=e.sep[r];switch(i.type){case"newline":n.push(r);break;case"space":break;case"comment":i.indent>t.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(i=e.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(r||e.value?(i.push(this.sourceToken),t.items.push({start:i}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"explicit-key-ind":return e.sep||e.explicitKey?r||e.value?(i.push(this.sourceToken),t.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(e.start.push(this.sourceToken),e.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":if(e.explicitKey)if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(or(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(sr(e.key)&&!or(e.sep,"newline")){const t=cr(e.start),n=e.key,r=e.sep;r.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:n,sep:r}]})}else i.length>0?e.sep=e.sep.concat(i,this.sourceToken):e.sep.push(this.sourceToken);else if(or(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const t=cr(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||r?t.items.push({start:i,key:null,sep:[this.sourceToken]}):or(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(r||e.value?(t.items.push({start:i,key:n,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(n):(Object.assign(e,{key:n,sep:[]}),this.onKeyLine=!0))}default:{const e=this.startBlockValue(t);if(e)return n&&"block-seq"!==e.type&&t.items.push({start:i}),void this.stack.push(e)}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const n="end"in e.value?e.value.end:void 0,r=Array.isArray(n)?n[n.length-1]:void 0;"comment"===r?.type?n?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const n=t.items[t.items.length-2],r=n?.value?.end;if(Array.isArray(r))return Array.prototype.push.apply(r,e.start),r.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;return void e.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(e.value||or(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return void this.stack.push(e)}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if("flow-error-end"===this.type){let t;do{yield*this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken));case"map-value-ind":return void(!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!e||e.value?t.items.push({start:[],key:n,sep:[]}):e.sep?this.stack.push(n):Object.assign(e,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const n=this.startBlockValue(t);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const e=this.peek(2);if("block-map"===e.type&&("map-value-ind"===this.type&&e.indent===t.indent||"newline"===this.type&&!e.items[e.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==e.type){const n=cr(ur(e));lr(t);const r=t.end.splice(1,t.end.length);r.push(this.sourceToken);const i={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:n,key:t,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=cr(ur(t));return e.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const e=cr(ur(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return"comment"===this.type&&!(this.indent<=e)&&t.every((t=>"newline"===t.type||"space"===t.type))}*documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function hr(t,e={}){const{lineCounter:n,prettyErrors:r}=function(t){const e=!1!==t.prettyErrors;return{lineCounter:t.lineCounter||e&&new ir||null,prettyErrors:e}}(e),i=new fr(n?.addNewLine),o=new Vn(e);let a=null;for(const e of o.compose(i.parse(t),!0,t.length))if(a){if("silent"!==a.options.logLevel){a.errors.push(new xn(e.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else a=e;return r&&n&&(a.errors.forEach(On(t,n)),a.warnings.forEach(On(t,n))),a}class pr extends wn{constructor(t,e,n){super(t,e,"IMPOSSIBLE",n),this.name=t}pretty(t){this.linePos=t.lineCounter.linePos(this.pos);const{line:e,col:n}=this.linePos;this.message+=` at line ${e}, column ${n} ${t.file?" @"+t.file:""}`}}class dr{constructor(){this.lineCounter=new ir,this.src="",this.file="",this.txt="",this.errors=[],this.warnings=[],this.yaml_ok=!1,this.contents=null,this.listener=null,this.prog={}}errors(t){this.errors=this.errors.concat(t)}warnings(t){this.warnings=this.warnings.concat(t)}fileError(t){let e=new pr("FILE_ERROR",0,`FileError : ${t}`);return e.pretty(this),this.errors.push(e),e}syntaxError(t,e){let n=new pr("SYNTAX_ERROR",t.range?t.range[0]:0,`SyntaxError : ${e}`);return n.pretty(this),this.errors.push(n),n}syntaxWarning(t,e){let n=new pr("SYNTAX_WARNING",t.range?t.range[0]:0,`SyntaxWarning : ${e}`);return n.pretty(this),this.warnings.push(n),n}typeError(t,e){let n=new pr("TYPE_ERROR",t.range?t.range[0]:0,`TypeError : ${e}`);return n.pretty(this),this.errors.push(n),n}grammarError(t){let e=new pr("GRAMMAR_ERROR",0,`GrammarError : ${t}`);e.pretty(this),this.errors.push(e)}grammarWarning(t){let e=new pr("GRAMMAR_WARNING",0,`GrammarWarning : ${t}`);return e.pretty(this),this.warnings.push(e),e}fails(){return this.errors.length>0}success(){return 0===this.errors.length&&0===this.warnings.length}result(){return this.contents}}class yr{constructor(t,e,n){this.ctx=t,this.type=e,this.current=n,this.start=n.range[0],this.end=n.range[1],this.childs=[]}getChild(t){return this.childs[t]}getChildCount(){return this.childs.length}getValue(){return this.value}toString(){return this.value}}class mr extends yr{constructor(t,e,n){super(t,e,n)}equals(t){if(t instanceof mr)return this.value==t.value;this.ctx.syntaxError(this.current,`Error can not compare values '${this.value}' and '${t.value}'`)}}class gr extends mr{constructor(t,e){if(super(t,"string",e),!gr.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not a string`);this.value=e.value}static checkCurrent(t){return ut(t)&&"string"==typeof t.value}static parse(t,e){try{return new gr(t,e)}catch(t){return null}}}class vr extends mr{constructor(t,e){if(super(t,"binary",e),!vr.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not a base64 string`);this.value=e.value}static checkCurrent(t){return ut(t)&&"string"==typeof t.value&&/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(t.value)}static parse(t,e){try{return new vr(t,e)}catch(t){return null}}}class br extends mr{constructor(t,e){if(super(t,"int",e),!br.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not an integer`);this.value=e.value}static checkCurrent(t){return ut(t)&&"number"==typeof t.value&&t.value==Math.floor(t.value)}static parse(t,e){try{return new br(t,e)}catch(t){return null}}}class _r extends mr{constructor(t,e){if(super(t,"float",e),!_r.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not a number`);this.value=e.value}static checkCurrent(t){return ut(t)&&"number"==typeof t.value}static parse(t,e){try{return new _r(t,e)}catch(t){return null}}}class wr extends mr{constructor(t,e){if(super(t,"boolean",e),this.value=null,!wr.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e.value}' is not a boolean`);this.value=e.value}static checkCurrent(t){return ut(t)&&"boolean"==typeof t.value}static parse(t,e){try{return new wr(t,e)}catch(t){return null}}}class xr extends mr{constructor(t,e){if(super(t,"null",e),this.value=null,!xr.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not the null value`)}static checkCurrent(t){return ut(t)&&(null==t.value||["Null","NULL","null","~"].includes(t.value))}static parse(t,e){try{return new xr(t,e)}catch(t){return null}}}class kr extends mr{constructor(t,e,n){if(super(t,"timestamp",e),!kr.checkCurrent(e))throw t.syntaxError(e,`Error: value '${e?e.value:""}' is not a timestamp in ISO9601 format`);this.value=new Date(e.value)}static checkCurrent(t){let e=ut(t)&&"string"==typeof t.value&&/\d{4}-\d{2}-\d{2}|\d{4}-\d{2}?-\d{2}?([Tt]|[ \t]+)\d{2}?:\d{2}:\d{2}(\.\d*)?(([ \t]*)Z|[-+]\d\d?(:\d{2})?)?/.test(t.value);if(1==e)try{new Date(t.value)}catch(t){e=!1}return e}static parse(t,e){try{return new kr(t,e)}catch(t){return null}}equals(t){return t instanceof kr?this.value.getTime()==t.value.getTime():this.ctx.syntaxError("Error : can not compare a timestamp with something else")}}class Or extends yr{constructor(t,e,n){super(t,e,n)}length(){return this.childs.length}isEmpty(){return 0==this.length()}}class Sr extends Or{constructor(t,e,n){if(super(t,"map",e),"object"!=typeof n||n instanceof Array)throw t.syntaxError(e,"Erorr : MapNode must be initialized with a parsed map. This should not happen.");this.value=n;for(const t in n)this.childs.push(n[t])}static checkCurrent(t){return at(t)&&t.items.every((t=>t.key&&ut(t.key)&&"string"==typeof t.key.value))}}class Er{static parse(t,e,n){"object"!=typeof e&&t.grammarError("Error: oneof rule can not be parsed'");let r=e._oneOf;if(r instanceof Array){let e=[].concat(t.errors),i=[].concat(t.warnings),o=t.errors.length;for(let a of r){let r=Br(t,null,a,n);if(o==t.errors.length)return t.errors=e,t.warnings=i,r;o=t.errors.length}return t.syntaxError(n,"Syntax Error : no valid alternative found during parsing"),null}t.grammarError("Error: _oneof rules expects a sequence of alternatives")}}var Ar="undefined"!=typeof Symbol;function Tr(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e||!0===Ar&&"symbol"===e||null==t||!0===Ar&&t instanceof Symbol||t instanceof String||t instanceof Number||t instanceof Boolean}class Mr{static parse(t,e){if("object"==typeof e){if(e._oneOf){let n;!e._oneOf instanceof Array&&t.grammarError("Error : _oneof value have to be a list"),e._oneOf=e._oneOf.map((e=>Mr.parse(t,e)));do{if(n=e._oneOf.findIndex((t=>t._oneOf)),n>=0){let t=e._oneOf[n]._oneOf;(e={_oneOf:[].concat(e._oneOf)})._oneOf.splice(n,1),e._oneOf=e._oneOf.concat(t)}}while(n>=0);return e}if(e._merge){if(!(e._merge instanceof Array))return t.grammarError("Error : _merge value have to be a map"),null;const{_merge:n,...r}=e;let i;e={_merge:e._merge},Object.keys(r).length&&e._merge.push(r),e._merge=e._merge.map((e=>Tr(e)&&t.rules[e]?t.rules[e]:e)),e._merge=e._merge.map((e=>Mr.parse(t,e)));do{if(i=e._merge.findIndex((t=>t._merge)),i>=0){let t=e.one._merge;(e={_merge:[].concat(e._merge)})._merge.splice(i,1),e._merge=e._merge.concat(t)}}while(i>=0);let o={_oneOf:[]};do{if(i=(e={_merge:[].concat(e._merge)})._merge.findIndex((t=>t._oneOf)),i>=0){let t=e._merge[i]._oneOf;(e={_merge:[].concat(e._merge)})._merge.splice(i,1),t.forEach((t=>{let n={_merge:[t].concat(e._merge)};o._oneOf.push(n)}))}}while(i>=0);if(o._oneOf.length>=1)return Mr.parse(t,o);e._merge.some((t=>t._merge||t._oneOf))&&t.grammarError("Error : merge has not been processed successfully. This error should not occur.");let a={},s={},u=null,c=-1,l=-1,f=-1;e._merge.forEach((e=>{if(e._map){a={...a};for(let n in e._map)a.key&&t.grammarError("Error : can not merge two maps with some identical keys"),a[n]=e._map[n]}if(e._mapFacultative){s={...s};for(let n in e._mapFacultative)s.key&&t.grammarError("Error : can not merge two maps with some identical keys"),s[n]=e._mapFacultative[n]}if(e._mapOf){if(null!=u)return t.grammarError("Error : only one '_mapOf' is allowed in a '_merge' clause"),null;u=e._mapOf}e._nb&&(c<0||c==e._nb?c=e._nb:t.grammarError("Contradictory sizing in merge clause")),e._min&&(l=Math.max(e._min,l)),e._max&&(nax=c>0?Math.min(e._max,f):e._max)}));let h={};return c>=0&&(h._nb=c),l>=0&&(h._min=l),f>=0&&(h._max=f),Object.keys(a).length>0&&(h._map=a),Object.keys(s).length>0&&(h._mapFacultative=s),null!=u&&(h._mapOf=u),h}if(e._map){let n={};for(const r in e._map)n[r]=Mr.parse(t,e._map[r]);e._map=n}if(e._mapFacultative){let n={};for(const r in e._mapFacultative)n[r]=Mr.parse(t,e._mapFacultative[r]);e._mapFacultative=n}if(e._mapOf){let n={};for(const r in e._mapOf){let i=Mr.parse(t,r),o=Mr.parse(t,e._mapOf[r]);n[i]=o}e._mapOf=n}e._list&&(e._list=e._list.map((e=>Mr.parse(t,e)))),e._listFacultative&&(e._listFacultative=e._listFacultative.map((e=>Mr.parse(t,e)))),e._listOf&&(e._listOf=Mr.parse(t,e._listOf))}return e}}class Nr{static isPositiveInt(t){return"number"==typeof t&&t==Math.floor(t)&&t>0}static sizeChecker(t,e,n,r){if(Nr.isPositiveInt(n))if(at(r)||ct(r))switch(e){case"eq":return r.items.length==n;case"min":return r.items.length>=n;case"max":return r.items.length<=n}else t.syntaxError(r,"Error : a map is expected");else t.grammarError(`Error: the map checker '${e}' does not have a positive integer as value`);return!1}static sizeCheckers(t,e,n){return null==e._nb||Nr.sizeChecker(t,"eq",e._nb,n)?null==e._min||Nr.sizeChecker(t,"min",e._min,n)?!(null!=e._max&&!Nr.sizeChecker(t,"max",e._max,n)&&(t.syntaxError(n,`Error : map expected with more than ${e._max} elements but ${n.items.length} are provided`),1)):(t.syntaxError(n,`Error : map expected with more than ${e._min} elements but ${n.items.length} are provided`),!1):(t.syntaxError(n,`Error : map expected with ${e._nb} elements but ${n.items.length} are provided`),!1)}}class Cr{static parse(t,e,n){if(!Sr.checkCurrent(n))return t.syntaxError(n,"Error : a map whose keys are strings is expected "),null;if(e._merge&&(e=Mr.parse(t,e))._oneOf)return Er.parse(t,e,n);let r=e._map,i=e._mapOf,o=e._mapFacultative;if(null!=i&&"object"!=typeof i||null!=o&&"object"!=typeof o)return t.grammarError("Error : error in map value definition"),null;if(!Nr.sizeCheckers(t,e,n))return null;if(null!=r)for(let e in r){if("string"!=typeof e)return t.grammarError("Error : error in map definition"),null;if(!n.has(e))return t.syntaxError(n,`Error : key '${e}' not found in current value`),null}let a,s=null;if(i){let t=Object.entries(i);1==t.length&&([[a,s]]=t)}let u={};for(let i of n.items){let n=i.key.value,c=i.value,l=null;if(r&&r[n])l=Br(t,null,r[n],c);else if(o&&o[n])l=Br(t,null,o[n],c);else{if(!a||!s)return t.syntaxError(c,`Error : '${n}' is not a valid key (in rule : ${JSON.stringify(e)})`),null;{let e=Br(t,null,a,i.key);if(l=Br(t,null,s,c),e.value!=n)return t.syntaxError(n,`Error : '${n}' does not match expected '${a}' type`),null}}if(null==l)return t.syntaxError(c,`Error : bad value '${c}'found for '${n}' (mapparser.parse)`),null;let f=new gr(t,i.key);if(l.key=f,null!=u[n])return t.syntaxError(c,`Error : more than one value provided in the map for the key '${n}'`),null;u[n]=l}return new Sr(t,n,u)}static parse_any(t,e){if(!Sr.checkCurrent(e))return t.syntaxError(e,"Error : a map whose keys are strings is expected "),null;let n={};return e.items.forEach((e=>{let r=e.key.value,i=e.value,o=Lr.parse_any(t,i);if(null==o)return t.syntaxError(i,`Error : bad value '${i}' found for '${r}' (mapparser.parse_any)`),null;let a=new gr(t,e.key);o.key=a,null!=n[r]&&t.syntaxError(i,`Error : more than one value provided in the map for the key '${r}'`),n[r]=o})),new Sr(t,e,n)}}class jr extends Or{constructor(t,e,n){if(super(t,"list",e),!n instanceof Array)throw t.syntaxError(e,"Erorr : ListNode must be initialized with an array. This should not happen.");this.value=n,this.childs=this.value}static checkCurrent(t){return ct(t)}}class Pr{static parse(t,e,n){if(!jr.checkCurrent(n))return t.syntaxError(n,"Error : a list is expected "),null;if(!Nr.sizeCheckers(t,e,n))return null;let r=e._list,i=e._listOf,o=e._listFacultative;if(null!=r&&!(r instanceof Array)||null!=o&&!(o instanceof Array))return t.grammarError("Error : error in list value definition"),null;let a=0,s=n.items.length,u=[];r&&r.forEach((e=>{if(!(a<s))return t.syntaxError(n,"Error : mandatory elements missing in the list"),null;{let r=Br(t,null,e,n.items[a]);if(null==r)return t.syntaxError(n,"Error : can node parse an element of the list"),null;u.push(r)}a+=1}));let c=[].concat(t.errors),l=[].concat(t.warnings);if(o&&o.forEach((e=>{if(a<s){let r=Br(t,null,e,n.items[a]);null!=r&&(u.push(r),a+=1)}})),null!=i)for(;a<s;a++){let e=Br(t,null,i,n.items[a]);if(null==e)return t.syntaxError(n,"Error : wrong type for an element in a list"),null;u.push(e)}return a<s?(t.syntaxError(n,"Error : too much elements in the list"),null):(t.errors=c,t.warnings=l,new jr(t,n,u))}static parse_any(t,e){if(!jr.checkCurrent(e))return t.syntaxError(e,"Error : a list whose keys are strings is expected "),null;let n=[];return e.items.forEach((e=>{let r=Lr.parse_any(t,e);if(null==r)return t.SyntaxError(value,`Error : bad value '${value}' found for '${key}' (listparser.parse_any)`),null;n.push(r)})),new jr(t,e,n)}}class Lr{static parse(t,e,n){switch(e){case"string":return gr.parse(t,n);case"binary":return vr.parse(t,n);case"timestamp":return kr.parse(t,n);case"int":return br.parse(t,n);case"float":return _r.parse(t,n);case"boolean":return wr.parse(t,n);case"null":return xr.parse(t,n);case"any":return Lr.parse_any(t,n);default:return Fr(t,e,n)}}static parse_any(t,e){if(ut(e)){switch(typeof e.value){case"number":return br.checkCurrent(e)?br.parse(t,e):_r.parse(t,e);case"boolean":return wr.parse(t,e);case"string":return gr.parse(t,e);case"object":if(null==e.value)return xr.parse(t,e);t.syntaxError(e,`Error: value '${e.value}' is not a scalar value`);default:t.syntaxError(e,`Error: value '${e.value}' is not a scalar value`)}return null}return at(e)?Cr.parse_any(t,e):ct(e)?Pr.parse_any(t,e):null}}class Ir{static parse(t,e,n){"object"==typeof e&&e._in||t.grammarError("Error:  can not parse _in rule'");let r=e._in;if(!(r instanceof Array))return t.grammarError("Error: _in rules expects a sequence of alternatives"),null;for(let e of r)if(!Tr(e))return t.grammarError("Error: _in rules expects each alternative to be a scalar"),null;if(!ut(n))return t.syntaxError(n,"Syntax Error : scalar value expected by rule '_in'"),null;let i=Lr.parse_any(t,n);if(i){let e=[].concat(t.errors),n=[].concat(t.warnings),o=t.errors.length,a=i.value;for(let s of r)if(s){let r=s==a?i:null;if(null!=r)return t.errors=e,t.warnings=n,r;o=t.errors.length}}return t.syntaxError(n,"Syntax Error : no valid alternative for '_in' rule found during parsing"),null}}class Dr{static parse(t,e,n){if(!gr.checkCurrent(n))return t.syntaxError(n,`Error: regular expressions match only strings, '${n?n.value:""}' is not a string`),null;let r=e._regex;if(null==r)return t.grammarError("Error : regep rule must have a value for key '_regex'"),null;let i=null;try{i=new RegExp(r)}catch(t){}return null==i?(t.grammarError(`Error: value '${i}' is not a valid regular expression`),null):i.test(n.value)?new gr(t,n):(t.syntaxError(n,`Error: value '${n.value}' does not match the regular expression '${i}'`),null)}}class Rr{static scalartypes=["string","int","float","null","boolean","binary","timestamp"];static keywords=["_map","_mapOf","_mapFacultative","_list","_listOf","_listFacultative","_oneOf","_regex","_nb","_min","_max","_in"];static throwOnError=!1;static parse(t,e,n,r){if(null==r)return t.fileError("No source to parse"),null;if(Rr.scalartypes.includes(e)||Rr.keywords.includes(e))return t.syntaxError(r,`'${e}' is not allowed as rule_name in Lidy Grammar (reserved keyword)`),null;let i="enter_"+e;r.ctx=t,t.listener&&t.listener[i]&&t.listener[i](r);let o=Br(t,null,n,r);if(this.throwOnError&&null===o)throw 0!==t.errors.length?t.errors[t.errors.length-1]:new Error("Unknown error encountered while parsing.");let a="exit_"+e;return t.listener&&t.listener[a]&&t.listener[a](o),o}}function Br(t,e,n,r){if(e)return Rr.parse(t,e,n,r);if(Tr(n))return Lr.parse(t,n,r);if("object"==typeof n){if(n._map||n._mapOf||n._mapFacultative||n._merge)return Cr.parse(t,n,r);if(n._list||n._listOf||n._listFacultative)return Pr.parse(t,n,r);if(n._oneOf)return Er.parse(t,n,r);if(n._regex)return Dr.parse(t,n,r);if(n._in)return Ir.parse(t,n,r)}return t.grammarError("Error : grammar error : no valid keyword found"),null}function Fr(t,e,n){let r=t.rules[e];return void 0!==r?Br(t,e,r,n):(t.grammarError(`no rule named ${e} found.`),null)}function $r(t){t.keyword||(t.keyword="main");let e=new dr;return e.file=t.abs_path,e.prog=t.prog,t.rules?e.rules=t.rules:function(t,e,n){try{t.rules=function(t,e,n){let r;const i=hr(t,n);if(!i)return null;if(i.warnings.forEach((t=>ie(i.options.logLevel,t))),i.errors.length>0){if("silent"!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}(e)}catch(e){throw t.errors.push(e),t.grammarError("ERROR : can not parse dsl ")}if("object"==(t.rules,!1))throw t.grammarError("ERROR : can not parse dsl ");if(!t.rules[n])throw Error("ERROR : no rule labeled '"+n+"' in the grammar")}(e,t.dsl_data,t.keyword),e.listener=t.listener,function(t,e){t.lineCounter=new ir;let n=hr(e,{lineCounter:t.lineCounter});n||t.fileError("can not parse the provided source code."),t.src=n.contents,t.txt=e,t.errors=n.errors,t.warnings=n.warnings,t.yaml_ok=0==t.errors.length&&0==t.warnings.length}(e,t.src_data),function(t,e,n){let r=Fr(t,e,n);return t.errors.filter((t=>t instanceof pr)).forEach((e=>e.pretty(t))),t.warnings.filter((t=>t instanceof pr)).forEach((e=>e.pretty(t))),t.contents=r,t}(e,t.keyword,e.src)}var Ur={main:"root",root:{_oneOf:["pod","service","ingress","configMap","secret","persistentVolumeClaim","deployment","statefulSet","job","cronJob","standaloneContainer","standaloneConfigMapMount","standaloneSecretMount","standalonePersistentVolumeClaimMount","catchAll"]},uint16:"int",metadata:{_mapFacultative:{name:"string",namespace:"string",labels:{_mapOf:{string:"string"}},annotations:{_mapOf:{string:"string"}},finalizers:{_mapOf:{string:"string"}},ownerReferences:{_listOf:{_mapFacultative:{apiVersion:"string",blockOwnerDeletion:"boolean",controller:"boolean",kind:"string",name:"string",uid:"string"}}},managedFields:{_listOf:{_mapFacultative:{apiVersion:"string",fieldsType:"string",fieldsV1:{_mapOf:{string:"string"}},manager:"string",operation:"string",subresource:"string",time:"string"}}},generateName:"string",uid:"string",resourceVersion:"string",generation:"int",selfLink:"string",creationTimestamp:"string",deletionGracePeriodSeconds:"int",deletionTimestamp:"string"}},labelSelector:{_mapFacultative:{matchLabels:{_mapOf:{string:"string"}},matchExpressions:{_map:{key:"string",operator:{_in:["In","NotIn","Exists","DoesNotExist"]}},_mapFacultative:{values:{_listOf:"string"}}}}},pod:{_map:{apiVersion:"string",kind:{_in:["Pod"]}},_mapFacultative:{metadata:"metadata",spec:"podSpec"}},podSpec:{_mapFacultative:{containers:{_listOf:"container"},volumes:{_listOf:{_oneOf:["configMapVolume","secretVolume","persistentVolumeClaimVolume","any"]}}},_mapOf:{any:"any"}},container:{_mapFacultative:{name:"string",image:"string",ports:{_listOf:{_mapFacultative:{name:"string",protocol:"string",hostIP:"string",hostPort:"uint16",containerPort:"uint16"}}},volumeMounts:{_listOf:"volumeMount"}},_mapOf:{any:"any"}},volumeMount:{_map:{name:"string",mountPath:"string"},_mapFacultative:{subPath:"string",subPathExpr:"string",mountPropagation:{_in:["None","HostToContainer","Bidirectional"]},readOnly:"boolean"}},service:{_map:{apiVersion:"string",kind:{_in:["Service"]}},_mapFacultative:{metadata:"metadata",spec:{_mapFacultative:{type:{_in:["ClusterIP","NodePort","LoadBalancer","ExternalName"]},selector:{_mapOf:{string:"string"}},ports:{_listOf:{_mapFacultative:{name:"string",protocol:{_in:["TCP","UDP","SCTP"]},targetPort:{_oneOf:["string","int"]}},_map:{port:"uint16"}}},clusterIP:"string",externalName:"string",sessionAffinity:"string",sessionAffinityConfig:{_mapFacultative:{clientIP:{_mapFacultative:{timeoutSeconds:"int"}}}},clusterIPs:{_listOf:"string"},allocateLoadBalancerNodePorts:"boolean",externalIPs:{_listOf:"string"},externalTrafficPolicy:"string",healthCheckNodePort:"uint16",internalTrafficPolicy:"string",ipFamilies:{_listOf:"string"},ipFamilyPolicy:"string",loadBalancerClass:"string",loadBalancerSourceRanges:{_listOf:"string"},publishNotReadyAddresses:"boolean",loadBalancerIP:"string"}}}},ingress:{_map:{apiVersion:"string",kind:{_in:["Ingress"]}},_mapFacultative:{metadata:"metadata",spec:{_mapFacultative:{ingressClassName:"string",defaultBackend:"ingressBackend",rules:{_listOf:{_mapFacultative:{host:"string",http:{_map:{paths:{_listOf:{_mapFacultative:{path:"string"},_map:{pathType:{_in:["Exact","Prefix","ImplementationSpecific"]},backend:"ingressBackend"}}}}}}}},tls:{_listOf:{_mapFacultative:{hosts:{_listOf:"string"},secretName:"string"}}}}},status:"any"}},ingressBackend:{_mapFacultative:{service:{_map:{name:"string"},_mapFacultative:{port:{_mapFacultative:{name:"string",number:"uint16"}}}},resource:{_mapFacultative:{apiGroup:"string"},_map:{kind:"string",name:"string"}}}},configMap:{_map:{apiVersion:"string",kind:{_in:["ConfigMap"]}},_mapFacultative:{metadata:"metadata",data:{_mapOf:{string:"string"}},binaryData:{_mapOf:{string:"string"}},immutable:"boolean"}},configMapVolume:{_map:{name:"string"},_mapFacultative:{configMap:{_mapFacultative:{name:"string",defaultMode:"number",items:{_listOf:{_map:{key:"string",path:"string"},_mapFacultative:{mode:"number"}}},optional:"boolean"}}}},secret:{_map:{apiVersion:"string",kind:{_in:["Secret"]}},_mapFacultative:{metadata:"metadata",type:{_in:["Opaque","kubernetes.io/service-account-token","kubernetes.io/dockercfg","kubernetes.io/dockerconfigjson","kubernetes.io/basic-auth","kubernetes.io/ssh-auth","kubernetes.io/tls","bootstrap.kubernetes.io/token"]},stringData:{_mapOf:{string:"string"}},data:{_mapOf:{string:"string"}},immutable:"boolean"}},secretVolume:{_map:{name:"string"},_mapFacultative:{secret:{_mapFacultative:{secretName:"string",defaultMode:"number",items:{_listOf:{_map:{key:"string",path:"string"},_mapFacultative:{mode:"number"}}},optional:"boolean"}}}},persistentVolumeClaim:{_map:{apiVersion:"string",kind:{_in:["PersistentVolumeClaim"]}},_mapFacultative:{metadata:"metadata",spec:{_mapFacultative:{storageClassName:"string",accessModes:{_listOf:{_in:["ReadWriteOnce","ReadWriteMany","ReadWriteOncePod","ReadOnlyMany"]}},volumeMode:{_in:["Filesystem","Block"]},resources:{_mapFacultative:{limits:{_mapOf:{string:"string"}},requests:{_mapOf:{string:"string"}}}},volumeName:"string",selector:"labelSelector"}}}},persistentVolumeClaimVolume:{_map:{name:"string"},_mapFacultative:{persistentVolumeClaim:{_map:{claimName:"string"},_mapFacultative:{readOnly:"boolean"}}}},deployment:{_map:{apiVersion:"string",kind:{_in:["Deployment"]}},_mapFacultative:{metadata:"metadata",spec:"deploymentSpec"}},deploymentSpec:{_mapFacultative:{replicas:"int",strategy:{_mapFacultative:{type:{_in:["RollingUpdate","Recreate"]},rollingUpdate:{_mapFacultative:{maxSurge:{_oneOf:["string","int"]},maxUnavailable:{_oneOf:["string","int"]}}}}},revisionHistoryLimit:"int",minReadySeconds:"int",progressDeadlineSeconds:"int",paused:"boolean",selector:"labelSelector",template:{_mapFacultative:{metadata:"metadata",spec:"podSpec"}}}},statefulSet:{_map:{apiVersion:"string",kind:{_in:["StatefulSet"]}},_mapFacultative:{metadata:"metadata",spec:"statefulSetSpec"}},statefulSetSpec:{_mapFacultative:{selector:"labelSelector",template:{_mapFacultative:{metadata:"metadata",spec:"podSpec"}}},_mapOf:{any:"any"}},job:{_map:{apiVersion:"string",kind:{_in:["Job"]}},_mapFacultative:{metadata:"metadata",spec:"jobSpec"}},jobSpec:{_mapFacultative:{selector:"labelSelector",template:{_mapFacultative:{metadata:"metadata",spec:"podSpec"}}},_mapOf:{any:"any"}},cronJob:{_map:{apiVersion:"string",kind:{_in:["CronJob"]}},_mapFacultative:{metadata:"metadata",spec:"cronJobSpec"}},cronJobSpec:{_mapFacultative:{jobTemplate:{_mapFacultative:{metadata:"metadata",spec:"jobSpec"}}},_mapOf:{any:"any"}},standaloneContainer:{_map:{apiVersion:"string",kind:{_in:["Container"]}},_mapFacultative:{name:"string",image:"string",ports:{_listOf:{_mapFacultative:{name:"string",protocol:"string",hostIP:"string",hostPort:"uint16",containerPort:"uint16"}}},volumeMounts:{_listOf:"volumeMount"}},_mapOf:{any:"any"}},catchAll:{_mapOf:{any:"any"}}};function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zr(r.key),r)}}function zr(t){var e=function(t,e){if("object"!=qr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qr(e)?e:e+""}var Vr=function(){return e=function t(e,n){var r=n.path;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pluginData=e,this.path=r},n=[{key:"exit_root",value:function(e){var n,r,i=null==e||null===(n=e.value.apiVersion)||void 0===n?void 0:n.value,o=null==e||null===(r=e.value.kind)||void 0===r?void 0:r.value;i&&o?this.__createComponent(e,i,o):this.pluginData.parseErrors.push(new t.ParseError({message:'File "'.concat(this.path,'" is missing apiVersion or kind.')}))}},{key:"__createComponent",value:function(e,n,r){var i,o,a=this.pluginData.definitions.components.find((function(t){return t.apiVersion===n&&t.type===r}))||this.pluginData.definitions.components.find((function(t){return"UnknownResource"===t.type})),s=new t.Component({id:(null===(i=e.value.metadata)||void 0===i||null===(i=i.value.name)||void 0===i?void 0:i.value)||(null===(o=e.value.name)||void 0===o?void 0:o.value)||this.pluginData.generateComponentId(a),definition:a,path:this.path});return this.pluginData.components.push(s),s.attributes=this.__createAttributes(e,a,s),s}},{key:"__createAttributes",value:function(e,n,r){var i=this;return Object.keys(e.value).filter((function(t){return!(null!=n&&n.ignoredAttributes.includes(t))})).reduce((function(o,a){var s,u,c=e.value[a],l=null==n?void 0:n.definedAttributes.find((function(t){return t.name===("list"!==e.type?a:null)})),f=r.definition.childrenIndex.find((function(t){return t.attributeName===a}));if(f){var h="list"!==c.type?[c]:c.value;return i.__createChildrenComponents(h,f,r),o}u="map"===c.type||"list"===c.type&&"map"===(null===(s=c.value[0])||void 0===s?void 0:s.type)?i.__createAttributes(c,l,r):"list"===c.type?c.value.map((function(t){return t.value})):c.value;var p=new t.ComponentAttribute({name:"list"!==e.type?a:null,type:i.__lidyToLetoType(c.type),definition:l,value:u});return"Link"===(null==l?void 0:l.type)&&(p.type="Array",Array.isArray(p.value)||(p.value=[p.value])),o.push(p),o}),[])}},{key:"__createChildrenComponents",value:function(e,n,r){var i=this,o=n.componentType,a=n.attributeName,s=this.pluginData.definitions.components.find((function(t){return t.type===o}));e.forEach((function(e){var n=s.apiVersion,o=s.type,u=i.__createComponent(e,n,o);u.setReferenceAttribute(r),"Container"===s.type&&u.attributes.push(new t.ComponentAttribute({name:"isInitContainer",type:"Boolean",definition:s.definedAttributes.find((function(t){return"isInitContainer"===t.name})),value:"initContainers"===a}))}))}},{key:"__lidyToLetoType",value:function(t){switch(t){case"string":return"String";case"boolean":return"Boolean";case"int":case"float":return"Number";case"map":return"Object";case"list":return"Array";default:return null}}},{key:"exit_uint16",value:function(t){t.value<0||Math.pow(2,16)}}],n&&Kr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();const Yr=Vr;function Hr(t){return Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hr(t)}function Wr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gr(r.key),r)}}function Gr(t){var e=function(t,e){if("object"!=Hr(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hr(e)?e:e+""}function Jr(t,e,n){return e=Qr(e),function(t,e){if(e&&("object"==Hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xr()?Reflect.construct(e,n||[],Qr(t).constructor):e.apply(t,n))}function Xr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xr=function(){return!!t})()}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}function Zr(t,e){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zr(t,e)}const ti=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Jr(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zr(t,e)}(e,t),n=e,r=[{key:"isParsable",value:function(t){var e=/\.ya?ml$/.test(t.path);return void 0===t.content?e:e&&["apiVersion","kind"].every((function(e){var n;return null===(n=t.content)||void 0===n?void 0:n.includes(e)}))}},{key:"getModels",value:function(){var t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){return t.isParsable(e)})).reduce((function(t,e){var n=e.path.split("/").slice(0,-1).join("/");return t.includes(n)||t.push(n),t}),[])}},{key:"parse",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.pluginData.components=[],this.pluginData.parseErrors=[],n.filter((function(e){return e.path.split("/").slice(0,-1).join("/")===t.path})).filter((function(t){var n=t.content,i=t.path;return!(!n||""===n.trim())||(e.pluginData.emitEvent({parent:r,type:"Parser",action:"read",status:"warning",files:[i],data:{code:"no_content",global:!1}}),!1)})).forEach((function(t){var n=e.pluginData.emitEvent({parent:r,type:"Parser",action:"read",status:"running",files:[t.path],data:{global:!1}}),i=new Yr(e.pluginData,t);!function(t){t.rules=Ur,$r(t)}({src_data:t.content,listener:i,path:t.path,prog:{errors:[],warnings:[],imports:[],alreadyImported:[],root:[]}}),e.pluginData.emitEvent({id:n,status:"success"})})),this.__convertSelectorAttributesToLinks()}},{key:"__convertSelectorAttributesToLinks",value:function(){var t=this;this.pluginData.components.forEach((function(e){var n,r=e.getAttributeByName("selector");"Link"===(null==r||null===(n=r.definition)||void 0===n?void 0:n.type)&&(r.value=t.pluginData.getComponentsByType(r.definition.linkRef).filter((function(e){var n,i=null===(n=e.attributes.find((function(t){return"metadata"===t.name})))||void 0===n||null===(n=n.value)||void 0===n?void 0:n.find((function(t){return"labels"===t.name}));if(!i)return!1;var o=t.__convertObjectAttributeToJsObject(r),a=t.__convertObjectAttributeToJsObject(i),s=Object.keys(o);return s.length&&s.every((function(t){return o[t]===a[t]}))})).map((function(t){return t.id})))}))}},{key:"__convertObjectAttributeToJsObject",value:function(t){return t.value.reduce((function(t,e){var n=e.name,r=e.value;return t[n]=r,t}),{})}}],r&&Wr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(t.DefaultParser);function ei(t){return null==t}var ni={isNothing:ei,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:ei(t)?[]:[t]},repeat:function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t}};function ri(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),r+" "+n):r}function ii(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ri(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}ii.prototype=Object.create(Error.prototype),ii.prototype.constructor=ii,ii.prototype.toString=function(t){return this.name+": "+ri(this,t)};var oi=ii;function ai(t,e,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-e>s&&(e=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+t.slice(e,n).replace(/\t/g,"→")+a,pos:r-e+o.length}}function si(t,e){return ni.repeat(" ",e-t.length)+t}var ui=function(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(t.buffer);)o.push(n.index),i.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,u,c="",l=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+l+3);for(s=1;s<=e.linesBefore&&!(a-s<0);s++)u=ai(t.buffer,i[a-s],o[a-s],t.position-(i[a]-i[a-s]),f),c=ni.repeat(" ",e.indent)+si((t.line-s+1).toString(),l)+" | "+u.str+"\n"+c;for(u=ai(t.buffer,i[a],o[a],t.position,f),c+=ni.repeat(" ",e.indent)+si((t.line+1).toString(),l)+" | "+u.str+"\n",c+=ni.repeat("-",e.indent+l+3+u.pos)+"^\n",s=1;s<=e.linesAfter&&!(a+s>=o.length);s++)u=ai(t.buffer,i[a+s],o[a+s],t.position-(i[a]-i[a+s]),f),c+=ni.repeat(" ",e.indent)+si((t.line+s+1).toString(),l)+" | "+u.str+"\n";return c.replace(/\n$/,"")},ci=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],li=["scalar","sequence","mapping"],fi=function(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===ci.indexOf(e))throw new oi('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=function(t){var e={};return null!==t&&Object.keys(t).forEach((function(n){t[n].forEach((function(t){e[String(t)]=n}))})),e}(e.styleAliases||null),-1===li.indexOf(this.kind))throw new oi('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function hi(t,e){var n=[];return t[e].forEach((function(t){var e=n.length;n.forEach((function(n,r){n.tag===t.tag&&n.kind===t.kind&&n.multi===t.multi&&(e=r)})),n[e]=t})),n}function pi(t){return this.extend(t)}pi.prototype.extend=function(t){var e=[],n=[];if(t instanceof fi)n.push(t);else if(Array.isArray(t))n=n.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new oi("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof fi))throw new oi("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new oi("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new oi("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),n.forEach((function(t){if(!(t instanceof fi))throw new oi("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var r=Object.create(pi.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=hi(r,"implicit"),r.compiledExplicit=hi(r,"explicit"),r.compiledTypeMap=function(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(t){t.multi?(n.multi[t.kind].push(t),n.multi.fallback.push(t)):n[t.kind][t.tag]=n.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var di=pi,yi=new fi("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),mi=new fi("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),gi=new fi("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}}),vi=new di({explicit:[yi,mi,gi]}),bi=new fi("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),_i=new fi("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function wi(t){return 48<=t&&t<=55}function xi(t){return 48<=t&&t<=57}var ki=new fi("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=t.length,i=0,o=!1;if(!r)return!1;if("-"!==(e=t[i])&&"+"!==e||(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;o=!0}return o&&"_"!==e}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!(48<=(n=t.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==e}if("o"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!wi(t.charCodeAt(i)))return!1;o=!0}return o&&"_"!==e}}if("_"===e)return!1;for(;i<r;i++)if("_"!==(e=t[i])){if(!xi(t.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===e)},construct:function(t){var e,n=t,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===e){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!ni.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Oi=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Si=/^[-+]?[0-9]+e/,Ei=new fi("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!Oi.test(t)||"_"===t[t.length-1])},construct:function(t){var e,n;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||ni.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ni.isNegativeZero(t))return"-0.0";return n=t.toString(10),Si.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Ai=vi.extend({implicit:[bi,_i,ki,Ei]}),Ti=Ai,Mi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ni=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Ci=new fi("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==Mi.exec(t)||null!==Ni.exec(t))},construct:function(t){var e,n,r,i,o,a,s,u,c=0,l=null;if(null===(e=Mi.exec(t))&&(e=Ni.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(l=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(l=-l)),u=new Date(Date.UTC(n,r,i,o,a,s,c)),l&&u.setTime(u.getTime()-l),u},instanceOf:Date,represent:function(t){return t.toISOString()}}),ji=new fi("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",Li=new fi("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=Pi;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=Pi,a=0,s=[];for(e=0;e<i;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0==(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function(t){var e,n,r="",i=0,o=t.length,a=Pi;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0==(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),Ii=Object.prototype.hasOwnProperty,Di=Object.prototype.toString,Ri=new fi("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=[],s=t;for(e=0,n=s.length;e<n;e+=1){if(r=s[e],o=!1,"[object Object]"!==Di.call(r))return!1;for(i in r)if(Ii.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),Bi=Object.prototype.toString,Fi=new fi("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==Bi.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}}),$i=Object.prototype.hasOwnProperty,Ui=new fi("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if($i.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}}),qi=Ti.extend({implicit:[Ci,ji],explicit:[Li,Ri,Fi,Ui]}),Ki=Object.prototype.hasOwnProperty,zi=1,Vi=2,Yi=3,Hi=4,Wi=1,Gi=2,Ji=3,Xi=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Qi=/[\x85\u2028\u2029]/,Zi=/[,\[\]\{\}]/,to=/^(?:!|!!|![a-z\-]+!)$/i,eo=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function no(t){return Object.prototype.toString.call(t)}function ro(t){return 10===t||13===t}function io(t){return 9===t||32===t}function oo(t){return 9===t||32===t||10===t||13===t}function ao(t){return 44===t||91===t||93===t||123===t||125===t}function so(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function uo(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function co(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var lo=new Array(256),fo=new Array(256),ho=0;ho<256;ho++)lo[ho]=uo(ho)?1:0,fo[ho]=uo(ho);function po(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||qi,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function yo(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=ui(n),new oi(e,n)}function mo(t,e){throw yo(t,e)}function go(t,e){t.onWarning&&t.onWarning.call(null,yo(t,e))}var vo={YAML:function(t,e,n){var r,i,o;null!==t.version&&mo(t,"duplication of %YAML directive"),1!==n.length&&mo(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&mo(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&mo(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&go(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&mo(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],to.test(r)||mo(t,"ill-formed tag handle (first argument) of the TAG directive"),Ki.call(t.tagMap,r)&&mo(t,'there is a previously declared suffix for "'+r+'" tag handle'),eo.test(i)||mo(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(e){mo(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i}};function bo(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||mo(t,"expected valid JSON character");else Xi.test(s)&&mo(t,"the stream contains non-printable characters");t.result+=s}}function _o(t,e,n,r){var i,o,a,s;for(ni.isObject(n)||mo(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],Ki.call(e,o)||(e[o]=n[o],r[o]=!0)}function wo(t,e,n,r,i,o,a,s,u){var c,l;if(Array.isArray(i))for(c=0,l=(i=Array.prototype.slice.call(i)).length;c<l;c+=1)Array.isArray(i[c])&&mo(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===no(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===no(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,l=o.length;c<l;c+=1)_o(t,e,o[c],n);else _o(t,e,o,n);else t.json||Ki.call(n,i)||!Ki.call(e,i)||(t.line=a||t.line,t.lineStart=s||t.lineStart,t.position=u||t.position,mo(t,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}function xo(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):mo(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ko(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;io(i);)9===i&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!ro(i))break;for(xo(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&go(t,"deficient indentation"),r}function Oo(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!oo(e)))}function So(t,e){1===e?t.result+=" ":e>1&&(t.result+=ni.repeat("\n",e-1))}function Eo(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,mo(t,"tab characters must not be used in indentation")),45===r)&&oo(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,ko(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,Mo(t,e,Yi,!1,!0),a.push(t.result),ko(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)mo(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function Ao(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&mo(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):mo(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!oo(i);)33===i&&(a?mo(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),to.test(n)||mo(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),Zi.test(r)&&mo(t,"tag suffix cannot contain flow indicator characters")}r&&!eo.test(r)&&mo(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(e){mo(t,"tag name is malformed: "+r)}return o?t.tag=r:Ki.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:mo(t,'undeclared tag handle "'+n+'"'),!0}function To(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&mo(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!oo(n)&&!ao(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&mo(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Mo(t,e,n,r,i){var o,a,s,u,c,l,f,h,p,d=1,y=!1,m=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=Hi===n||Yi===n,r&&ko(t,!0,-1)&&(y=!0,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)),1===d)for(;Ao(t)||To(t);)ko(t,!0,-1)?(y=!0,s=o,t.lineIndent>e?d=1:t.lineIndent===e?d=0:t.lineIndent<e&&(d=-1)):s=!1;if(s&&(s=y||i),1!==d&&Hi!==n||(h=zi===n||Vi===n?e:e+1,p=t.position-t.lineStart,1===d?s&&(Eo(t,p)||function(t,e,n){var r,i,o,a,s,u,c,l=t.tag,f=t.anchor,h={},p=Object.create(null),d=null,y=null,m=null,g=!1,v=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=h),c=t.input.charCodeAt(t.position);0!==c;){if(g||-1===t.firstTabInLine||(t.position=t.firstTabInLine,mo(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,63!==c&&58!==c||!oo(r)){if(a=t.line,s=t.lineStart,u=t.position,!Mo(t,n,Vi,!1,!0))break;if(t.line===o){for(c=t.input.charCodeAt(t.position);io(c);)c=t.input.charCodeAt(++t.position);if(58===c)oo(c=t.input.charCodeAt(++t.position))||mo(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(wo(t,h,p,d,y,null,a,s,u),d=y=m=null),v=!0,g=!1,i=!1,d=t.tag,y=t.result;else{if(!v)return t.tag=l,t.anchor=f,!0;mo(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return t.tag=l,t.anchor=f,!0;mo(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(g&&(wo(t,h,p,d,y,null,a,s,u),d=y=m=null),v=!0,g=!0,i=!0):g?(g=!1,i=!0):mo(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===o||t.lineIndent>e)&&(g&&(a=t.line,s=t.lineStart,u=t.position),Mo(t,e,Hi,!0,i)&&(g?y=t.result:m=t.result),g||(wo(t,h,p,d,y,m,a,s,u),d=y=m=null),ko(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&0!==c)mo(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&wo(t,h,p,d,y,null,a,s,u),v&&(t.tag=l,t.anchor=f,t.kind="mapping",t.result=h),v}(t,p,h))||function(t,e){var n,r,i,o,a,s,u,c,l,f,h,p,d=!0,y=t.tag,m=t.anchor,g=Object.create(null);if(91===(p=t.input.charCodeAt(t.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(++t.position);0!==p;){if(ko(t,!0,e),(p=t.input.charCodeAt(t.position))===a)return t.position++,t.tag=y,t.anchor=m,t.kind=c?"mapping":"sequence",t.result=o,!0;d?44===p&&mo(t,"expected the node content, but found ','"):mo(t,"missed comma between flow collection entries"),h=null,s=u=!1,63===p&&oo(t.input.charCodeAt(t.position+1))&&(s=u=!0,t.position++,ko(t,!0,e)),n=t.line,r=t.lineStart,i=t.position,Mo(t,e,zi,!1,!0),f=t.tag,l=t.result,ko(t,!0,e),p=t.input.charCodeAt(t.position),!u&&t.line!==n||58!==p||(s=!0,p=t.input.charCodeAt(++t.position),ko(t,!0,e),Mo(t,e,zi,!1,!0),h=t.result),c?wo(t,o,g,f,l,h,n,r,i):s?o.push(wo(t,null,g,f,l,h,n,r,i)):o.push(l),ko(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(d=!0,p=t.input.charCodeAt(++t.position)):d=!1}mo(t,"unexpected end of the stream within a flow collection")}(t,h)?m=!0:(a&&function(t,e){var n,r,i,o,a,s=Wi,u=!1,c=!1,l=e,f=0,h=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)Wi===s?s=43===o?Ji:Gi:mo(t,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?mo(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?mo(t,"repeat of an indentation width identifier"):(l=e+i-1,c=!0)}if(io(o)){do{o=t.input.charCodeAt(++t.position)}while(io(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!ro(o)&&0!==o)}for(;0!==o;){for(xo(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!c||t.lineIndent<l)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!c&&t.lineIndent>l&&(l=t.lineIndent),ro(o))f++;else{if(t.lineIndent<l){s===Ji?t.result+=ni.repeat("\n",u?1+f:f):s===Wi&&u&&(t.result+="\n");break}for(r?io(o)?(h=!0,t.result+=ni.repeat("\n",u?1+f:f)):h?(h=!1,t.result+=ni.repeat("\n",f+1)):0===f?u&&(t.result+=" "):t.result+=ni.repeat("\n",f):t.result+=ni.repeat("\n",u?1+f:f),u=!0,c=!0,f=0,n=t.position;!ro(o)&&0!==o;)o=t.input.charCodeAt(++t.position);bo(t,n,t.position,!1)}}return!0}(t,h)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(bo(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else ro(n)?(bo(t,r,i,!0),So(t,ko(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Oo(t)?mo(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);mo(t,"unexpected end of the stream within a single quoted scalar")}(t,h)||function(t,e){var n,r,i,o,a,s,u;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return bo(t,n,t.position,!0),t.position++,!0;if(92===s){if(bo(t,n,t.position,!0),ro(s=t.input.charCodeAt(++t.position)))ko(t,!1,e);else if(s<256&&lo[s])t.result+=fo[s],t.position++;else if((a=120===(u=s)?2:117===u?4:85===u?8:0)>0){for(i=a,o=0;i>0;i--)(a=so(s=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:mo(t,"expected hexadecimal character");t.result+=co(o),t.position++}else mo(t,"unknown escape sequence");n=r=t.position}else ro(s)?(bo(t,n,r,!0),So(t,ko(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Oo(t)?mo(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}mo(t,"unexpected end of the stream within a double quoted scalar")}(t,h)?m=!0:function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!oo(r)&&!ao(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&mo(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Ki.call(t.anchorMap,n)||mo(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],ko(t,!0,-1),!0}(t)?(m=!0,null===t.tag&&null===t.anchor||mo(t,"alias node should not have any properties")):function(t,e,n){var r,i,o,a,s,u,c,l,f=t.kind,h=t.result;if(oo(l=t.input.charCodeAt(t.position))||ao(l)||35===l||38===l||42===l||33===l||124===l||62===l||39===l||34===l||37===l||64===l||96===l)return!1;if((63===l||45===l)&&(oo(r=t.input.charCodeAt(t.position+1))||n&&ao(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==l;){if(58===l){if(oo(r=t.input.charCodeAt(t.position+1))||n&&ao(r))break}else if(35===l){if(oo(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Oo(t)||n&&ao(l))break;if(ro(l)){if(s=t.line,u=t.lineStart,c=t.lineIndent,ko(t,!1,-1),t.lineIndent>=e){a=!0,l=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=u,t.lineIndent=c;break}}a&&(bo(t,i,o,!1),So(t,t.line-s),i=o=t.position,a=!1),io(l)||(o=t.position+1),l=t.input.charCodeAt(++t.position)}return bo(t,i,o,!1),!!t.result||(t.kind=f,t.result=h,!1)}(t,h,zi===n)&&(m=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===d&&(m=s&&Eo(t,p))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&mo(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,c=t.implicitTypes.length;u<c;u+=1)if((f=t.implicitTypes[u]).resolve(t.result)){t.result=f.construct(t.result),t.tag=f.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(Ki.call(t.typeMap[t.kind||"fallback"],t.tag))f=t.typeMap[t.kind||"fallback"][t.tag];else for(f=null,u=0,c=(l=t.typeMap.multi[t.kind||"fallback"]).length;u<c;u+=1)if(t.tag.slice(0,l[u].tag.length)===l[u].tag){f=l[u];break}f||mo(t,"unknown tag !<"+t.tag+">"),null!==t.result&&f.kind!==t.kind&&mo(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+f.kind+'", not "'+t.kind+'"'),f.resolve(t.result,t.tag)?(t.result=f.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):mo(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||m}function No(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(i=t.input.charCodeAt(t.position))&&(ko(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!oo(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&mo(t,"directive name must not be less than one character in length");0!==i;){for(;io(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!ro(i));break}if(ro(i))break;for(e=t.position;0!==i&&!oo(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&xo(t),Ki.call(vo,n)?vo[n](t,n,r):go(t,'unknown document directive "'+n+'"')}ko(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,ko(t,!0,-1)):a&&mo(t,"directives end mark is expected"),Mo(t,t.lineIndent-1,Hi,!1,!0),ko(t,!0,-1),t.checkLineBreaks&&Qi.test(t.input.slice(o,t.position))&&go(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Oo(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,ko(t,!0,-1)):t.position<t.length-1&&mo(t,"end of the stream or a document separator is expected")}function Co(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new po(t,e),r=t.indexOf("\0");for(-1!==r&&(n.position=r,mo(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)No(n);return n.documents}var jo={loadAll:function(t,e,n){null!==e&&"object"==typeof e&&void 0===n&&(n=e,e=null);var r=Co(t,n);if("function"!=typeof e)return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])},load:function(t,e){var n=Co(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new oi("expected a single document in the stream, but found more")}}},Po=Object.prototype.toString,Lo=Object.prototype.hasOwnProperty,Io=65279,Do=9,Ro=10,Bo=13,Fo=32,$o=33,Uo=34,qo=35,Ko=37,zo=38,Vo=39,Yo=42,Ho=44,Wo=45,Go=58,Jo=61,Xo=62,Qo=63,Zo=64,ta=91,ea=93,na=96,ra=123,ia=124,oa=125,aa={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},sa=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ua=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ca(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else{if(!(t<=4294967295))throw new oi("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+ni.repeat("0",r-e.length)+e}var la=2;function fa(t){this.schema=t.schema||qi,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ni.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,r,i,o,a,s,u;if(null===e)return{};for(n={},i=0,o=(r=Object.keys(e)).length;i<o;i+=1)a=r[i],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(u=t.compiledTypeMap.fallback[a])&&Lo.call(u.styleAliases,s)&&(s=u.styleAliases[s]),n[a]=s;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?la:1,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ha(t,e){for(var n,r=ni.repeat(" ",e),i=0,o=-1,a="",s=t.length;i<s;)-1===(o=t.indexOf("\n",i))?(n=t.slice(i),i=s):(n=t.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function pa(t,e){return"\n"+ni.repeat(" ",t.indent*e)}function da(t){return t===Fo||t===Do}function ya(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==Io||65536<=t&&t<=1114111}function ma(t){return ya(t)&&t!==Io&&t!==Bo&&t!==Ro}function ga(t,e,n){var r=ma(t),i=r&&!da(t);return(n?r:r&&t!==Ho&&t!==ta&&t!==ea&&t!==ra&&t!==oa)&&t!==qo&&!(e===Go&&!i)||ma(e)&&!da(e)&&t===qo||e===Go&&i}function va(t,e){var n,r=t.charCodeAt(e);return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function ba(t){return/^\n* /.test(t)}var _a=1,wa=2,xa=3,ka=4,Oa=5;function Sa(t,e,n,r,i){t.dump=function(){if(0===e.length)return t.quotingType===la?'""':"''";if(!t.noCompatMode&&(-1!==sa.indexOf(e)||ua.test(e)))return t.quotingType===la?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),s=r||t.flowLevel>-1&&n>=t.flowLevel;switch(function(t,e,n,r,i,o,a,s){var u,c,l=0,f=null,h=!1,p=!1,d=-1!==r,y=-1,m=ya(c=va(t,0))&&c!==Io&&!da(c)&&c!==Wo&&c!==Qo&&c!==Go&&c!==Ho&&c!==ta&&c!==ea&&c!==ra&&c!==oa&&c!==qo&&c!==zo&&c!==Yo&&c!==$o&&c!==ia&&c!==Jo&&c!==Xo&&c!==Vo&&c!==Uo&&c!==Ko&&c!==Zo&&c!==na&&function(t){return!da(t)&&t!==Go}(va(t,t.length-1));if(e||a)for(u=0;u<t.length;l>=65536?u+=2:u++){if(!ya(l=va(t,u)))return Oa;m=m&&ga(l,f,s),f=l}else{for(u=0;u<t.length;l>=65536?u+=2:u++){if((l=va(t,u))===Ro)h=!0,d&&(p=p||u-y-1>r&&" "!==t[y+1],y=u);else if(!ya(l))return Oa;m=m&&ga(l,f,s),f=l}p=p||d&&u-y-1>r&&" "!==t[y+1]}return h||p?n>9&&ba(t)?Oa:a?o===la?Oa:wa:p?ka:xa:!m||a||i(t)?o===la?Oa:wa:_a}(e,s,t.indent,a,(function(e){return function(t,e){var n,r;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1}(t,e)}),t.quotingType,t.forceQuotes&&!r,i)){case _a:return e;case wa:return"'"+e.replace(/'/g,"''")+"'";case xa:return"|"+Ea(e,t.indent)+Aa(ha(e,o));case ka:return">"+Ea(e,t.indent)+Aa(ha(function(t,e){for(var n,r,i,o=/(\n+)([^\n]*)/g,a=(i=-1!==(i=t.indexOf("\n"))?i:t.length,o.lastIndex=i,Ta(t.slice(0,i),e)),s="\n"===t[0]||" "===t[0];r=o.exec(t);){var u=r[1],c=r[2];n=" "===c[0],a+=u+(s||n||""===c?"":"\n")+Ta(c,e),s=n}return a}(e,a),o));case Oa:return'"'+function(t){for(var e,n="",r=0,i=0;i<t.length;r>=65536?i+=2:i++)r=va(t,i),!(e=aa[r])&&ya(r)?(n+=t[i],r>=65536&&(n+=t[i+1])):n+=e||ca(r);return n}(e)+'"';default:throw new oi("impossible error: invalid scalar style")}}()}function Ea(t,e){var n=ba(t)?String(e):"",r="\n"===t[t.length-1];return n+(!r||"\n"!==t[t.length-2]&&"\n"!==t?r?"":"-":"+")+"\n"}function Aa(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Ta(t,e){if(""===t||" "===t[0])return t;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,u="";n=i.exec(t);)(s=n.index)-o>e&&(r=a>o?a:s,u+="\n"+t.slice(o,r),o=r+1),a=s;return u+="\n",t.length-o>e&&a>o?u+=t.slice(o,a)+"\n"+t.slice(a+1):u+=t.slice(o),u.slice(1)}function Ma(t,e,n,r){var i,o,a,s="",u=t.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(Ca(t,e+1,a,!0,!0,!1,!0)||void 0===a&&Ca(t,e+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=pa(t,e)),t.dump&&Ro===t.dump.charCodeAt(0)?s+="-":s+="- ",s+=t.dump);t.tag=u,t.dump=s||"[]"}function Na(t,e,n){var r,i,o,a,s,u;for(o=0,a=(i=n?t.explicitTypes:t.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof e&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(n?s.multi&&s.representName?t.tag=s.representName(e):t.tag=s.tag:t.tag="?",s.represent){if(u=t.styleMap[s.tag]||s.defaultStyle,"[object Function]"===Po.call(s.represent))r=s.represent(e,u);else{if(!Lo.call(s.represent,u))throw new oi("!<"+s.tag+'> tag resolver accepts not "'+u+'" style');r=s.represent[u](e,u)}t.dump=r}return!0}return!1}function Ca(t,e,n,r,i,o,a){t.tag=null,t.dump=n,Na(t,n,!1)||Na(t,n,!0);var s,u=Po.call(t.dump),c=r;r&&(r=t.flowLevel<0||t.flowLevel>e);var l,f,h="[object Object]"===u||"[object Array]"===u;if(h&&(f=-1!==(l=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||f||2!==t.indent&&e>0)&&(i=!1),f&&t.usedDuplicates[l])t.dump="*ref_"+l;else{if(h&&f&&!t.usedDuplicates[l]&&(t.usedDuplicates[l]=!0),"[object Object]"===u)r&&0!==Object.keys(t.dump).length?(function(t,e,n,r){var i,o,a,s,u,c,l="",f=t.tag,h=Object.keys(n);if(!0===t.sortKeys)h.sort();else if("function"==typeof t.sortKeys)h.sort(t.sortKeys);else if(t.sortKeys)throw new oi("sortKeys must be a boolean or a function");for(i=0,o=h.length;i<o;i+=1)c="",r&&""===l||(c+=pa(t,e)),s=n[a=h[i]],t.replacer&&(s=t.replacer.call(n,a,s)),Ca(t,e+1,a,!0,!0,!0)&&((u=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&Ro===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,u&&(c+=pa(t,e)),Ca(t,e+1,s,!0,u)&&(t.dump&&Ro===t.dump.charCodeAt(0)?c+=":":c+=": ",l+=c+=t.dump));t.tag=f,t.dump=l||"{}"}(t,e,t.dump,i),f&&(t.dump="&ref_"+l+t.dump)):(function(t,e,n){var r,i,o,a,s,u="",c=t.tag,l=Object.keys(n);for(r=0,i=l.length;r<i;r+=1)s="",""!==u&&(s+=", "),t.condenseFlow&&(s+='"'),a=n[o=l[r]],t.replacer&&(a=t.replacer.call(n,o,a)),Ca(t,e,o,!1,!1)&&(t.dump.length>1024&&(s+="? "),s+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ca(t,e,a,!1,!1)&&(u+=s+=t.dump));t.tag=c,t.dump="{"+u+"}"}(t,e,t.dump),f&&(t.dump="&ref_"+l+" "+t.dump));else if("[object Array]"===u)r&&0!==t.dump.length?(t.noArrayIndent&&!a&&e>0?Ma(t,e-1,t.dump,i):Ma(t,e,t.dump,i),f&&(t.dump="&ref_"+l+t.dump)):(function(t,e,n){var r,i,o,a="",s=t.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],t.replacer&&(o=t.replacer.call(n,String(r),o)),(Ca(t,e,o,!1,!1)||void 0===o&&Ca(t,e,null,!1,!1))&&(""!==a&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=s,t.dump="["+a+"]"}(t,e,t.dump),f&&(t.dump="&ref_"+l+" "+t.dump));else{if("[object String]"!==u){if("[object Undefined]"===u)return!1;if(t.skipInvalid)return!1;throw new oi("unacceptable kind of an object to dump "+u)}"?"!==t.tag&&Sa(t,t.dump,e,o,c)}null!==t.tag&&"?"!==t.tag&&(s=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),s="!"===t.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",t.dump=s+" "+t.dump)}return!0}function ja(t,e){var n,r,i=[],o=[];for(Pa(t,i,o),n=0,r=o.length;n<r;n+=1)e.duplicates.push(i[o[n]]);e.usedDuplicates=new Array(r)}function Pa(t,e,n){var r,i,o;if(null!==t&&"object"==typeof t)if(-1!==(i=e.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Pa(t[i],e,n);else for(i=0,o=(r=Object.keys(t)).length;i<o;i+=1)Pa(t[r[i]],e,n)}function La(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}const Ia={Type:fi,Schema:di,FAILSAFE_SCHEMA:vi,JSON_SCHEMA:Ai,CORE_SCHEMA:Ti,DEFAULT_SCHEMA:qi,load:jo.load,loadAll:jo.loadAll,dump:function(t,e){var n=new fa(e=e||{});n.noRefs||ja(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Ca(n,0,r,!0,!0)?n.dump+"\n":""},YAMLException:oi,types:{binary:Li,float:Ei,map:gi,null:bi,pairs:Fi,set:Ui,timestamp:Ci,bool:_i,int:ki,merge:ji,omap:Ri,seq:mi,str:yi},safeLoad:La("safeLoad","load"),safeLoadAll:La("safeLoadAll","loadAll"),safeDump:La("safeDump","dump")};function Da(t){return Da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(t)}function Ra(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ba(t,e,n){return(e=$a(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$a(r.key),r)}}function $a(t){var e=function(t,e){if("object"!=Da(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Da(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Da(e)?e:e+""}function Ua(t,e,n){return e=Ka(e),function(t,e){if(e&&("object"==Da(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qa()?Reflect.construct(e,n||[],Ka(t).constructor):e.apply(t,n))}function qa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qa=function(){return!!t})()}function Ka(t){return Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ka(t)}function za(t,e){return za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},za(t,e)}var Va=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Ua(this,n,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&za(t,e)}(n,e),r=n,i=[{key:"renderFiles",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.pluginData.components.filter((function(t){return!t.getContainerId()})).map((function(r){var i=e.pluginData.emitEvent({parent:n,type:"Render",action:"write",status:"running",files:[r.path],data:{global:!1}}),o=new t.FileInput({path:r.path,content:Ia.dump(e.__formatComponent(r,!1),{lineWidth:-1,noRefs:!0})});return e.pluginData.emitEvent({id:i,status:"success"}),o}))}},{key:"__formatComponent",value:function(t,e){var n=this.__formatAttributes(t.attributes);if("others"===t.definition.apiVersion?n=this.__insertFront(n,"name",t.id):(n=this.__insertFront(n,"metadata",this.__insertFront(n.metadata||{},"name",t.id)),Object.keys(n.metadata.labels||{}).length||(n.metadata.labels={"app.kubernetes.io/name":t.id})),e||(n=this.__insertFront(n,"kind",t.definition.type),n=this.__insertFront(n,"apiVersion",t.definition.apiVersion)),this.__insertChildComponentsAttributes(n,t),["Deployment","StatefulSet","Job"].includes(t.definition.type)){var r,i,o,a=null===(r=n.spec)||void 0===r?void 0:r.template;a&&((i=n).spec||(i.spec={}),(o=n.spec).selector||(o.selector={}),n.spec.selector.matchLabels=a.metadata.labels,delete n.spec.template,n.spec.template=a)}return n}},{key:"__formatAttributes",value:function(t){var e=this;return t.reduce((function(t,n,r){var i,o;if("Object"===n.type)t[n.name||r]=e.__formatAttributes(n.value);else if("Link"===(null===(i=n.definition)||void 0===i?void 0:i.type))t[n.name]="selector"===n.name?e.__formatSelectorLinkAttribute(n):n.value[0];else if("Array"===n.type){var a;t[n.name]="Object"===(null===(a=n.value[0])||void 0===a?void 0:a.type)?Object.values(e.__formatAttributes(n.value)):n.value}else"Reference"===(null===(o=n.definition)||void 0===o?void 0:o.type)||"isInitContainer"===n.name||(t[n.name]=n.value);return t}),{})}},{key:"__formatSelectorLinkAttribute",value:function(t){var e,n;if(null===(e=t.value)||void 0===e||!e.length)return{};var r=t.value[0],i=this.pluginData.getComponentById(r);if(!i)throw new Error("Target component not found '".concat(r,"'."));var o=null===(n=i.attributes.find((function(t){return"metadata"===t.name})))||void 0===n||null===(n=n.value)||void 0===n||null===(n=n.find((function(t){return"labels"===t.name})))||void 0===n?void 0:n.value;return null!=o&&o.length?this.__formatAttributes(o):{"app.kubernetes.io/name":i.id}}},{key:"__insertChildComponentsAttributes",value:function(t,e){var n=this;if(e.definition.definedAttributes.find((function(t){return"spec"===t.name}))){var r=this.pluginData.getChildren(e.id);e.definition.childrenIndex.forEach((function(i){var o=i.attributeName,a=i.componentType,s=r.filter((function(t){return t.definition.type===a}));if(s.length)if(t.spec||(t.spec={}),"Pod"===e.definition.type){var u="initContainers"===o,c=s.filter((function(t){return t.getAttributeByName("isInitContainer").value===u}));c.length&&(t.spec[o]=c.map((function(t){return n.__formatComponent(t,!0)})))}else t.spec[o]=n.__formatComponent(s[0],!0)}))}}},{key:"__insertFront",value:function(t,e,n){return delete t[e],function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ra(Object(n),!0).forEach((function(e){Ba(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ra(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}(Ba({},e,n),t)}}],i&&Fa(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i}(t.DefaultRender);const Ya=Va,Ha=JSON.parse('{"UU":"kubernator-plugin","rE":"0.2.0"}');function Wa(t){return Wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wa(t)}function Ga(t,e,n){return e=Xa(e),function(t,e){if(e&&("object"==Wa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ja()?Reflect.construct(e,n||[],Xa(t).constructor):e.apply(t,n))}function Ja(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ja=function(){return!!t})()}function Xa(t){return Xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xa(t)}function Qa(t,e){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qa(t,e)}const Za=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{event:null};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new h,r=new _(n,{name:Ha.UU,version:Ha.rE},t.event);return Ga(this,e,[{configuration:n,pluginData:r,pluginMetadata:new J(r),pluginParser:new ti(r),pluginRenderer:new Ya(r)}])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qa(t,e)}(e,t),n=e,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(t.DefaultPlugin)})();var i=exports;for(var o in r)i[o]=r[o];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();